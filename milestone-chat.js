!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).ChatBotSDK={})}(this,(function(e){"use strict";var t,n,r,i,o,s,a,l,c,d,u={},p=[],h=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,g=Array.isArray;function m(e,t){for(var n in t)e[n]=t[n];return e}function f(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function b(e,t,i,o,s){var a={type:e,props:t,key:i,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:null==s?++r:s,__i:-1,__u:0};return null==s&&null!=n.vnode&&n.vnode(a),a}function x(e){return e.children}function y(e,t){this.props=e,this.context=t}function w(e,t){if(null==t)return e.__?w(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?w(e):null}function _(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return _(e)}}function v(e){(!e.__d&&(e.__d=!0)&&i.push(e)&&!k.__r++||o!==n.debounceRendering)&&((o=n.debounceRendering)||s)(k)}function k(){var e,t,r,o,s,l,c,d;for(i.sort(a);e=i.shift();)e.__d&&(t=i.length,o=void 0,l=(s=(r=e).__v).__e,c=[],d=[],r.__P&&((o=m({},s)).__v=s.__v+1,n.vnode&&n.vnode(o),I(r.__P,o,s,r.__n,r.__P.namespaceURI,32&s.__u?[l]:null,c,null==l?w(s):l,!!(32&s.__u),d),o.__v=s.__v,o.__.__k[o.__i]=o,A(c,o,d),o.__e!=l&&_(o)),i.length>t&&i.sort(a));k.__r=0}function N(e,t,n,r,i,o,s,a,l,c,d){var h,m,f,y,_,v=r&&r.__k||p,k=t.length;for(n.__d=l,function(e,t,n){var r,i,o,s,a,l=t.length,c=n.length,d=c,u=0;for(e.__k=[],r=0;r<l;r++)null!=(i=t[r])&&"boolean"!=typeof i&&"function"!=typeof i?(s=r+u,(i=e.__k[r]="string"==typeof i||"number"==typeof i||"bigint"==typeof i||i.constructor==String?b(null,i,null,null,null):g(i)?b(x,{children:i},null,null,null):void 0===i.constructor&&i.__b>0?b(i.type,i.props,i.key,i.ref?i.ref:null,i.__v):i).__=e,i.__b=e.__b+1,o=null,-1!==(a=i.__i=E(i,n,s,d))&&(d--,(o=n[a])&&(o.__u|=131072)),null==o||null===o.__v?(-1==a&&u--,"function"!=typeof i.type&&(i.__u|=65536)):a!==s&&(a==s-1?u--:a==s+1?u++:(a>s?u--:u++,i.__u|=65536))):i=e.__k[r]=null;if(d)for(r=0;r<c;r++)null!=(o=n[r])&&!(131072&o.__u)&&(o.__e==e.__d&&(e.__d=w(o)),D(o,o))}(n,t,v),l=n.__d,h=0;h<k;h++)null!=(f=n.__k[h])&&(m=-1===f.__i?u:v[f.__i]||u,f.__i=h,I(e,f,m,i,o,s,a,l,c,d),y=f.__e,f.ref&&m.ref!=f.ref&&(m.ref&&M(m.ref,null,f),d.push(f.ref,f.__c||y,f)),null==_&&null!=y&&(_=y),65536&f.__u||m.__k===f.__k?l=S(f,l,e):"function"==typeof f.type&&void 0!==f.__d?l=f.__d:y&&(l=y.nextSibling),f.__d=void 0,f.__u&=-196609);n.__d=l,n.__e=_}function S(e,t,n){var r,i;if("function"==typeof e.type){for(r=e.__k,i=0;r&&i<r.length;i++)r[i]&&(r[i].__=e,t=S(r[i],t,n));return t}e.__e!=t&&(t&&e.type&&!n.contains(t)&&(t=w(e)),n.insertBefore(e.__e,t||null),t=e.__e);do{t=t&&t.nextSibling}while(null!=t&&8===t.nodeType);return t}function E(e,t,n,r){var i=e.key,o=e.type,s=n-1,a=n+1,l=t[n];if(null===l||l&&i==l.key&&o===l.type&&!(131072&l.__u))return n;if(("function"!=typeof o||o===x||i)&&r>(null==l||131072&l.__u?0:1))for(;s>=0||a<t.length;){if(s>=0){if((l=t[s])&&!(131072&l.__u)&&i==l.key&&o===l.type)return s;s--}if(a<t.length){if((l=t[a])&&!(131072&l.__u)&&i==l.key&&o===l.type)return a;a++}}return-1}function C(e,t,n){"-"===t[0]?e.setProperty(t,null==n?"":n):e[t]=null==n?"":"number"!=typeof n||h.test(t)?n:n+"px"}function R(e,t,n,r,i){var o;e:if("style"===t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof r&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||C(e.style,t,"");if(n)for(t in n)r&&n[t]===r[t]||C(e.style,t,n[t])}else if("o"===t[0]&&"n"===t[1])o=t!==(t=t.replace(/(PointerCapture)$|Capture$/i,"$1")),t=t.toLowerCase()in e||"onFocusOut"===t||"onFocusIn"===t?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+o]=n,n?r?n.u=r.u:(n.u=l,e.addEventListener(t,o?d:c,o)):e.removeEventListener(t,o?d:c,o);else{if("http://www.w3.org/2000/svg"==i)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!=t&&"height"!=t&&"href"!=t&&"list"!=t&&"form"!=t&&"tabIndex"!=t&&"download"!=t&&"rowSpan"!=t&&"colSpan"!=t&&"role"!=t&&"popover"!=t&&t in e)try{e[t]=null==n?"":n;break e}catch(e){}"function"==typeof n||(null==n||!1===n&&"-"!==t[4]?e.removeAttribute(t):e.setAttribute(t,"popover"==t&&1==n?"":n))}}function T(e){return function(t){if(this.l){var r=this.l[t.type+e];if(null==t.t)t.t=l++;else if(t.t<r.u)return;return n.event&&(t=n.event(t)),"handleEvent"in r?r.handleEvent(t):r(t)}}}function I(e,t,r,i,o,s,a,l,c,d){var u,p,h,f,b,w,_,v,k,S,E,C,R,T,I,A,M=t.type;if(void 0!==t.constructor)return null;128&r.__u&&(c=!!(32&r.__u),s=[l=t.__e=r.__e]),(u=n.__b)&&u(t);e:if("function"==typeof M)try{if(v=t.props,k="prototype"in M&&M.prototype.render,S=(u=M.contextType)&&i[u.__c],E=u?S?S.props.value:u.__:i,r.__c?_=(p=t.__c=r.__c).__=p.__E:(k?t.__c=p=new M(v,E):(t.__c=p=new y(v,E),p.constructor=M,p.render=L),S&&S.sub(p),p.props=v,p.state||(p.state={}),p.context=E,p.__n=i,h=p.__d=!0,p.__h=[],p._sb=[]),k&&null==p.__s&&(p.__s=p.state),k&&null!=M.getDerivedStateFromProps&&(p.__s==p.state&&(p.__s=m({},p.__s)),m(p.__s,M.getDerivedStateFromProps(v,p.__s))),f=p.props,b=p.state,p.__v=t,h)k&&null==M.getDerivedStateFromProps&&null!=p.componentWillMount&&p.componentWillMount(),k&&null!=p.componentDidMount&&p.__h.push(p.componentDidMount);else{if(k&&null==M.getDerivedStateFromProps&&v!==f&&null!=p.componentWillReceiveProps&&p.componentWillReceiveProps(v,E),!p.__e&&(null!=p.shouldComponentUpdate&&!1===p.shouldComponentUpdate(v,p.__s,E)||t.__v===r.__v)){for(t.__v!==r.__v&&(p.props=v,p.state=p.__s,p.__d=!1),t.__e=r.__e,t.__k=r.__k,t.__k.some((function(e){e&&(e.__=t)})),C=0;C<p._sb.length;C++)p.__h.push(p._sb[C]);p._sb=[],p.__h.length&&a.push(p);break e}null!=p.componentWillUpdate&&p.componentWillUpdate(v,p.__s,E),k&&null!=p.componentDidUpdate&&p.__h.push((function(){p.componentDidUpdate(f,b,w)}))}if(p.context=E,p.props=v,p.__P=e,p.__e=!1,R=n.__r,T=0,k){for(p.state=p.__s,p.__d=!1,R&&R(t),u=p.render(p.props,p.state,p.context),I=0;I<p._sb.length;I++)p.__h.push(p._sb[I]);p._sb=[]}else do{p.__d=!1,R&&R(t),u=p.render(p.props,p.state,p.context),p.state=p.__s}while(p.__d&&++T<25);p.state=p.__s,null!=p.getChildContext&&(i=m(m({},i),p.getChildContext())),k&&!h&&null!=p.getSnapshotBeforeUpdate&&(w=p.getSnapshotBeforeUpdate(f,b)),N(e,g(A=null!=u&&u.type===x&&null==u.key?u.props.children:u)?A:[A],t,r,i,o,s,a,l,c,d),p.base=t.__e,t.__u&=-161,p.__h.length&&a.push(p),_&&(p.__E=p.__=null)}catch(e){if(t.__v=null,c||null!=s){for(t.__u|=c?160:128;l&&8===l.nodeType&&l.nextSibling;)l=l.nextSibling;s[s.indexOf(l)]=null,t.__e=l}else t.__e=r.__e,t.__k=r.__k;n.__e(e,t,r)}else null==s&&t.__v===r.__v?(t.__k=r.__k,t.__e=r.__e):t.__e=O(r.__e,t,r,i,o,s,a,c,d);(u=n.diffed)&&u(t)}function A(e,t,r){t.__d=void 0;for(var i=0;i<r.length;i++)M(r[i],r[++i],r[++i]);n.__c&&n.__c(t,e),e.some((function(t){try{e=t.__h,t.__h=[],e.some((function(e){e.call(t)}))}catch(e){n.__e(e,t.__v)}}))}function O(e,r,i,o,s,a,l,c,d){var p,h,m,b,x,y,_,v=i.props,k=r.props,S=r.type;if("svg"===S?s="http://www.w3.org/2000/svg":"math"===S?s="http://www.w3.org/1998/Math/MathML":s||(s="http://www.w3.org/1999/xhtml"),null!=a)for(p=0;p<a.length;p++)if((x=a[p])&&"setAttribute"in x==!!S&&(S?x.localName===S:3===x.nodeType)){e=x,a[p]=null;break}if(null==e){if(null===S)return document.createTextNode(k);e=document.createElementNS(s,S,k.is&&k),c&&(n.__m&&n.__m(r,a),c=!1),a=null}if(null===S)v===k||c&&e.data===k||(e.data=k);else{if(a=a&&t.call(e.childNodes),v=i.props||u,!c&&null!=a)for(v={},p=0;p<e.attributes.length;p++)v[(x=e.attributes[p]).name]=x.value;for(p in v)if(x=v[p],"children"==p);else if("dangerouslySetInnerHTML"==p)m=x;else if(!(p in k)){if("value"==p&&"defaultValue"in k||"checked"==p&&"defaultChecked"in k)continue;R(e,p,null,x,s)}for(p in k)x=k[p],"children"==p?b=x:"dangerouslySetInnerHTML"==p?h=x:"value"==p?y=x:"checked"==p?_=x:c&&"function"!=typeof x||v[p]===x||R(e,p,x,v[p],s);if(h)c||m&&(h.__html===m.__html||h.__html===e.innerHTML)||(e.innerHTML=h.__html),r.__k=[];else if(m&&(e.innerHTML=""),N(e,g(b)?b:[b],r,i,o,"foreignObject"===S?"http://www.w3.org/1999/xhtml":s,a,l,a?a[0]:i.__k&&w(i,0),c,d),null!=a)for(p=a.length;p--;)f(a[p]);c||(p="value","progress"===S&&null==y?e.removeAttribute("value"):void 0!==y&&(y!==e[p]||"progress"===S&&!y||"option"===S&&y!==v[p])&&R(e,p,y,v[p],s),p="checked",void 0!==_&&_!==e[p]&&R(e,p,_,v[p],s))}return e}function M(e,t,r){try{if("function"==typeof e){var i="function"==typeof e.__u;i&&e.__u(),i&&null==t||(e.__u=e(t))}else e.current=t}catch(e){n.__e(e,r)}}function D(e,t,r){var i,o;if(n.unmount&&n.unmount(e),(i=e.ref)&&(i.current&&i.current!==e.__e||M(i,null,t)),null!=(i=e.__c)){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(e){n.__e(e,t)}i.base=i.__P=null}if(i=e.__k)for(o=0;o<i.length;o++)i[o]&&D(i[o],t,r||"function"!=typeof e.type);r||f(e.__e),e.__c=e.__=e.__e=e.__d=void 0}function L(e,t,n){return this.constructor(e,n)}function z(e,r,i){var o,s,a,l;n.__&&n.__(e,r),s=(o="function"==typeof i)?null:i&&i.__k||r.__k,a=[],l=[],I(r,e=(!o&&i||r).__k=function(e,n,r){var i,o,s,a={};for(s in n)"key"==s?i=n[s]:"ref"==s?o=n[s]:a[s]=n[s];if(arguments.length>2&&(a.children=arguments.length>3?t.call(arguments,2):r),"function"==typeof e&&null!=e.defaultProps)for(s in e.defaultProps)void 0===a[s]&&(a[s]=e.defaultProps[s]);return b(e,a,i,o,null)}(x,null,[e]),s||u,u,r.namespaceURI,!o&&i?[i]:s?null:r.firstChild?t.call(r.childNodes):null,a,!o&&i?i:s?s.__e:r.firstChild,o,l),A(a,e,l)}t=p.slice,n={__e:function(e,t,n,r){for(var i,o,s;t=t.__;)if((i=t.__c)&&!i.__)try{if((o=i.constructor)&&null!=o.getDerivedStateFromError&&(i.setState(o.getDerivedStateFromError(e)),s=i.__d),null!=i.componentDidCatch&&(i.componentDidCatch(e,r||{}),s=i.__d),s)return i.__E=i}catch(t){e=t}throw e}},r=0,y.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=m({},this.state),"function"==typeof e&&(e=e(m({},n),this.props)),e&&m(n,e),null!=e&&this.__v&&(t&&this._sb.push(t),v(this))},y.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),v(this))},y.prototype.render=x,i=[],s="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,a=function(e,t){return e.__v.__b-t.__v.__b},k.__r=0,l=0,c=T(!1),d=T(!0);var $=0;function P(e,t,r,i,o,s){t||(t={});var a,l,c=t;"ref"in t&&(a=t.ref,delete t.ref);var d={type:e,props:c,key:r,ref:a,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:--$,__i:-1,__u:0,__source:o,__self:s};if("function"==typeof e&&(a=e.defaultProps))for(l in a)void 0===c[l]&&(c[l]=a[l]);return n.vnode&&n.vnode(d),d}var B="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||"undefined"!=typeof global&&global||{},H="URLSearchParams"in B,U="Symbol"in B&&"iterator"in Symbol,j="FileReader"in B&&"Blob"in B&&function(){try{return new Blob,!0}catch(e){return!1}}(),F="FormData"in B,G="ArrayBuffer"in B;if(G)var J=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],W=ArrayBuffer.isView||function(e){return e&&J.indexOf(Object.prototype.toString.call(e))>-1};function q(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function V(e){return"string"!=typeof e&&(e=String(e)),e}function Y(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return U&&(t[Symbol.iterator]=function(){return t}),t}function Z(e){this.map={},e instanceof Z?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){if(2!=e.length)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+e.length);this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function K(e){if(!e._noBody)return e.bodyUsed?Promise.reject(new TypeError("Already read")):void(e.bodyUsed=!0)}function Q(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function X(e){var t=new FileReader,n=Q(t);return t.readAsArrayBuffer(e),n}function ee(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function te(){return this.bodyUsed=!1,this._initBody=function(e){var t;this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:j&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:F&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:H&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():G&&j&&((t=e)&&DataView.prototype.isPrototypeOf(t))?(this._bodyArrayBuffer=ee(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):G&&(ArrayBuffer.prototype.isPrototypeOf(e)||W(e))?this._bodyArrayBuffer=ee(e):this._bodyText=e=Object.prototype.toString.call(e):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):H&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},j&&(this.blob=function(){var e=K(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var e=K(this);return e||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}if(j)return this.blob().then(X);throw new Error("could not read as ArrayBuffer")},this.text=function(){var e,t,n,r,i,o=K(this);if(o)return o;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,n=Q(t),r=/charset=([A-Za-z0-9_-]+)/.exec(e.type),i=r?r[1]:"utf-8",t.readAsText(e,i),n;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},F&&(this.formData=function(){return this.text().then(ie)}),this.json=function(){return this.text().then(JSON.parse)},this}Z.prototype.append=function(e,t){e=q(e),t=V(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},Z.prototype.delete=function(e){delete this.map[q(e)]},Z.prototype.get=function(e){return e=q(e),this.has(e)?this.map[e]:null},Z.prototype.has=function(e){return this.map.hasOwnProperty(q(e))},Z.prototype.set=function(e,t){this.map[q(e)]=V(t)},Z.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},Z.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),Y(e)},Z.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),Y(e)},Z.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),Y(e)},U&&(Z.prototype[Symbol.iterator]=Z.prototype.entries);var ne=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function re(e,t){if(!(this instanceof re))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var n,r,i=(t=t||{}).body;if(e instanceof re){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new Z(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,i||null==e._bodyInit||(i=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new Z(t.headers)),this.method=(n=t.method||this.method||"GET",r=n.toUpperCase(),ne.indexOf(r)>-1?r:n),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal||function(){if("AbortController"in B)return(new AbortController).signal}(),this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(i),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==t.cache&&"no-cache"!==t.cache)){var o=/([?&])_=[^&]*/;if(o.test(this.url))this.url=this.url.replace(o,"$1_="+(new Date).getTime());else{this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}}function ie(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(i))}})),t}function oe(e,t){if(!(this instanceof oe))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=void 0===t.statusText?"":""+t.statusText,this.headers=new Z(t.headers),this.url=t.url||"",this._initBody(e)}re.prototype.clone=function(){return new re(this,{body:this._bodyInit})},te.call(re.prototype),te.call(oe.prototype),oe.prototype.clone=function(){return new oe(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new Z(this.headers),url:this.url})},oe.error=function(){var e=new oe(null,{status:200,statusText:""});return e.ok=!1,e.status=0,e.type="error",e};var se=[301,302,303,307,308];oe.redirect=function(e,t){if(-1===se.indexOf(t))throw new RangeError("Invalid status code");return new oe(null,{status:t,headers:{location:e}})};var ae=B.DOMException;try{new ae}catch(e){(ae=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack}).prototype=Object.create(Error.prototype),ae.prototype.constructor=ae}function le(e,t){return new Promise((function(n,r){var i=new re(e,t);if(i.signal&&i.signal.aborted)return r(new ae("Aborted","AbortError"));var o=new XMLHttpRequest;function s(){o.abort()}if(o.onload=function(){var e,t,r={statusText:o.statusText,headers:(e=o.getAllResponseHeaders()||"",t=new Z,e.replace(/\r?\n[\t ]+/g," ").split("\r").map((function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e})).forEach((function(e){var n=e.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();try{t.append(r,i)}catch(e){console.warn("Response "+e.message)}}})),t)};0===i.url.indexOf("file://")&&(o.status<200||o.status>599)?r.status=200:r.status=o.status,r.url="responseURL"in o?o.responseURL:r.headers.get("X-Request-URL");var s="response"in o?o.response:o.responseText;setTimeout((function(){n(new oe(s,r))}),0)},o.onerror=function(){setTimeout((function(){r(new TypeError("Network request failed"))}),0)},o.ontimeout=function(){setTimeout((function(){r(new TypeError("Network request timed out"))}),0)},o.onabort=function(){setTimeout((function(){r(new ae("Aborted","AbortError"))}),0)},o.open(i.method,function(e){try{return""===e&&B.location.href?B.location.href:e}catch(t){return e}}(i.url),!0),"include"===i.credentials?o.withCredentials=!0:"omit"===i.credentials&&(o.withCredentials=!1),"responseType"in o&&(j?o.responseType="blob":G&&(o.responseType="arraybuffer")),t&&"object"==typeof t.headers&&!(t.headers instanceof Z||B.Headers&&t.headers instanceof B.Headers)){var a=[];Object.getOwnPropertyNames(t.headers).forEach((function(e){a.push(q(e)),o.setRequestHeader(e,V(t.headers[e]))})),i.headers.forEach((function(e,t){-1===a.indexOf(t)&&o.setRequestHeader(t,e)}))}else i.headers.forEach((function(e,t){o.setRequestHeader(t,e)}));i.signal&&(i.signal.addEventListener("abort",s),o.onreadystatechange=function(){4===o.readyState&&i.signal.removeEventListener("abort",s)}),o.send(void 0===i._bodyInit?null:i._bodyInit)}))}function ce(e){let t,n,r,i=!1;return function(o){void 0===t?(t=o,n=0,r=-1):t=function(e,t){const n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}(t,o);const s=t.length;let a=0;for(;n<s;){i&&(10===t[n]&&(a=++n),i=!1);let o=-1;for(;n<s&&-1===o;++n)switch(t[n]){case 58:-1===r&&(r=n-a);break;case 13:i=!0;case 10:o=n}if(-1===o)break;e(t.subarray(a,o),r),a=n,r=-1}a===s?t=void 0:0!==a&&(t=t.subarray(a),n-=a)}}le.polyfill=!0,B.fetch||(B.fetch=le,B.Headers=Z,B.Request=re,B.Response=oe);var de=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const ue="text/event-stream",pe="last-event-id";function he(e,t){var{signal:n,headers:r,onopen:i,onmessage:o,onclose:s,onerror:a,openWhenHidden:l,fetch:c}=t,d=de(t,["signal","headers","onopen","onmessage","onclose","onerror","openWhenHidden","fetch"]);return new Promise(((t,u)=>{const p=Object.assign({},r);let h;function g(){h.abort(),document.hidden||w()}p.accept||(p.accept=ue),l||document.addEventListener("visibilitychange",g);let m=1e3,f=0;function b(){document.removeEventListener("visibilitychange",g),window.clearTimeout(f),h.abort()}null==n||n.addEventListener("abort",(()=>{b(),t()}));const x=null!=c?c:window.fetch,y=null!=i?i:ge;async function w(){var n;h=new AbortController;try{const n=await x(e,Object.assign(Object.assign({},d),{headers:p,signal:h.signal}));await y(n),await async function(e,t){const n=e.getReader();let r;for(;!(r=await n.read()).done;)t(r.value)}(n.body,ce(function(e,t,n){let r={data:"",event:"",id:"",retry:void 0};const i=new TextDecoder;return function(o,s){if(0===o.length)null==n||n(r),r={data:"",event:"",id:"",retry:void 0};else if(s>0){const n=i.decode(o.subarray(0,s)),a=s+(32===o[s+1]?2:1),l=i.decode(o.subarray(a));switch(n){case"data":r.data=r.data?r.data+"\n"+l:l;break;case"event":r.event=l;break;case"id":e(r.id=l);break;case"retry":const n=parseInt(l,10);isNaN(n)||t(r.retry=n)}}}}((e=>{e?p[pe]=e:delete p[pe]}),(e=>{m=e}),o))),null==s||s(),b(),t()}catch(e){if(!h.signal.aborted)try{const t=null!==(n=null==a?void 0:a(e))&&void 0!==n?n:m;window.clearTimeout(f),f=window.setTimeout(w,t)}catch(e){b(),u(e)}}}w()}))}function ge(e){const t=e.headers.get("content-type");if(!(null==t?void 0:t.startsWith(ue)))throw new Error(`Expected content-type to be ${ue}, Actual: ${t}`)}const me="#25314b",fe="#333333",be="#3498db",xe="#F7EBE1",ye="#ffffff",we="#E5E4E2",_e="#808080",ve={chatbot_title:"ChatBot",chatbot_placeholder:"Ask Anyhing...",error_message_no_response:"I'm sorry, I don't understand that.",error_message_generic:"Oops! Something went wrong. It seems there was an issue processing your request. Please try again, and if the problem persists, feel free to let me know. I'm here to help!",empty_screen_message:"Start a conversation!",night:"night",lodgingFeatures:"Lodging Features",size:"Size",availableFor:"Itâ€™s available for",totalWouldBe:"and the total would be",showLess:"Show less",showMore:"Show more",bookNow:"Book Now",great:"Great!",proceedToBookStay:"You can proceed to book your stay now by clicking the button below.",furtherAssistance:"If you need any further assistance or have questions, feel free to let me know!",chatbot_tooltip_message:"Hi there! How can I assist you today?",loadingOlderMessages:"Loading older messages....",showMoreActivity:"Show Activities",showLessActivity:"Hide Activities",resetChat:"Reset Chat?",resetChatConfirmation:"Are you sure you want to reset this chat? All current messages and context will be cleared",reset:"Reset",cancel:"Cancel",dates:"Dates",travelers:"Travelers",stay:"Stay",estimatedCost:"Estimated Cost",approximately:"approximately",form:"From",to:"To",distance:"Distance",tripSummary:"Trip Summary",showActivities:"Show Activities",hideActivities:"Hide Activities",aboutEvent:"About Event",eventSchedule:"Event Schedule",location:"Location",noActivitiesAvailable:"No activities available",free:"Free",checkInTime:"Check-in Time",activities:"Activities",onSiteAmenities:"On-site Amenities",perNight:"per night",resortImage:"Resort Image",totalPrice:"The total price would be",locationsAvailable:"Locations Available",allDay:"All Day",hideSchedule:"Hide Schedule",showSchedule:"Show Schedule",wasThisHelpful:"Was this helpful?",summary:"Summary",resort:"Resort",arrival:"Arrival",departure:"Departure",guests:"Guests",pets:"Pets",rateThisChat:"How would you rate this chat?",driveTime:"Drive Time",retry:"Retry",regenerate:"Regenerate",failedToSend:"Failed to send.",somethingWentWrong:"Something went wrong.",errorGeneratingResponse:"Error generating a response."};var ke,Ne;!function(e){e.GET="GET",e.POST="POST",e.PATCH="PATCH",e.DELETE="DELETE"}(ke||(ke={})),function(e){e.SILENT="silent",e.INFO="info",e.WARN="warn",e.ERROR="error",e.FATAL="fatal"}(Ne||(Ne={}));const Se={INVALID_CREDENTIALS:{code:"INVALID_CREDENTIALS",message:"Failed to authenticate given credentials"},NETWORK_ERROR:{code:"NETWORK_ERROR",message:"Failed to fetch data"},GENERIC_API_ERROR:{code:"API_ERROR",message:"Something went wrong"},ERROR_IN_PARSING:{code:"ERROR",message:"Error in parsing the response"},CONFIGURATION_ERROR:{code:"CONFIGURATION_ERROR",message:"Failed to fetch configuration data"},TELEMETRIC_EVENT_ERROR:{code:"FAILED_TO_LOG_TELEMETRIC_EVENT",message:"Telemetric logger function not found in window object"},FETCH_EVENT_SOURCE_ERROR:{code:"FETCH_EVENT_SOURCE_ERROR",message:"Error from microsoft fetchEventSource package"},UNHANDLED_ERROR:{code:"UNHANDLED_ERROR",message:"Unhandled error occurred"}};var Ee;!function(e){e.ERROR="ERROR",e.NETWORK_ERROR="NETWORK_ERROR",e.ERROR_IN_PARSING="ERROR_IN_PARSING",e.INVALID_CREDENTIALS="INVALID_CREDENTIALS",e.CONFIGURATION_ERROR="CONFIGURATION_ERROR",e.GENERIC_API_ERROR="GENERIC_API_ERROR",e.FETCH_EVENT_SOURCE_ERROR="FETCH_EVENT_SOURCE_ERROR",e.UNHANDLED_ERROR="UNHANDLED_ERROR"}(Ee||(Ee={}));const Ce={primaryColor:me,secondaryColor:be,chatWindowColor:ye,textColor:fe,chatBubbleColor:xe,cardColor:ye},Re={chatTitle:ve.chatbot_title,chatPlaceholder:ve.chatbot_placeholder,logEnabled:!1,position:{bottom:"40px",right:"30px"},theme:Ce,chatLinkConfig:{openInNewTab:!1}},Te=[{id:1,label:"Find Resorts",messagePrompt:"Can you help me find resorts?"},{id:3,label:"Plan a Trip",messagePrompt:"Help me plan a trip."},{id:4,label:"Search Property",messagePrompt:"Can you search for a property?"},{id:5,label:"Explore Events",messagePrompt:"Can you explore events?"},{id:2,label:"Create an Itinerary",messagePrompt:"Can you create an itinerary?"}];var Ie;!function(e){e[e.INFO=0]="INFO",e[e.ERROR=1]="ERROR",e[e.WARN=2]="WARN"}(Ie||(Ie={}));const Ae="Initializing ChatBot UI",Oe="Starting conversation",Me="Toggling chat window:",De="Received complete message from bot:",Le="Sending message to bot:",ze="Minimizing chat window",$e="Maximizing chat window",Pe="Unexpected error",Be="Start initializing chat bot",He="Error initializing ChatBot",Ue="API Request timed out, aborting...",je="Stream closed",Fe="Error fetching previous messages",Ge="Retry clicked",Je=18e4,We="bot",qe="error",Ve="user",Ye="c",Ze="Escape",Ke="m",Qe="ArrowLeft",Xe="ArrowRight",et="api/v1/sites/chatbot/auth",tt="api/v1/threads",nt="api/v1/messages",rt="Minimize",it="Maximize",ot="Close",st="Reset chat",at="Send message",lt=["bookings"],ct={event:"events",category:"open AI agent",action:"click",label:"pagename"},dt={event:"events",category:"AI query selector",action:"click",label:"query name"},ut={event:"events",category:"close AI agent",action:"click",label:"pagename"},pt={event:"events",category:"go to resort",action:"click",label:"resort title",label2:"AI agent"},ht={event:"booking buttons",category:"booking entrances",action:"click",label:"resort title",label2:"AI agent"},gt=["prefixText","summary","itinerarySummary","resorts","sites","events","resortCard","itineraryData","trip","eventDetailsCard","postfixText","bookings","resortSummary","errorCode"],mt="_self",ft="_blank",bt="ADD_NEW_MESSAGE",xt="UPDATE_LAST_MESSAGE",yt="DELETE_MESSAGE_BY_ID";var wt=/d{1,4}|D{3,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|W{1,2}|[LlopSZN]|"[^"]*"|'[^']*'/g,_t=/\b(?:[A-Z]{1,3}[A-Z][TC])(?:[-+]\d{4})?|((?:Australian )?(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time)\b/g,vt=/[^-+\dA-Z]/g;function kt(e,t,n,r){if(1!==arguments.length||"string"!=typeof e||/\d/.test(e)||(t=e,e=void 0),(e=e||0===e?e:new Date)instanceof Date||(e=new Date(e)),isNaN(e))throw TypeError("Invalid date");var i=(t=String(Et[t]||t||Et.default)).slice(0,4);"UTC:"!==i&&"GMT:"!==i||(t=t.slice(4),n=!0,"GMT:"===i&&(r=!0));var o=function(){return n?"getUTC":"get"},s=function(){return e[o()+"Date"]()},a=function(){return e[o()+"Day"]()},l=function(){return e[o()+"Month"]()},c=function(){return e[o()+"FullYear"]()},d=function(){return e[o()+"Hours"]()},u=function(){return e[o()+"Minutes"]()},p=function(){return e[o()+"Seconds"]()},h=function(){return e[o()+"Milliseconds"]()},g=function(){return n?0:e.getTimezoneOffset()},m=function(){return It(e)},f={d:function(){return s()},dd:function(){return Rt(s())},ddd:function(){return Ct.dayNames[a()]},DDD:function(){return Tt({y:c(),m:l(),d:s(),_:o(),dayName:Ct.dayNames[a()],short:!0})},dddd:function(){return Ct.dayNames[a()+7]},DDDD:function(){return Tt({y:c(),m:l(),d:s(),_:o(),dayName:Ct.dayNames[a()+7]})},m:function(){return l()+1},mm:function(){return Rt(l()+1)},mmm:function(){return Ct.monthNames[l()]},mmmm:function(){return Ct.monthNames[l()+12]},yy:function(){return String(c()).slice(2)},yyyy:function(){return Rt(c(),4)},h:function(){return d()%12||12},hh:function(){return Rt(d()%12||12)},H:function(){return d()},HH:function(){return Rt(d())},M:function(){return u()},MM:function(){return Rt(u())},s:function(){return p()},ss:function(){return Rt(p())},l:function(){return Rt(h(),3)},L:function(){return Rt(Math.floor(h()/10))},t:function(){return d()<12?Ct.timeNames[0]:Ct.timeNames[1]},tt:function(){return d()<12?Ct.timeNames[2]:Ct.timeNames[3]},T:function(){return d()<12?Ct.timeNames[4]:Ct.timeNames[5]},TT:function(){return d()<12?Ct.timeNames[6]:Ct.timeNames[7]},Z:function(){return r?"GMT":n?"UTC":Ot(e)},o:function(){return(g()>0?"-":"+")+Rt(100*Math.floor(Math.abs(g())/60)+Math.abs(g())%60,4)},p:function(){return(g()>0?"-":"+")+Rt(Math.floor(Math.abs(g())/60),2)+":"+Rt(Math.floor(Math.abs(g())%60),2)},S:function(){return["th","st","nd","rd"][s()%10>3?0:(s()%100-s()%10!=10)*s()%10]},W:function(){return m()},WW:function(){return Rt(m())},N:function(){return At(e)}};return t.replace(wt,(function(e){return e in f?f[e]():e.slice(1,e.length-1)}))}var Nt,St,Et={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",paddedShortDate:"mm/dd/yyyy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:sso",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'",expiresHeaderFormat:"ddd, dd mmm yyyy HH:MM:ss Z"},Ct={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"],timeNames:["a","p","am","pm","A","P","AM","PM"]},Rt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return String(e).padStart(t,"0")},Tt=function(e){var t=e.y,n=e.m,r=e.d,i=e._,o=e.dayName,s=e.short,a=void 0!==s&&s,l=new Date,c=new Date;c.setDate(c[i+"Date"]()-1);var d=new Date;d.setDate(d[i+"Date"]()+1);return l[i+"FullYear"]()===t&&l[i+"Month"]()===n&&l[i+"Date"]()===r?a?"Tdy":"Today":c[i+"FullYear"]()===t&&c[i+"Month"]()===n&&c[i+"Date"]()===r?a?"Ysd":"Yesterday":d[i+"FullYear"]()===t&&d[i+"Month"]()===n&&d[i+"Date"]()===r?a?"Tmw":"Tomorrow":o},It=function(e){var t=new Date(e.getFullYear(),e.getMonth(),e.getDate());t.setDate(t.getDate()-(t.getDay()+6)%7+3);var n=new Date(t.getFullYear(),0,4);n.setDate(n.getDate()-(n.getDay()+6)%7+3);var r=t.getTimezoneOffset()-n.getTimezoneOffset();t.setHours(t.getHours()-r);var i=(t-n)/6048e5;return 1+Math.floor(i)},At=function(e){var t=e.getDay();return 0===t&&(t=7),t},Ot=function(e){return(String(e).match(_t)||[""]).pop().replace(vt,"").replace(/GMT\+0000/g,"UTC")};!function(e){e.MESSAGES="messages",e.IS_STREAMING="isStreaming",e.THREAD="thread",e.ACTIVE_TABS="activeTabs",e.IS_CHAT_BOT_OPEN="isChatBotOpen",e.EXPIRE_DATE="expireDate",e.LATEST_RATED_MESSAGE="latestRatedMessage",e.LOGGER_ENABLED="loggerEnabled"}(Nt||(Nt={})),function(e){e.MARKDOWN="markdown",e.JSON="json",e.JSON_TOKEN="json_token",e.ERROR="error"}(St||(St={}));const Mt=({key:e})=>localStorage.getItem(e),Dt=({key:e,value:t})=>{localStorage.setItem(e,t)},Lt=({key:e})=>{localStorage.removeItem(e)},zt={log:async(e,t)=>{const n=(new Date).toISOString(),r=Ie[e].toUpperCase();"true"===Mt({key:"loggerEnabled"})&&console.log(`[${n}] [${r}] ${t}`)},error(e){this.log(Ie.ERROR,e)},info(e){this.log(Ie.INFO,e)},warn(e){this.log(Ie.WARN,e)}},$t=e=>{const t=[];let n="";return e.forEach((e=>{const r=e.userMessage?.timestamp||e.aiMessage?.timestamp;if(!r)return;const i=(e=>{if(!e)return"";const t=new Date(e),n=new Date,r=new Date(n);return r.setDate(n.getDate()-1),t.toDateString()===n.toDateString()?"Today":t.toDateString()===r.toDateString()?"Yesterday":kt(t,"dd/mm/yyyy")})(r);i&&i!==n&&(t.push({dateMessage:{text:i,timestamp:r,type:"date"}}),n=i),t.push(e)})),t};function Pt(e,...t){for(const n of t)if(n&&"object"==typeof n)for(const t in n)n?.[t]&&"object"==typeof n?.[t]&&!Array.isArray(n?.[t])?e[t]=Pt(e?.[t]||{},n?.[t]||{}):(n?.[t]||"boolean"==typeof n?.[t])&&(e[t]=n?.[t]);return e}const Bt=e=>e&&Object.keys(e).length>0,Ht=e=>Array.isArray(e)&&e.length>0,Ut=e=>"string"==typeof e&&e?.trim().length>0,jt=()=>window.matchMedia("(max-width: 768px) or (max-height: 667px)").matches,Ft=e=>"number"==typeof e,Gt=(e,t)=>{t?(zt.info(`TELEMETRY EVENT LOG: Custom logger function, ${JSON.stringify(e)}`),t(e)):window?.PushToGTM_global?(zt.info(`TELEMETRY EVENT LOG: ${JSON.stringify(e)}`),window.PushToGTM_global(e)):zt.error(`TELEMETRY EVENT LOG: ${JSON.stringify({...Se?.TELEMETRIC_EVENT_ERROR,data:e})}`)};const Jt=e=>e.reverse().map((e=>{const t={text:e.humanMessage.content,type:Ve,timestamp:e.createdAt},n={messageId:e.runId,threadId:e.threadId,text:Ut(e.aiMessage.content)?e.aiMessage.content:ve.error_message_generic,type:We,timestamp:e.createdAt,feedback:e.feedback,shouldShowFeedback:e.metadata?.shouldShowFeedback,messageStructure:e.aiMessage.type===St.JSON?St.JSON_TOKEN:St.MARKDOWN};return{userMessage:e.humanMessage?.content?t:void 0,aiMessage:n}})),Wt=()=>{try{const e=JSON.parse(Mt({key:Nt.ACTIVE_TABS})||"{}");return Object.keys(e).length}catch{zt.warn(Se[Ee.ERROR_IN_PARSING]?.message)}return 0},qt=()=>{const e=Mt({key:Nt.THREAD});try{return JSON.parse(e||"{}")?.expireDate}catch{zt.warn(Se[Ee.ERROR_IN_PARSING]?.message)}},Vt=()=>{const e=Mt({key:Nt.THREAD});try{return JSON.parse(e||"{}")?.threadId}catch{zt.warn(Se[Ee.ERROR_IN_PARSING]?.message)}},Yt=(e,t=bt)=>{const n=Mt({key:Nt.MESSAGES})||"[]";try{const r=JSON.parse(n);let i=[...r];t===bt?(5===r.length&&r.shift(),i=[...r,e]):t===xt?(i.pop(),i=[...i,e]):t===yt&&(i=i?.filter((t=>t?.userMessage?.timestamp!==e?.userMessage?.timestamp))),Dt({key:Nt.MESSAGES,value:JSON.stringify(i)})}catch{zt.warn(Se[Ee.ERROR_IN_PARSING]?.message)}};async function Zt(e,t=ke.GET,n={}){const r=e=>new Promise((t=>setTimeout(t,e)));for(let o=0;o<=3;o++)try{const r=await fetch(`${e}`,{method:t,headers:{"Content-Type":"application/json"},...(i=n,!(i&&0===Object.keys(i).length)&&{body:JSON.stringify(n)})});return await r.json()||ve.error_message_no_response}catch{if(zt.error(JSON.stringify({info:`HTTP error!. Attempt ${o+1} failed.`,...Se[Ee.NETWORK_ERROR]})),!(o<3))return ve.error_message_generic;await r(1e4)}var i}const Kt=async e=>{const{chatId:t="",userMessage:n="",apiUrl:r,headers:i={},timeout:o=Je,onTimeout:s=()=>{},onStreamMessage:a,onStreamMessageError:l}=e,c=new AbortController,d=setTimeout((()=>{zt.warn(Ue),c.abort(),s()}),o);try{await he(r,{method:ke.POST,body:JSON.stringify({thread_id:t,message:n}),headers:{"Content-Type":"application/json",...i},signal:c.signal,onmessage(e){a(e)},onerror(e){if(clearTimeout(d),e)throw l(e),Se[Ee.FETCH_EVENT_SOURCE_ERROR]},onclose(){zt.info(je),clearTimeout(d)},openWhenHidden:!0})}catch(e){if(e?.code===Se[Ee.FETCH_EVENT_SOURCE_ERROR]?.code)return;l(Se[Ee.NETWORK_ERROR]?.message),clearTimeout(d)}};var Qt,Xt,en,tn,nn=0,rn=[],on=n,sn=on.__b,an=on.__r,ln=on.diffed,cn=on.__c,dn=on.unmount,un=on.__;function pn(e,t){on.__h&&on.__h(Xt,e,nn||t),nn=0;var n=Xt.__H||(Xt.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function hn(e){return nn=1,function(e,t,n){var r=pn(Qt++,2);if(r.t=e,!r.__c&&(r.__=[n?n(t):kn(void 0,t),function(e){var t=r.__N?r.__N[0]:r.__[0],n=r.t(t,e);t!==n&&(r.__N=[n,r.__[1]],r.__c.setState({}))}],r.__c=Xt,!Xt.u)){var i=function(e,t,n){if(!r.__c.__H)return!0;var i=r.__c.__H.__.filter((function(e){return!!e.__c}));if(i.every((function(e){return!e.__N})))return!o||o.call(this,e,t,n);var s=r.__c.props!==e;return i.forEach((function(e){if(e.__N){var t=e.__[0];e.__=e.__N,e.__N=void 0,t!==e.__[0]&&(s=!0)}})),o&&o.call(this,e,t,n)||s};Xt.u=!0;var o=Xt.shouldComponentUpdate,s=Xt.componentWillUpdate;Xt.componentWillUpdate=function(e,t,n){if(this.__e){var r=o;o=void 0,i(e,t,n),o=r}s&&s.call(this,e,t,n)},Xt.shouldComponentUpdate=i}return r.__N||r.__}(kn,e)}function gn(e,t){var n=pn(Qt++,3);!on.__s&&vn(n.__H,t)&&(n.__=e,n.i=t,Xt.__H.__h.push(n))}function mn(e){return nn=5,fn((function(){return{current:e}}),[])}function fn(e,t){var n=pn(Qt++,7);return vn(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function bn(){for(var e;e=rn.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(wn),e.__H.__h.forEach(_n),e.__H.__h=[]}catch(t){e.__H.__h=[],on.__e(t,e.__v)}}on.__b=function(e){Xt=null,sn&&sn(e)},on.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),un&&un(e,t)},on.__r=function(e){an&&an(e),Qt=0;var t=(Xt=e.__c).__H;t&&(en===Xt?(t.__h=[],Xt.__h=[],t.__.forEach((function(e){e.__N&&(e.__=e.__N),e.i=e.__N=void 0}))):(t.__h.forEach(wn),t.__h.forEach(_n),t.__h=[],Qt=0)),en=Xt},on.diffed=function(e){ln&&ln(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(1!==rn.push(t)&&tn===on.requestAnimationFrame||((tn=on.requestAnimationFrame)||yn)(bn)),t.__H.__.forEach((function(e){e.i&&(e.__H=e.i),e.i=void 0}))),en=Xt=null},on.__c=function(e,t){t.some((function(e){try{e.__h.forEach(wn),e.__h=e.__h.filter((function(e){return!e.__||_n(e)}))}catch(n){t.some((function(e){e.__h&&(e.__h=[])})),t=[],on.__e(n,e.__v)}})),cn&&cn(e,t)},on.unmount=function(e){dn&&dn(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach((function(e){try{wn(e)}catch(e){t=e}})),n.__H=void 0,t&&on.__e(t,n.__v))};var xn="function"==typeof requestAnimationFrame;function yn(e){var t,n=function(){clearTimeout(r),xn&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,100);xn&&(t=requestAnimationFrame(n))}function wn(e){var t=Xt,n=e.__c;"function"==typeof n&&(e.__c=void 0,n()),Xt=t}function _n(e){var t=Xt;e.__c=e.__(),Xt=t}function vn(e,t){return!e||e.length!==t.length||t.some((function(t,n){return t!==e[n]}))}function kn(e,t){return"function"==typeof t?t(e):t}function Nn(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}Nn(".chip-button {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  align-items: center;\n  width: 100%;\n  border-radius: 22px !important;\n  border: 1px solid;\n  height: 32px;\n  margin-bottom: 8px;\n  border-radius: 10px;\n  font-size: 14px;\n  line-height: 21px;\n  cursor: pointer;\n}\n");const Sn=e=>{const{theme:t=Ce,handleClick:n,item:r}=e,i={chipButton:{borderColor:t?.primaryColor,backgroundColor:t?.chatWindowColor,color:t?.textColor,transition:"background-color 0.3s ease"},chipHover:{borderColor:t?.primaryColor,backgroundColor:t?.primaryColor,color:ye,transition:"background-color 0.3s ease"}},[o,s]=hn(i.chipButton);return P("div",{className:"chip-button",style:o,onMouseEnter:()=>s(i.chipHover),onMouseLeave:()=>s(i.chipButton),role:"button",onClick:()=>n(r),children:r.label},r.id)};Nn(".chips-container {\n  display: flex;\n  flex-direction: row;\n  width: 100%;\n}\n\n.chips-content {\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n}\n");const En=e=>{const{settings:t,onClickActionChip:n,chipsItemsList:r=Te}=e,i=t?.theme||Ce,o=e=>{const r={...dt,label:e.label};Gt(r,t?.PushToGTM_global),n(e)};return P("div",{className:"chips-container",children:P("div",{className:"chips-content",children:r?.map((e=>P(Sn,{handleClick:o,theme:i,item:e})))})})};function Cn(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let Rn={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};function Tn(e){Rn=e}const In={exec:()=>null};function An(e,t=""){let n="string"==typeof e?e:e.source;const r={replace:(e,t)=>{let i="string"==typeof t?t:t.source;return i=i.replace(On.caret,"$1"),n=n.replace(e,i),r},getRegex:()=>new RegExp(n,t)};return r}const On={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:e=>new RegExp(`^( {0,3}${e})((?:[\t ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ \t][^\\n]*)?(?:\\n|$))`),hrRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}#`),htmlBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}<(?:[a-z].*>|!--)`,"i")},Mn=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,Dn=/(?:[*+-]|\d{1,9}[.)])/,Ln=An(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,Dn).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),zn=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,$n=/(?!\s*\])(?:\\.|[^\[\]\\])+/,Pn=An(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",$n).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),Bn=An(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Dn).getRegex(),Hn="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Un=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,jn=An("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$))","i").replace("comment",Un).replace("tag",Hn).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Fn=An(zn).replace("hr",Mn).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Hn).getRegex(),Gn={blockquote:An(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Fn).getRegex(),code:/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,def:Pn,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,hr:Mn,html:jn,lheading:Ln,list:Bn,newline:/^(?:[ \t]*(?:\n|$))+/,paragraph:Fn,table:In,text:/^[^\n]+/},Jn=An("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Mn).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}\t)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Hn).getRegex(),Wn={...Gn,table:Jn,paragraph:An(zn).replace("hr",Mn).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Jn).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Hn).getRegex()},qn={...Gn,html:An("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",Un).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:In,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:An(zn).replace("hr",Mn).replace("heading"," *#{1,6} *[^\n]").replace("lheading",Ln).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},Vn=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,Yn=/^( {2,}|\\)\n(?!\s*$)/,Zn=/\p{P}\p{S}/u,Kn=An(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,Zn).getRegex(),Qn=An(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,Zn).getRegex(),Xn=An("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,Zn).getRegex(),er=An("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,Zn).getRegex(),tr=An(/\\([punct])/,"gu").replace(/punct/g,Zn).getRegex(),nr=An(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),rr=An(Un).replace("(?:--\x3e|$)","--\x3e").getRegex(),ir=An("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",rr).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),or=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,sr=An(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",or).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),ar=An(/^!?\[(label)\]\[(ref)\]/).replace("label",or).replace("ref",$n).getRegex(),lr=An(/^!?\[(ref)\](?:\[\])?/).replace("ref",$n).getRegex(),cr={_backpedal:In,anyPunctuation:tr,autolink:nr,blockSkip:/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,br:Yn,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,del:In,emStrongLDelim:Qn,emStrongRDelimAst:Xn,emStrongRDelimUnd:er,escape:Vn,link:sr,nolink:lr,punctuation:Kn,reflink:ar,reflinkSearch:An("reflink|nolink(?!\\()","g").replace("reflink",ar).replace("nolink",lr).getRegex(),tag:ir,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,url:In},dr={...cr,link:An(/^!?\[(label)\]\((.*?)\)/).replace("label",or).getRegex(),reflink:An(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",or).getRegex()},ur={...cr,escape:An(Vn).replace("])","~|])").getRegex(),url:An(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},pr={...ur,br:An(Yn).replace("{2,}","*").getRegex(),text:An(ur.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},hr={normal:Gn,gfm:Wn,pedantic:qn},gr={normal:cr,gfm:ur,breaks:pr,pedantic:dr},mr={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},fr=e=>mr[e];function br(e,t){if(t){if(On.escapeTest.test(e))return e.replace(On.escapeReplace,fr)}else if(On.escapeTestNoEncode.test(e))return e.replace(On.escapeReplaceNoEncode,fr);return e}function xr(e){try{e=encodeURI(e).replace(On.percentDecode,"%")}catch{return null}return e}function yr(e,t){const n=e.replace(On.findPipe,((e,t,n)=>{let r=!1,i=t;for(;--i>=0&&"\\"===n[i];)r=!r;return r?"|":" |"})).split(On.splitPipe);let r=0;if(n[0].trim()||n.shift(),n.length>0&&!n.at(-1)?.trim()&&n.pop(),t)if(n.length>t)n.splice(t);else for(;n.length<t;)n.push("");for(;r<n.length;r++)n[r]=n[r].trim().replace(On.slashPipe,"|");return n}function wr(e,t,n){const r=e.length;if(0===r)return"";let i=0;for(;i<r;){const o=e.charAt(r-i-1);if(o!==t||n){if(o===t||!n)break;i++}else i++}return e.slice(0,r-i)}function _r(e,t,n,r,i){const o=t.href,s=t.title||null,a=e[1].replace(i.other.outputLinkReplace,"$1");if("!"!==e[0].charAt(0)){r.state.inLink=!0;const e={type:"link",raw:n,href:o,title:s,text:a,tokens:r.inlineTokens(a)};return r.state.inLink=!1,e}return{type:"image",raw:n,href:o,title:s,text:a}}class vr{options;rules;lexer;constructor(e){this.options=e||Rn}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const e=t[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?e:wr(e,"\n")}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const e=t[0],n=function(e,t,n){const r=e.match(n.other.indentCodeCompensation);if(null===r)return t;const i=r[1];return t.split("\n").map((e=>{const t=e.match(n.other.beginningSpace);if(null===t)return e;const[r]=t;return r.length>=i.length?e.slice(i.length):e})).join("\n")}(e,t[3]||"",this.rules);return{type:"code",raw:e,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:n}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let e=t[2].trim();if(this.rules.other.endingHash.test(e)){const t=wr(e,"#");this.options.pedantic?e=t.trim():t&&!this.rules.other.endingSpaceChar.test(t)||(e=t.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:e,tokens:this.lexer.inline(e)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:wr(t[0],"\n")}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){let e=wr(t[0],"\n").split("\n"),n="",r="";const i=[];for(;e.length>0;){let t=!1;const o=[];let s;for(s=0;s<e.length;s++)if(this.rules.other.blockquoteStart.test(e[s]))o.push(e[s]),t=!0;else{if(t)break;o.push(e[s])}e=e.slice(s);const a=o.join("\n"),l=a.replace(this.rules.other.blockquoteSetextReplace,"\n    $1").replace(this.rules.other.blockquoteSetextReplace2,"");n=n?`${n}\n${a}`:a,r=r?`${r}\n${l}`:l;const c=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(l,i,!0),this.lexer.state.top=c,0===e.length)break;const d=i.at(-1);if("code"===d?.type)break;if("blockquote"===d?.type){const t=d,o=t.raw+"\n"+e.join("\n"),s=this.blockquote(o);i[i.length-1]=s,n=n.substring(0,n.length-t.raw.length)+s.raw,r=r.substring(0,r.length-t.text.length)+s.text;break}if("list"!==d?.type);else{const t=d,o=t.raw+"\n"+e.join("\n"),s=this.list(o);i[i.length-1]=s,n=n.substring(0,n.length-d.raw.length)+s.raw,r=r.substring(0,r.length-t.raw.length)+s.raw,e=o.substring(i.at(-1).raw.length).split("\n")}}return{type:"blockquote",raw:n,tokens:i,text:r}}}list(e){let t=this.rules.block.list.exec(e);if(t){let n=t[1].trim();const r=n.length>1,i={type:"list",raw:"",ordered:r,start:r?+n.slice(0,-1):"",loose:!1,items:[]};n=r?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=r?n:"[*+-]");const o=this.rules.other.listItemRegex(n);let s=!1;for(;e;){let n=!1,r="",a="";if(!(t=o.exec(e)))break;if(this.rules.block.hr.test(e))break;r=t[0],e=e.substring(r.length);let l=t[2].split("\n",1)[0].replace(this.rules.other.listReplaceTabs,(e=>" ".repeat(3*e.length))),c=e.split("\n",1)[0],d=!l.trim(),u=0;if(this.options.pedantic?(u=2,a=l.trimStart()):d?u=t[1].length+1:(u=t[2].search(this.rules.other.nonSpaceChar),u=u>4?1:u,a=l.slice(u),u+=t[1].length),d&&this.rules.other.blankLine.test(c)&&(r+=c+"\n",e=e.substring(c.length+1),n=!0),!n){const t=this.rules.other.nextBulletRegex(u),n=this.rules.other.hrRegex(u),i=this.rules.other.fencesBeginRegex(u),o=this.rules.other.headingBeginRegex(u),s=this.rules.other.htmlBeginRegex(u);for(;e;){const p=e.split("\n",1)[0];let h;if(c=p,this.options.pedantic?(c=c.replace(this.rules.other.listReplaceNesting,"  "),h=c):h=c.replace(this.rules.other.tabCharGlobal,"    "),i.test(c))break;if(o.test(c))break;if(s.test(c))break;if(t.test(c))break;if(n.test(c))break;if(h.search(this.rules.other.nonSpaceChar)>=u||!c.trim())a+="\n"+h.slice(u);else{if(d)break;if(l.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4)break;if(i.test(l))break;if(o.test(l))break;if(n.test(l))break;a+="\n"+c}d||c.trim()||(d=!0),r+=p+"\n",e=e.substring(p.length+1),l=h.slice(u)}}i.loose||(s?i.loose=!0:this.rules.other.doubleBlankLine.test(r)&&(s=!0));let p,h=null;this.options.gfm&&(h=this.rules.other.listIsTask.exec(a),h&&(p="[ ] "!==h[0],a=a.replace(this.rules.other.listReplaceTask,""))),i.items.push({type:"list_item",raw:r,task:!!h,checked:p,loose:!1,text:a,tokens:[]}),i.raw+=r}const a=i.items.at(-1);a&&(a.raw=a.raw.trimEnd(),a.text=a.text.trimEnd()),i.raw=i.raw.trimEnd();for(let e=0;e<i.items.length;e++)if(this.lexer.state.top=!1,i.items[e].tokens=this.lexer.blockTokens(i.items[e].text,[]),!i.loose){const t=i.items[e].tokens.filter((e=>"space"===e.type)),n=t.length>0&&t.some((e=>this.rules.other.anyLine.test(e.raw)));i.loose=n}if(i.loose)for(let e=0;e<i.items.length;e++)i.items[e].loose=!0;return i}}html(e){const t=this.rules.block.html.exec(e);if(t){return{type:"html",block:!0,raw:t[0],pre:"pre"===t[1]||"script"===t[1]||"style"===t[1],text:t[0]}}}def(e){const t=this.rules.block.def.exec(e);if(t){const e=t[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),n=t[2]?t[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",r=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:e,raw:t[0],href:n,title:r}}}table(e){const t=this.rules.block.table.exec(e);if(!t)return;if(!this.rules.other.tableDelimiter.test(t[2]))return;const n=yr(t[1]),r=t[2].replace(this.rules.other.tableAlignChars,"").split("|"),i=t[3]?.trim()?t[3].replace(this.rules.other.tableRowBlankLine,"").split("\n"):[],o={type:"table",raw:t[0],header:[],align:[],rows:[]};if(n.length===r.length){for(const e of r)this.rules.other.tableAlignRight.test(e)?o.align.push("right"):this.rules.other.tableAlignCenter.test(e)?o.align.push("center"):this.rules.other.tableAlignLeft.test(e)?o.align.push("left"):o.align.push(null);for(let e=0;e<n.length;e++)o.header.push({text:n[e],tokens:this.lexer.inline(n[e]),header:!0,align:o.align[e]});for(const e of i)o.rows.push(yr(e,o.header.length).map(((e,t)=>({text:e,tokens:this.lexer.inline(e),header:!1,align:o.align[t]}))));return o}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:"="===t[2].charAt(0)?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const e="\n"===t[1].charAt(t[1].length-1)?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:e,tokens:this.lexer.inline(e)}}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:t[1]}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&this.rules.other.startATag.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const e=t[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(e)){if(!this.rules.other.endAngleBracket.test(e))return;const t=wr(e.slice(0,-1),"\\");if((e.length-t.length)%2==0)return}else{const e=function(e,t){if(-1===e.indexOf(t[1]))return-1;let n=0;for(let r=0;r<e.length;r++)if("\\"===e[r])r++;else if(e[r]===t[0])n++;else if(e[r]===t[1]&&(n--,n<0))return r;return-1}(t[2],"()");if(e>-1){const n=(0===t[0].indexOf("!")?5:4)+t[1].length+e;t[2]=t[2].substring(0,e),t[0]=t[0].substring(0,n).trim(),t[3]=""}}let n=t[2],r="";if(this.options.pedantic){const e=this.rules.other.pedanticHrefTitle.exec(n);e&&(n=e[1],r=e[3])}else r=t[3]?t[3].slice(1,-1):"";return n=n.trim(),this.rules.other.startAngleBracket.test(n)&&(n=this.options.pedantic&&!this.rules.other.endAngleBracket.test(e)?n.slice(1):n.slice(1,-1)),_r(t,{href:n?n.replace(this.rules.inline.anyPunctuation,"$1"):n,title:r?r.replace(this.rules.inline.anyPunctuation,"$1"):r},t[0],this.lexer,this.rules)}}reflink(e,t){let n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){const e=t[(n[2]||n[1]).replace(this.rules.other.multipleSpaceGlobal," ").toLowerCase()];if(!e){const e=n[0].charAt(0);return{type:"text",raw:e,text:e}}return _r(n,e,n[0],this.lexer,this.rules)}}emStrong(e,t,n=""){let r=this.rules.inline.emStrongLDelim.exec(e);if(!r)return;if(r[3]&&n.match(this.rules.other.unicodeAlphaNumeric))return;if(!(r[1]||r[2]||"")||!n||this.rules.inline.punctuation.exec(n)){const n=[...r[0]].length-1;let i,o,s=n,a=0;const l="*"===r[0][0]?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(l.lastIndex=0,t=t.slice(-1*e.length+n);null!=(r=l.exec(t));){if(i=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!i)continue;if(o=[...i].length,r[3]||r[4]){s+=o;continue}if((r[5]||r[6])&&n%3&&!((n+o)%3)){a+=o;continue}if(s-=o,s>0)continue;o=Math.min(o,o+s+a);const t=[...r[0]][0].length,l=e.slice(0,n+r.index+t+o);if(Math.min(n,o)%2){const e=l.slice(1,-1);return{type:"em",raw:l,text:e,tokens:this.lexer.inlineTokens(e)}}const c=l.slice(2,-2);return{type:"strong",raw:l,text:c,tokens:this.lexer.inlineTokens(c)}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let e=t[2].replace(this.rules.other.newLineCharGlobal," ");const n=this.rules.other.nonSpaceChar.test(e),r=this.rules.other.startingSpaceChar.test(e)&&this.rules.other.endingSpaceChar.test(e);return n&&r&&(e=e.substring(1,e.length-1)),{type:"codespan",raw:t[0],text:e}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){const t=this.rules.inline.autolink.exec(e);if(t){let e,n;return"@"===t[2]?(e=t[1],n="mailto:"+e):(e=t[1],n=e),{type:"link",raw:t[0],text:e,href:n,tokens:[{type:"text",raw:e,text:e}]}}}url(e){let t;if(t=this.rules.inline.url.exec(e)){let e,n;if("@"===t[2])e=t[0],n="mailto:"+e;else{let r;do{r=t[0],t[0]=this.rules.inline._backpedal.exec(t[0])?.[0]??""}while(r!==t[0]);e=t[0],n="www."===t[1]?"http://"+t[0]:t[0]}return{type:"link",raw:t[0],text:e,href:n,tokens:[{type:"text",raw:e,text:e}]}}}inlineText(e){const t=this.rules.inline.text.exec(e);if(t){const e=this.lexer.state.inRawBlock;return{type:"text",raw:t[0],text:t[0],escaped:e}}}}class kr{tokens;options;state;tokenizer;inlineQueue;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Rn,this.options.tokenizer=this.options.tokenizer||new vr,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={other:On,block:hr.normal,inline:gr.normal};this.options.pedantic?(t.block=hr.pedantic,t.inline=gr.pedantic):this.options.gfm&&(t.block=hr.gfm,this.options.breaks?t.inline=gr.breaks:t.inline=gr.gfm),this.tokenizer.rules=t}static get rules(){return{block:hr,inline:gr}}static lex(e,t){return new kr(t).lex(e)}static lexInline(e,t){return new kr(t).inlineTokens(e)}lex(e){e=e.replace(On.carriageReturn,"\n"),this.blockTokens(e,this.tokens);for(let e=0;e<this.inlineQueue.length;e++){const t=this.inlineQueue[e];this.inlineTokens(t.src,t.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[],n=!1){for(this.options.pedantic&&(e=e.replace(On.tabCharGlobal,"    ").replace(On.spaceLine,""));e;){let r;if(this.options.extensions?.block?.some((n=>!!(r=n.call({lexer:this},e,t))&&(e=e.substring(r.raw.length),t.push(r),!0))))continue;if(r=this.tokenizer.space(e)){e=e.substring(r.raw.length);const n=t.at(-1);1===r.raw.length&&void 0!==n?n.raw+="\n":t.push(r);continue}if(r=this.tokenizer.code(e)){e=e.substring(r.raw.length);const n=t.at(-1);"paragraph"===n?.type||"text"===n?.type?(n.raw+="\n"+r.raw,n.text+="\n"+r.text,this.inlineQueue.at(-1).src=n.text):t.push(r);continue}if(r=this.tokenizer.fences(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.heading(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.hr(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.blockquote(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.list(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.html(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.def(e)){e=e.substring(r.raw.length);const n=t.at(-1);"paragraph"===n?.type||"text"===n?.type?(n.raw+="\n"+r.raw,n.text+="\n"+r.raw,this.inlineQueue.at(-1).src=n.text):this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title});continue}if(r=this.tokenizer.table(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.lheading(e)){e=e.substring(r.raw.length),t.push(r);continue}let i=e;if(this.options.extensions?.startBlock){let t=1/0;const n=e.slice(1);let r;this.options.extensions.startBlock.forEach((e=>{r=e.call({lexer:this},n),"number"==typeof r&&r>=0&&(t=Math.min(t,r))})),t<1/0&&t>=0&&(i=e.substring(0,t+1))}if(this.state.top&&(r=this.tokenizer.paragraph(i))){const o=t.at(-1);n&&"paragraph"===o?.type?(o.raw+="\n"+r.raw,o.text+="\n"+r.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=o.text):t.push(r),n=i.length!==e.length,e=e.substring(r.raw.length)}else if(r=this.tokenizer.text(e)){e=e.substring(r.raw.length);const n=t.at(-1);"text"===n?.type?(n.raw+="\n"+r.raw,n.text+="\n"+r.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=n.text):t.push(r)}else if(e){const t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}throw new Error(t)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let n=e,r=null;if(this.tokens.links){const e=Object.keys(this.tokens.links);if(e.length>0)for(;null!=(r=this.tokenizer.rules.inline.reflinkSearch.exec(n));)e.includes(r[0].slice(r[0].lastIndexOf("[")+1,-1))&&(n=n.slice(0,r.index)+"["+"a".repeat(r[0].length-2)+"]"+n.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(r=this.tokenizer.rules.inline.blockSkip.exec(n));)n=n.slice(0,r.index)+"["+"a".repeat(r[0].length-2)+"]"+n.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(r=this.tokenizer.rules.inline.anyPunctuation.exec(n));)n=n.slice(0,r.index)+"++"+n.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);let i=!1,o="";for(;e;){let r;if(i||(o=""),i=!1,this.options.extensions?.inline?.some((n=>!!(r=n.call({lexer:this},e,t))&&(e=e.substring(r.raw.length),t.push(r),!0))))continue;if(r=this.tokenizer.escape(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.tag(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.link(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(r.raw.length);const n=t.at(-1);"text"===r.type&&"text"===n?.type?(n.raw+=r.raw,n.text+=r.text):t.push(r);continue}if(r=this.tokenizer.emStrong(e,n,o)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.codespan(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.br(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.del(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.autolink(e)){e=e.substring(r.raw.length),t.push(r);continue}if(!this.state.inLink&&(r=this.tokenizer.url(e))){e=e.substring(r.raw.length),t.push(r);continue}let s=e;if(this.options.extensions?.startInline){let t=1/0;const n=e.slice(1);let r;this.options.extensions.startInline.forEach((e=>{r=e.call({lexer:this},n),"number"==typeof r&&r>=0&&(t=Math.min(t,r))})),t<1/0&&t>=0&&(s=e.substring(0,t+1))}if(r=this.tokenizer.inlineText(s)){e=e.substring(r.raw.length),"_"!==r.raw.slice(-1)&&(o=r.raw.slice(-1)),i=!0;const n=t.at(-1);"text"===n?.type?(n.raw+=r.raw,n.text+=r.text):t.push(r)}else if(e){const t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}throw new Error(t)}}return t}}class Nr{options;parser;constructor(e){this.options=e||Rn}space(e){return""}code({text:e,lang:t,escaped:n}){const r=(t||"").match(On.notSpaceStart)?.[0],i=e.replace(On.endingNewline,"")+"\n";return r?'<pre><code class="language-'+br(r)+'">'+(n?i:br(i,!0))+"</code></pre>\n":"<pre><code>"+(n?i:br(i,!0))+"</code></pre>\n"}blockquote({tokens:e}){return`<blockquote>\n${this.parser.parse(e)}</blockquote>\n`}html({text:e}){return e}heading({tokens:e,depth:t}){return`<h${t}>${this.parser.parseInline(e)}</h${t}>\n`}hr(e){return"<hr>\n"}list(e){const t=e.ordered,n=e.start;let r="";for(let t=0;t<e.items.length;t++){const n=e.items[t];r+=this.listitem(n)}const i=t?"ol":"ul";return"<"+i+(t&&1!==n?' start="'+n+'"':"")+">\n"+r+"</"+i+">\n"}listitem(e){let t="";if(e.task){const n=this.checkbox({checked:!!e.checked});e.loose?"paragraph"===e.tokens[0]?.type?(e.tokens[0].text=n+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&"text"===e.tokens[0].tokens[0].type&&(e.tokens[0].tokens[0].text=n+" "+br(e.tokens[0].tokens[0].text),e.tokens[0].tokens[0].escaped=!0)):e.tokens.unshift({type:"text",raw:n+" ",text:n+" ",escaped:!0}):t+=n+" "}return t+=this.parser.parse(e.tokens,!!e.loose),`<li>${t}</li>\n`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>\n`}table(e){let t="",n="";for(let t=0;t<e.header.length;t++)n+=this.tablecell(e.header[t]);t+=this.tablerow({text:n});let r="";for(let t=0;t<e.rows.length;t++){const i=e.rows[t];n="";for(let e=0;e<i.length;e++)n+=this.tablecell(i[e]);r+=this.tablerow({text:n})}return r&&(r=`<tbody>${r}</tbody>`),"<table>\n<thead>\n"+t+"</thead>\n"+r+"</table>\n"}tablerow({text:e}){return`<tr>\n${e}</tr>\n`}tablecell(e){const t=this.parser.parseInline(e.tokens),n=e.header?"th":"td";return(e.align?`<${n} align="${e.align}">`:`<${n}>`)+t+`</${n}>\n`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${br(e,!0)}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:t,tokens:n}){const r=this.parser.parseInline(n),i=xr(e);if(null===i)return r;let o='<a href="'+(e=i)+'"';return t&&(o+=' title="'+br(t)+'"'),o+=">"+r+"</a>",o}image({href:e,title:t,text:n}){const r=xr(e);if(null===r)return br(n);let i=`<img src="${e=r}" alt="${n}"`;return t&&(i+=` title="${br(t)}"`),i+=">",i}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):"escaped"in e&&e.escaped?e.text:br(e.text)}}class Sr{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}}class Er{options;renderer;textRenderer;constructor(e){this.options=e||Rn,this.options.renderer=this.options.renderer||new Nr,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Sr}static parse(e,t){return new Er(t).parse(e)}static parseInline(e,t){return new Er(t).parseInline(e)}parse(e,t=!0){let n="";for(let r=0;r<e.length;r++){const i=e[r];if(this.options.extensions?.renderers?.[i.type]){const e=i,t=this.options.extensions.renderers[e.type].call({parser:this},e);if(!1!==t||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(e.type)){n+=t||"";continue}}const o=i;switch(o.type){case"space":n+=this.renderer.space(o);continue;case"hr":n+=this.renderer.hr(o);continue;case"heading":n+=this.renderer.heading(o);continue;case"code":n+=this.renderer.code(o);continue;case"table":n+=this.renderer.table(o);continue;case"blockquote":n+=this.renderer.blockquote(o);continue;case"list":n+=this.renderer.list(o);continue;case"html":n+=this.renderer.html(o);continue;case"paragraph":n+=this.renderer.paragraph(o);continue;case"text":{let i=o,s=this.renderer.text(i);for(;r+1<e.length&&"text"===e[r+1].type;)i=e[++r],s+="\n"+this.renderer.text(i);n+=t?this.renderer.paragraph({type:"paragraph",raw:s,text:s,tokens:[{type:"text",raw:s,text:s,escaped:!0}]}):s;continue}default:{const e='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(e),"";throw new Error(e)}}}return n}parseInline(e,t=this.renderer){let n="";for(let r=0;r<e.length;r++){const i=e[r];if(this.options.extensions?.renderers?.[i.type]){const e=this.options.extensions.renderers[i.type].call({parser:this},i);if(!1!==e||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(i.type)){n+=e||"";continue}}const o=i;switch(o.type){case"escape":case"text":n+=t.text(o);break;case"html":n+=t.html(o);break;case"link":n+=t.link(o);break;case"image":n+=t.image(o);break;case"strong":n+=t.strong(o);break;case"em":n+=t.em(o);break;case"codespan":n+=t.codespan(o);break;case"br":n+=t.br(o);break;case"del":n+=t.del(o);break;default:{const e='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(e),"";throw new Error(e)}}}return n}}class Cr{options;block;constructor(e){this.options=e||Rn}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}provideLexer(){return this.block?kr.lex:kr.lexInline}provideParser(){return this.block?Er.parse:Er.parseInline}}const Rr=new class{defaults={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=Er;Renderer=Nr;TextRenderer=Sr;Lexer=kr;Tokenizer=vr;Hooks=Cr;constructor(...e){this.use(...e)}walkTokens(e,t){let n=[];for(const r of e)switch(n=n.concat(t.call(this,r)),r.type){case"table":{const e=r;for(const r of e.header)n=n.concat(this.walkTokens(r.tokens,t));for(const r of e.rows)for(const e of r)n=n.concat(this.walkTokens(e.tokens,t));break}case"list":{const e=r;n=n.concat(this.walkTokens(e.items,t));break}default:{const e=r;this.defaults.extensions?.childTokens?.[e.type]?this.defaults.extensions.childTokens[e.type].forEach((r=>{const i=e[r].flat(1/0);n=n.concat(this.walkTokens(i,t))})):e.tokens&&(n=n.concat(this.walkTokens(e.tokens,t)))}}return n}use(...e){const t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach((e=>{const n={...e};if(n.async=this.defaults.async||n.async||!1,e.extensions&&(e.extensions.forEach((e=>{if(!e.name)throw new Error("extension name required");if("renderer"in e){const n=t.renderers[e.name];t.renderers[e.name]=n?function(...t){let r=e.renderer.apply(this,t);return!1===r&&(r=n.apply(this,t)),r}:e.renderer}if("tokenizer"in e){if(!e.level||"block"!==e.level&&"inline"!==e.level)throw new Error("extension level must be 'block' or 'inline'");const n=t[e.level];n?n.unshift(e.tokenizer):t[e.level]=[e.tokenizer],e.start&&("block"===e.level?t.startBlock?t.startBlock.push(e.start):t.startBlock=[e.start]:"inline"===e.level&&(t.startInline?t.startInline.push(e.start):t.startInline=[e.start]))}"childTokens"in e&&e.childTokens&&(t.childTokens[e.name]=e.childTokens)})),n.extensions=t),e.renderer){const t=this.defaults.renderer||new Nr(this.defaults);for(const n in e.renderer){if(!(n in t))throw new Error(`renderer '${n}' does not exist`);if(["options","parser"].includes(n))continue;const r=n,i=e.renderer[r],o=t[r];t[r]=(...e)=>{let n=i.apply(t,e);return!1===n&&(n=o.apply(t,e)),n||""}}n.renderer=t}if(e.tokenizer){const t=this.defaults.tokenizer||new vr(this.defaults);for(const n in e.tokenizer){if(!(n in t))throw new Error(`tokenizer '${n}' does not exist`);if(["options","rules","lexer"].includes(n))continue;const r=n,i=e.tokenizer[r],o=t[r];t[r]=(...e)=>{let n=i.apply(t,e);return!1===n&&(n=o.apply(t,e)),n}}n.tokenizer=t}if(e.hooks){const t=this.defaults.hooks||new Cr;for(const n in e.hooks){if(!(n in t))throw new Error(`hook '${n}' does not exist`);if(["options","block"].includes(n))continue;const r=n,i=e.hooks[r],o=t[r];Cr.passThroughHooks.has(n)?t[r]=e=>{if(this.defaults.async)return Promise.resolve(i.call(t,e)).then((e=>o.call(t,e)));const n=i.call(t,e);return o.call(t,n)}:t[r]=(...e)=>{let n=i.apply(t,e);return!1===n&&(n=o.apply(t,e)),n}}n.hooks=t}if(e.walkTokens){const t=this.defaults.walkTokens,r=e.walkTokens;n.walkTokens=function(e){let n=[];return n.push(r.call(this,e)),t&&(n=n.concat(t.call(this,e))),n}}this.defaults={...this.defaults,...n}})),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return kr.lex(e,t??this.defaults)}parser(e,t){return Er.parse(e,t??this.defaults)}parseMarkdown(e){return(t,n)=>{const r={...n},i={...this.defaults,...r},o=this.onError(!!i.silent,!!i.async);if(!0===this.defaults.async&&!1===r.async)return o(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(null==t)return o(new Error("marked(): input parameter is undefined or null"));if("string"!=typeof t)return o(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected"));i.hooks&&(i.hooks.options=i,i.hooks.block=e);const s=i.hooks?i.hooks.provideLexer():e?kr.lex:kr.lexInline,a=i.hooks?i.hooks.provideParser():e?Er.parse:Er.parseInline;if(i.async)return Promise.resolve(i.hooks?i.hooks.preprocess(t):t).then((e=>s(e,i))).then((e=>i.hooks?i.hooks.processAllTokens(e):e)).then((e=>i.walkTokens?Promise.all(this.walkTokens(e,i.walkTokens)).then((()=>e)):e)).then((e=>a(e,i))).then((e=>i.hooks?i.hooks.postprocess(e):e)).catch(o);try{i.hooks&&(t=i.hooks.preprocess(t));let e=s(t,i);i.hooks&&(e=i.hooks.processAllTokens(e)),i.walkTokens&&this.walkTokens(e,i.walkTokens);let n=a(e,i);return i.hooks&&(n=i.hooks.postprocess(n)),n}catch(e){return o(e)}}}onError(e,t){return n=>{if(n.message+="\nPlease report this to https://github.com/markedjs/marked.",e){const e="<p>An error occurred:</p><pre>"+br(n.message+"",!0)+"</pre>";return t?Promise.resolve(e):e}if(t)return Promise.reject(n);throw n}}};function Tr(e,t){return Rr.parse(e,t)}Tr.options=Tr.setOptions=function(e){return Rr.setOptions(e),Tr.defaults=Rr.defaults,Tn(Tr.defaults),Tr},Tr.getDefaults=Cn,Tr.defaults=Rn,Tr.use=function(...e){return Rr.use(...e),Tr.defaults=Rr.defaults,Tn(Tr.defaults),Tr},Tr.walkTokens=function(e,t){return Rr.walkTokens(e,t)},Tr.parseInline=Rr.parseInline,Tr.Parser=Er,Tr.parser=Er.parse,Tr.Renderer=Nr,Tr.TextRenderer=Sr,Tr.Lexer=kr,Tr.lexer=kr.lex,Tr.Tokenizer=vr,Tr.Hooks=Cr,Tr.parse=Tr,Tr.options,Tr.setOptions,Tr.use,Tr.walkTokens,Tr.parseInline,Er.parse,kr.lex;Nn(".button-chip-container {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.disabled-button {\n  pointer-events: none;\n  opacity: 0.5;\n}\n");const Ir=e=>{const{customStyle:t={},hoveredStyle:n={},text:r,disabled:i,handleClick:o,className:s}=e,[a,l]=hn(t);return P("div",{className:`button-chip-container ${i&&"disabled-button"} ${s&&s}`,style:a,onMouseEnter:()=>l(n),onMouseLeave:()=>l(t),onClick:o,"data-testid":`${r}-button`,children:r})};Nn(".book-now-card-container {\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  width: 80%;\n  height: 100%;\n  border: 1px solid #d2d2d2;\n  border-radius: 12px;\n  box-shadow: 0px 1px 2px 0px #1018280f;\n  padding: 10px;\n  line-height: 18px;\n  max-width: 400px;\n}\n\n.book-now-button {\n  display: flex;\n  width: 100%;\n  height: 32px;\n  justify-content: center;\n  align-items: center;\n  text-align: center;\n  border: none;\n  border-radius: 16px;\n  font-size: 13px;\n  font-weight: 600;\n  cursor: pointer;\n}\n\n.book-now-description {\n  font-size: 12px;\n  margin-bottom: 6px;\n}\n\n.book-now-description p {\n  font-size: 12px !important;\n  line-height: 16px !important;\n}\n\n.margin-top-5 {\n  margin-top: 5px;\n}\n\n.book-now-description .bold {\n  font-weight: 600;\n}\n");const Ar=e=>{const{bookNowData:t,settings:n,isDisabled:r}=e,{label:i=ve.proceedToBookStay,link:o,buttonLabel:s=ve.bookNow,resortName:a}=t||{},l=n?.theme||Ce,c=n?.chatLinkConfig?.openInNewTab,d={container:{backgroundColor:l.cardColor},filled:{backgroundColor:l.primaryColor,color:ye,borderRadius:"2000px",padding:"4px 16px",transition:"background-color 0.3s ease"},unfilled:{border:"solid 1px",backgroundColor:ye,color:l.primaryColor,borderRadius:"2000px",padding:"4px 16px",transition:"background-color 0.3s ease"}};return P("div",{className:"book-now-card-container",style:d.container,"data-testId":"book-now-card",children:[Ut(i)?P("div",{className:"book-now-description",dangerouslySetInnerHTML:{__html:Tr(i)}}):P("div",{className:"book-now-description",children:[P("span",{className:"bold",children:ve.great}),` ${ve.proceedToBookStay}`]}),Ut(s)&&P(Ir,{handleClick:()=>{const e={...ht,label:a};Gt(e,n?.PushToGTM_global),window.open(o,c?ft:mt)},text:s,className:"book-now-button",disabled:r,customStyle:d.filled,hoveredStyle:d.unfilled})]})};var Or,Mr,Dr={},Lr={};function zr(){return Or||(Or=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Allow=e.ALL=e.COLLECTION=e.ATOM=e.SPECIAL=e.INF=e._INFINITY=e.INFINITY=e.NAN=e.BOOL=e.NULL=e.OBJ=e.ARR=e.NUM=e.STR=void 0,e.STR=1,e.NUM=2,e.ARR=4,e.OBJ=8,e.NULL=16,e.BOOL=32,e.NAN=64,e.INFINITY=128,e._INFINITY=256,e.INF=e.INFINITY|e._INFINITY,e.SPECIAL=e.NULL|e.BOOL|e.INF|e.NAN,e.ATOM=e.STR|e.NUM|e.SPECIAL,e.COLLECTION=e.ARR|e.OBJ,e.ALL=e.ATOM|e.COLLECTION,e.Allow={STR:e.STR,NUM:e.NUM,ARR:e.ARR,OBJ:e.OBJ,NULL:e.NULL,BOOL:e.BOOL,NAN:e.NAN,INFINITY:e.INFINITY,_INFINITY:e._INFINITY,INF:e.INF,SPECIAL:e.SPECIAL,ATOM:e.ATOM,COLLECTION:e.COLLECTION,ALL:e.ALL},e.default=e.Allow}(Lr)),Lr}var $r=(Mr||(Mr=1,function(e){var t=Dr&&Dr.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=Dr&&Dr.__exportStar||function(e,n){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(n,r)||t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),e.Allow=e.MalformedJSON=e.PartialJSON=e.parseJSON=e.parse=void 0;const r=zr();Object.defineProperty(e,"Allow",{enumerable:!0,get:function(){return r.Allow}}),n(zr(),e);class i extends Error{}e.PartialJSON=i;class o extends Error{}function s(e,t=r.Allow.ALL){if("string"!=typeof e)throw new TypeError("expecting str, got "+typeof e);if(!e.trim())throw new Error(`${e} is empty`);return a(e.trim(),t)}e.MalformedJSON=o,e.parseJSON=s;const a=(e,t)=>{const n=e.length;let s=0;const a=e=>{throw new i(`${e} at position ${s}`)},l=e=>{throw new o(`${e} at position ${s}`)},c=()=>(g(),s>=n&&a("Unexpected end of input"),'"'===e[s]?d():"{"===e[s]?u():"["===e[s]?p():"null"===e.substring(s,s+4)||r.Allow.NULL&t&&n-s<4&&"null".startsWith(e.substring(s))?(s+=4,null):"true"===e.substring(s,s+4)||r.Allow.BOOL&t&&n-s<4&&"true".startsWith(e.substring(s))?(s+=4,!0):"false"===e.substring(s,s+5)||r.Allow.BOOL&t&&n-s<5&&"false".startsWith(e.substring(s))?(s+=5,!1):"Infinity"===e.substring(s,s+8)||r.Allow.INFINITY&t&&n-s<8&&"Infinity".startsWith(e.substring(s))?(s+=8,1/0):"-Infinity"===e.substring(s,s+9)||r.Allow._INFINITY&t&&1<n-s&&n-s<9&&"-Infinity".startsWith(e.substring(s))?(s+=9,-1/0):"NaN"===e.substring(s,s+3)||r.Allow.NAN&t&&n-s<3&&"NaN".startsWith(e.substring(s))?(s+=3,NaN):h()),d=()=>{const i=s;let o=!1;for(s++;s<n&&('"'!==e[s]||o&&"\\"===e[s-1]);)o="\\"===e[s]&&!o,s++;if('"'==e.charAt(s))try{return JSON.parse(e.substring(i,++s-Number(o)))}catch(e){l(String(e))}else if(r.Allow.STR&t)try{return JSON.parse(e.substring(i,s-Number(o))+'"')}catch(t){return JSON.parse(e.substring(i,e.lastIndexOf("\\"))+'"')}a("Unterminated string literal")},u=()=>{s++,g();const i={};try{for(;"}"!==e[s];){if(g(),s>=n&&r.Allow.OBJ&t)return i;const o=d();g(),s++;try{const e=c();i[o]=e}catch(e){if(r.Allow.OBJ&t)return i;throw e}g(),","===e[s]&&s++}}catch(e){if(r.Allow.OBJ&t)return i;a("Expected '}' at end of object")}return s++,i},p=()=>{s++;const n=[];try{for(;"]"!==e[s];)n.push(c()),g(),","===e[s]&&s++}catch(e){if(r.Allow.ARR&t)return n;a("Expected ']' at end of array")}return s++,n},h=()=>{if(0===s){"-"===e&&l("Not sure what '-' is");try{return JSON.parse(e)}catch(n){if(r.Allow.NUM&t)try{return JSON.parse(e.substring(0,e.lastIndexOf("e")))}catch(e){}l(String(n))}}const i=s;for("-"===e[s]&&s++;e[s]&&-1===",]}".indexOf(e[s]);)s++;s!=n||r.Allow.NUM&t||a("Unterminated number literal");try{return JSON.parse(e.substring(i,s))}catch(t){"-"===e.substring(i,s)&&a("Not sure what '-' is");try{return JSON.parse(e.substring(i,e.lastIndexOf("e")))}catch(e){l(String(e))}}},g=()=>{for(;s<n&&" \n\r\t".includes(e[s]);)s++};return c()},l=s;e.parse=l}(Dr)),Dr);Nn(".book-resort-card {\n  border: 1px solid #d2d2d2;\n  border-radius: 12px;\n  box-shadow: 0px 1px 2px 0px #1018280f;\n  padding: 10px;\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  gap: 16px;\n}\n\n.book-resorts-prefix a {\n  font-weight: 600;\n  text-decoration: none;\n  border-bottom: none;\n}\n\n.book-resorts-prefix a:hover {\n  border-bottom: none;\n}\n\n.book-resort-day-name {\n  width: 50%;\n}\n\n.book-resort-days {\n  font-size: 12px;\n  font-weight: 400;\n}\n\n.book-resort-button-container {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.book-resort-name {\n  font-size: 12px;\n  font-weight: 600;\n  line-height: 18px;\n}\n\n.book-resort-card-button {\n  min-width: 64px;\n  max-width: 100px;\n  min-height: 32px;\n  border-radius: 2000px;\n  font-size: 13px;\n  font-weight: 600;\n  cursor: pointer;\n  padding: 4px 16px;\n  margin-right: 16px;\n  transition: background-color 0.3s ease;\n  border: solid 1px;\n}\n");const Pr=e=>{const{reservationDate:t,resortName:n,button:r,settings:i,cardNumber:o,isDisabled:s,totalCards:a}=e,l=i?.theme||Ce,c=i?.chatLinkConfig?.openInNewTab,d={container:{backgroundColor:l.cardColor,color:l.textColor},button:{backgroundColor:l?.primaryColor,color:l?.cardColor},buttonHovered:{backgroundColor:l?.cardColor,color:l?.primaryColor}};return P("div",{className:`book-resort-card ${s&&a===o&&"card-container-animation"}`,style:d.container,children:[P("div",{className:"book-resort-day-name",children:[Ut(t)&&P("div",{className:"book-resort-days",children:t}),Ut(n)&&P("div",{className:"book-resort-name",children:n})]}),Ut(r?.label)&&P("div",{className:"book-resort-button-container",children:P(Ir,{handleClick:()=>{const e={...ht,label:n};Gt(e,i?.PushToGTM_global),window.open(r?.bookingUrl,c?ft:mt)},text:r?.label||"",className:"book-resort-card-button",customStyle:d.button,hoveredStyle:d.buttonHovered,disabled:s})})]})};Nn(".book-resorts {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n  width: 90%;\n  max-width: 400px;\n}\n\n.book-resorts-prefix {\n  border: 1px solid #d2d2d2;\n  border-radius: 12px;\n  padding: 10px;\n}\n\n.book-resorts-prefix a:hover {\n  border-bottom: none;\n}\n\n.book-resorts-prefix p {\n  line-height: 16px !important;\n  font-size: 12px !important;\n}\n\n.book-resort-cards-list {\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n}\n");const Br=e=>{const{bookResortsData:t,settings:n,isStreaming:r}=e,{bookingMessage:i="",bookings:o}=t||{},s=n?.theme||Ce,a={prefix:{color:s?.textColor,backgroundColor:s?.cardColor}};return P(x,{children:[P("style",{children:`.book-resorts-prefix a {color: ${s?.textColor} !important; text-decoration: none;}`}),P("div",{className:"book-resorts",children:[Ut(i)&&P("div",{className:"book-resorts-prefix",style:a.prefix,dangerouslySetInnerHTML:{__html:Tr(i||"")},children:i}),Ht(o)&&P("div",{className:"book-resort-cards-list",children:o?.map(((e,t)=>e?.resortName&&P(Pr,{reservationDate:e?.reservationDate,resortName:e?.resortName,button:e?.button,settings:n,isDisabled:r,cardNumber:t+1,totalCards:o?.length})))})]})]})};function Hr(e){return"number"==typeof e}function Ur(e){return"string"==typeof e}function jr(e){return"boolean"==typeof e}function Fr(e){return"[object Object]"===Object.prototype.toString.call(e)}function Gr(e){return Math.abs(e)}function Jr(e){return Math.sign(e)}function Wr(e,t){return Gr(e-t)}function qr(e){return Qr(e).map(Number)}function Vr(e){return e[Yr(e)]}function Yr(e){return Math.max(0,e.length-1)}function Zr(e,t){return t===Yr(e)}function Kr(e,t=0){return Array.from(Array(e),((e,n)=>t+n))}function Qr(e){return Object.keys(e)}function Xr(e,t){return[e,t].reduce(((e,t)=>(Qr(t).forEach((n=>{const r=e[n],i=t[n],o=Fr(r)&&Fr(i);e[n]=o?Xr(r,i):i})),e)),{})}function ei(e,t){return void 0!==t.MouseEvent&&e instanceof t.MouseEvent}function ti(){let e=[];const t={add:function(n,r,i,o={passive:!0}){let s;if("addEventListener"in n)n.addEventListener(r,i,o),s=()=>n.removeEventListener(r,i,o);else{const e=n;e.addListener(i),s=()=>e.removeListener(i)}return e.push(s),t},clear:function(){e=e.filter((e=>e()))}};return t}function ni(e,t,n,r){const i=ti(),o=1e3/60;let s=null,a=0,l=0;function c(e){if(!l)return;s||(s=e);const i=e-s;for(s=e,a+=i;a>=o;)n(),a-=o;r(a/o),l&&(l=t.requestAnimationFrame(c))}function d(){t.cancelAnimationFrame(l),s=null,a=0,l=0}return{init:function(){i.add(e,"visibilitychange",(()=>{e.hidden&&(s=null,a=0)}))},destroy:function(){d(),i.clear()},start:function(){l||(l=t.requestAnimationFrame(c))},stop:d,update:n,render:r}}function ri(e=0,t=0){const n=Gr(e-t);function r(t){return t<e}function i(e){return e>t}function o(e){return r(e)||i(e)}const s={length:n,max:t,min:e,constrain:function(n){return o(n)?r(n)?e:t:n},reachedAny:o,reachedMax:i,reachedMin:r,removeOffset:function(e){return n?e-n*Math.ceil((e-t)/n):e}};return s}function ii(e,t,n){const{constrain:r}=ri(0,e),i=e+1;let o=s(t);function s(e){return n?Gr((i+e)%i):r(e)}function a(){return o}function l(){return ii(e,a(),n)}const c={get:a,set:function(e){return o=s(e),c},add:function(e){return l().set(a()+e)},clone:l};return c}function oi(e,t,n,r,i,o,s,a,l,c,d,u,p,h,g,m,f,b,x){const{cross:y,direction:w}=e,_=["INPUT","SELECT","TEXTAREA"],v={passive:!1},k=ti(),N=ti(),S=ri(50,225).constrain(h.measure(20)),E={mouse:300,touch:400},C={mouse:500,touch:600},R=g?43:25;let T=!1,I=0,A=0,O=!1,M=!1,D=!1,L=!1;function z(e){if(!ei(e,r)&&e.touches.length>=2)return $(e);const t=o.readPoint(e),n=o.readPoint(e,y),s=Wr(t,I),l=Wr(n,A);if(!M&&!L){if(!e.cancelable)return $(e);if(M=s>l,!M)return $(e)}const d=o.pointerMove(e);s>m&&(D=!0),c.useFriction(.3).useDuration(.75),a.start(),i.add(w(d)),e.preventDefault()}function $(e){const t=d.byDistance(0,!1).index!==u.get(),n=o.pointerUp(e)*(g?C:E)[L?"mouse":"touch"],r=function(e,t){const n=u.add(-1*Jr(e)),r=d.byDistance(e,!g).distance;return g||Gr(e)<S?r:f&&t?.5*r:d.byIndex(n.get(),0).distance}(w(n),t),i=function(e,t){if(0===e||0===t)return 0;if(Gr(e)<=Gr(t))return 0;const n=Wr(Gr(e),Gr(t));return Gr(n/e)}(n,r),s=R-10*i,a=b+i/50;M=!1,O=!1,N.clear(),c.useDuration(s).useFriction(a),l.distance(r,!g),L=!1,p.emit("pointerUp")}function P(e){D&&(e.stopPropagation(),e.preventDefault(),D=!1)}return{init:function(e){if(!x)return;function a(a){(jr(x)||x(e,a))&&function(e){const a=ei(e,r);if(L=a,D=g&&a&&!e.buttons&&T,T=Wr(i.get(),s.get())>=2,a&&0!==e.button)return;if(function(e){const t=e.nodeName||"";return _.includes(t)}(e.target))return;O=!0,o.pointerDown(e),c.useFriction(0).useDuration(0),i.set(s),function(){const e=L?n:t;N.add(e,"touchmove",z,v).add(e,"touchend",$).add(e,"mousemove",z,v).add(e,"mouseup",$)}(),I=o.readPoint(e),A=o.readPoint(e,y),p.emit("pointerDown")}(a)}const l=t;k.add(l,"dragstart",(e=>e.preventDefault()),v).add(l,"touchmove",(()=>{}),v).add(l,"touchend",(()=>{})).add(l,"touchstart",a).add(l,"mousedown",a).add(l,"touchcancel",$).add(l,"contextmenu",$).add(l,"click",P,!0)},destroy:function(){k.clear(),N.clear()},pointerDown:function(){return O}}}function si(e,t){let n,r;function i(e){return e.timeStamp}function o(n,r){const i="client"+("x"===(r||e.scroll)?"X":"Y");return(ei(n,t)?n:n.touches[0])[i]}return{pointerDown:function(e){return n=e,r=e,o(e)},pointerMove:function(e){const t=o(e)-o(r),s=i(e)-i(n)>170;return r=e,s&&(n=e),t},pointerUp:function(e){if(!n||!r)return 0;const t=o(r)-o(n),s=i(e)-i(n),a=i(e)-i(r)>170,l=t/s;return s&&!a&&Gr(l)>.1?l:0},readPoint:o}}function ai(e,t,n,r,i,o,s){const a=[e].concat(r);let l,c,d=[],u=!1;function p(e){return i.measureSize(s.measure(e))}return{init:function(i){o&&(c=p(e),d=r.map(p),l=new ResizeObserver((n=>{(jr(o)||o(i,n))&&function(n){for(const o of n){if(u)return;const n=o.target===e,s=r.indexOf(o.target),a=n?c:d[s];if(Gr(p(n?e:r[s])-a)>=.5){i.reInit(),t.emit("resize");break}}}(n)})),n.requestAnimationFrame((()=>{a.forEach((e=>l.observe(e)))})))},destroy:function(){u=!0,l&&l.disconnect()}}}function li(e,t,n,r,i){const o=i.measure(10),s=i.measure(50),a=ri(.1,.99);let l=!1;function c(){return!l&&(!!e.reachedAny(n.get())&&!!e.reachedAny(t.get()))}return{shouldConstrain:c,constrain:function(i){if(!c())return;const l=e.reachedMin(t.get())?"min":"max",d=Gr(e[l]-t.get()),u=n.get()-t.get(),p=a.constrain(d/s);n.subtract(u*p),!i&&Gr(u)<o&&(n.set(e.constrain(n.get())),r.useDuration(25).useBaseFriction())},toggleActive:function(e){l=!e}}}function ci(e,t,n,r){const i=t.min+.1,o=t.max+.1,{reachedMin:s,reachedMax:a}=ri(i,o);const l={loop:function(t){if(!function(e){return 1===e?a(n.get()):-1===e&&s(n.get())}(t))return;const i=e*(-1*t);r.forEach((e=>e.add(i)))}};return l}function di(e,t,n,r,i){const{reachedAny:o,removeOffset:s,constrain:a}=r;function l(e){return e.concat().sort(((e,t)=>Gr(e)-Gr(t)))[0]}function c(t,r){const i=[t,t+n,t-n];if(!e)return t;if(!r)return l(i);const o=i.filter((e=>Jr(e)===r));return o.length?l(o):Vr(i)-n}return{byDistance:function(n,r){const l=i.get()+n,{index:d,distance:u}=function(n){const r=e?s(n):a(n),i=t.map(((e,t)=>({diff:c(e-r,0),index:t}))).sort(((e,t)=>Gr(e.diff)-Gr(t.diff))),{index:o}=i[0];return{index:o,distance:r}}(l),p=!e&&o(l);return!r||p?{index:d,distance:n}:{index:d,distance:n+c(t[d]-u,0)}},byIndex:function(e,n){return{index:e,distance:c(t[e]-i.get(),n)}},shortcut:c}}function ui(e,t,n,r,i,o,s,a){const l={passive:!0,capture:!0};let c=0;function d(e){"Tab"===e.code&&(c=(new Date).getTime())}return{init:function(u){a&&(o.add(document,"keydown",d,!1),t.forEach(((t,d)=>{o.add(t,"focus",(t=>{(jr(a)||a(u,t))&&function(t){if((new Date).getTime()-c>10)return;s.emit("slideFocusStart"),e.scrollLeft=0;const o=n.findIndex((e=>e.includes(t)));Hr(o)&&(i.useDuration(0),r.index(o,0),s.emit("slideFocus"))}(d)}),l)})))}}}function pi(e){let t=e;function n(e){return Hr(e)?e:e.get()}const r={get:function(){return t},set:function(e){t=n(e)},add:function(e){t+=n(e)},subtract:function(e){t-=n(e)}};return r}function hi(e,t){const n="x"===e.scroll?function(e){return`translate3d(${e}px,0px,0px)`}:function(e){return`translate3d(0px,${e}px,0px)`},r=t.style;let i=null,o=!1;return{clear:function(){o||(r.transform="",t.getAttribute("style")||t.removeAttribute("style"))},to:function(t){if(o)return;const s=(a=e.direction(t),Math.round(100*a)/100);var a;s!==i&&(r.transform=n(s),i=s)},toggleActive:function(e){o=!e}}}function gi(e,t,n,r,i,o,s,a,l){const c=qr(i),d=qr(i).reverse(),u=function(){const e=s[0];return g(h(d,e),n,!1)}().concat(function(){const e=t-s[0]-1;return g(h(c,e),-n,!0)}());function p(e,t){return e.reduce(((e,t)=>e-i[t]),t)}function h(e,t){return e.reduce(((e,n)=>p(e,t)>0?e.concat([n]):e),[])}function g(i,s,c){const d=function(e){return o.map(((n,i)=>({start:n-r[i]+.5+e,end:n+t-.5+e})))}(s);return i.map((t=>{const r=c?0:-n,i=c?n:0,o=c?"end":"start",s=d[t][o];return{index:t,loopPoint:s,slideLocation:pi(-1),translate:hi(e,l[t]),target:()=>a.get()>s?r:i}}))}const m={canLoop:function(){return u.every((({index:e})=>{const n=c.filter((t=>t!==e));return p(n,t)<=.1}))},clear:function(){u.forEach((e=>e.translate.clear()))},loop:function(){u.forEach((e=>{const{target:t,translate:n,slideLocation:r}=e,i=t();i!==r.get()&&(n.to(i),r.set(i))}))},loopPoints:u};return m}function mi(e,t,n){let r,i=!1;return{init:function(o){n&&(r=new MutationObserver((e=>{i||(jr(n)||n(o,e))&&function(e){for(const n of e)if("childList"===n.type){o.reInit(),t.emit("slidesChanged");break}}(e)})),r.observe(e,{childList:!0}))},destroy:function(){r&&r.disconnect(),i=!0}}}function fi(e,t,n,r){const i={};let o,s=null,a=null,l=!1;const c={init:function(){o=new IntersectionObserver((e=>{l||(e.forEach((e=>{const n=t.indexOf(e.target);i[n]=e})),s=null,a=null,n.emit("slidesInView"))}),{root:e.parentElement,threshold:r}),t.forEach((e=>o.observe(e)))},destroy:function(){o&&o.disconnect(),l=!0},get:function(e=!0){if(e&&s)return s;if(!e&&a)return a;const t=function(e){return Qr(i).reduce(((t,n)=>{const r=parseInt(n),{isIntersecting:o}=i[r];return(e&&o||!e&&!o)&&t.push(r),t}),[])}(e);return e&&(s=t),e||(a=t),t}};return c}function bi(e,t,n,r,i,o,s,a,l){const{startEdge:c,endEdge:d,direction:u}=e,p=Hr(n);const h={groupSlides:function(e){return p?function(e,t){return qr(e).filter((e=>e%t==0)).map((n=>e.slice(n,n+t)))}(e,n):function(e){return e.length?qr(e).reduce(((n,p,h)=>{const g=Vr(n)||0,m=0===g,f=p===Yr(e),b=i[c]-o[g][c],x=i[c]-o[p][d],y=!r&&m?u(s):0,w=Gr(x-(!r&&f?u(a):0)-(b+y));return h&&w>t+l&&n.push(p),f&&n.push(e.length),n}),[]).map(((t,n,r)=>{const i=Math.max(r[n-1]||0);return e.slice(i,t)})):[]}(e)}};return h}function xi(e,t,n,r,i,o,s){const{align:a,axis:l,direction:c,startIndex:d,loop:u,duration:p,dragFree:h,dragThreshold:g,inViewThreshold:m,slidesToScroll:f,skipSnaps:b,containScroll:x,watchResize:y,watchSlides:w,watchDrag:_,watchFocus:v}=o,k={measure:function(e){const{offsetTop:t,offsetLeft:n,offsetWidth:r,offsetHeight:i}=e;return{top:t,right:n+r,bottom:t+i,left:n,width:r,height:i}}},N=k.measure(t),S=n.map(k.measure),E=function(e,t){const n="rtl"===t,r="y"===e,i=!r&&n?-1:1,o={scroll:r?"y":"x",cross:r?"x":"y",startEdge:r?"top":n?"right":"left",endEdge:r?"bottom":n?"left":"right",measureSize:function(e){const{height:t,width:n}=e;return r?t:n},direction:function(e){return e*i}};return o}(l,c),C=E.measureSize(N),R=function(e){const t={measure:function(t){return e*(t/100)}};return t}(C),T=function(e,t){const n={start:function(){return 0},center:function(e){return r(e)/2},end:r};function r(e){return t-e}const i={measure:function(r,i){return Ur(e)?n[e](r):e(t,r,i)}};return i}(a,C),I=!u&&!!x,A=u||!!x,{slideSizes:O,slideSizesWithGaps:M,startGap:D,endGap:L}=function(e,t,n,r,i,o){const{measureSize:s,startEdge:a,endEdge:l}=e,c=n[0]&&i,d=function(){if(!c)return 0;const e=n[0];return Gr(t[a]-e[a])}(),u=function(){if(!c)return 0;const e=o.getComputedStyle(Vr(r));return parseFloat(e.getPropertyValue(`margin-${l}`))}(),p=n.map(s),h=n.map(((e,t,n)=>{const r=!t,i=Zr(n,t);return r?p[t]+d:i?p[t]+u:n[t+1][a]-e[a]})).map(Gr);return{slideSizes:p,slideSizesWithGaps:h,startGap:d,endGap:u}}(E,N,S,n,A,i),z=bi(E,C,f,u,N,S,D,L,2),{snaps:$,snapsAligned:P}=function(e,t,n,r,i){const{startEdge:o,endEdge:s}=e,{groupSlides:a}=i,l=a(r).map((e=>Vr(e)[s]-e[0][o])).map(Gr).map(t.measure),c=r.map((e=>n[o]-e[o])).map((e=>-Gr(e))),d=a(c).map((e=>e[0])).map(((e,t)=>e+l[t]));return{snaps:c,snapsAligned:d}}(E,T,N,S,z),B=-Vr($)+Vr(M),{snapsContained:H,scrollContainLimit:U}=function(e,t,n,r,i){const o=ri(-t+e,0),s=n.map(((e,t)=>{const{min:r,max:i}=o,s=o.constrain(e),a=!t,c=Zr(n,t);return a?i:c||l(r,s)?r:l(i,s)?i:s})).map((e=>parseFloat(e.toFixed(3)))),a=function(){const e=s[0],t=Vr(s);return ri(s.lastIndexOf(e),s.indexOf(t)+1)}();function l(e,t){return Wr(e,t)<1}return{snapsContained:function(){if(t<=e+i)return[o.max];if("keepSnaps"===r)return s;const{min:n,max:l}=a;return s.slice(n,l)}(),scrollContainLimit:a}}(C,B,P,x,2),j=I?H:P,{limit:F}=function(e,t,n){const r=t[0];return{limit:ri(n?r-e:Vr(t),r)}}(B,j,u),G=ii(Yr(j),d,u),J=G.clone(),W=qr(n),q=ni(r,i,(()=>(({dragHandler:e,scrollBody:t,scrollBounds:n,options:{loop:r}})=>{r||n.constrain(e.pointerDown()),t.seek()})(ae)),(e=>(({scrollBody:e,translate:t,location:n,offsetLocation:r,previousLocation:i,scrollLooper:o,slideLooper:s,dragHandler:a,animation:l,eventHandler:c,scrollBounds:d,options:{loop:u}},p)=>{const h=e.settled(),g=!d.shouldConstrain(),m=u?h:h&&g;m&&!a.pointerDown()&&(l.stop(),c.emit("settle")),m||c.emit("scroll");const f=n.get()*p+i.get()*(1-p);r.set(f),u&&(o.loop(e.direction()),s.loop()),t.to(r.get())})(ae,e))),V=j[G.get()],Y=pi(V),Z=pi(V),K=pi(V),Q=pi(V),X=function(e,t,n,r,i,o){let s=0,a=0,l=i,c=o,d=e.get(),u=0;function p(e){return l=e,g}function h(e){return c=e,g}const g={direction:function(){return a},duration:function(){return l},velocity:function(){return s},seek:function(){const t=r.get()-e.get();let i=0;return l?(n.set(e),s+=t/l,s*=c,d+=s,e.add(s),i=d-u):(s=0,n.set(r),e.set(r),i=t),a=Jr(i),u=d,g},settled:function(){return Gr(r.get()-t.get())<.001},useBaseFriction:function(){return h(o)},useBaseDuration:function(){return p(i)},useFriction:h,useDuration:p};return g}(Y,K,Z,Q,p,.68),ee=di(u,j,B,F,Q),te=function(e,t,n,r,i,o,s){function a(i){const a=i.distance,l=i.index!==t.get();o.add(a),a&&(r.duration()?e.start():(e.update(),e.render(1),e.update())),l&&(n.set(t.get()),t.set(i.index),s.emit("select"))}const l={distance:function(e,t){a(i.byDistance(e,t))},index:function(e,n){const r=t.clone().set(e);a(i.byIndex(r.get(),n))}};return l}(q,G,J,X,ee,Q,s),ne=function(e){const{max:t,length:n}=e,r={get:function(e){return n?(e-t)/-n:0}};return r}(F),re=ti(),ie=fi(t,n,s,m),{slideRegistry:oe}=function(e,t,n,r,i,o){const{groupSlides:s}=i,{min:a,max:l}=r;return{slideRegistry:function(){const r=s(o),i=!e||"keepSnaps"===t;return 1===n.length?[o]:i?r:r.slice(a,l).map(((e,t,n)=>{const r=!t,i=Zr(n,t);return r?Kr(Vr(n[0])+1):i?Kr(Yr(o)-Vr(n)[0]+1,Vr(n)[0]):e}))}()}}(I,x,j,U,z,W),se=ui(e,n,oe,te,X,re,s,v),ae={ownerDocument:r,ownerWindow:i,eventHandler:s,containerRect:N,slideRects:S,animation:q,axis:E,dragHandler:oi(E,e,r,i,Q,si(E,i),Y,q,te,X,ee,G,s,R,h,g,b,.68,_),eventStore:re,percentOfView:R,index:G,indexPrevious:J,limit:F,location:Y,offsetLocation:K,previousLocation:Z,options:o,resizeHandler:ai(t,s,i,n,E,y,k),scrollBody:X,scrollBounds:li(F,K,Q,X,R),scrollLooper:ci(B,F,K,[Y,K,Z,Q]),scrollProgress:ne,scrollSnapList:j.map(ne.get),scrollSnaps:j,scrollTarget:ee,scrollTo:te,slideLooper:gi(E,C,B,O,M,$,j,K,n),slideFocus:se,slidesHandler:mi(t,s,w),slidesInView:ie,slideIndexes:W,slideRegistry:oe,slidesToScroll:z,target:Q,translate:hi(E,t)};return ae}const yi={align:"center",axis:"x",container:null,slides:null,containScroll:"trimSnaps",direction:"ltr",slidesToScroll:1,inViewThreshold:0,breakpoints:{},dragFree:!1,dragThreshold:10,loop:!1,skipSnaps:!1,duration:25,startIndex:0,active:!0,watchDrag:!0,watchResize:!0,watchSlides:!0,watchFocus:!0};function wi(e){function t(e,t){return Xr(e,t||{})}const n={mergeOptions:t,optionsAtMedia:function(n){const r=n.breakpoints||{},i=Qr(r).filter((t=>e.matchMedia(t).matches)).map((e=>r[e])).reduce(((e,n)=>t(e,n)),{});return t(n,i)},optionsMediaQueries:function(t){return t.map((e=>Qr(e.breakpoints||{}))).reduce(((e,t)=>e.concat(t)),[]).map(e.matchMedia)}};return n}function _i(e,t,n){const r=e.ownerDocument,i=r.defaultView,o=wi(i),s=function(e){let t=[];const n={init:function(n,r){return t=r.filter((({options:t})=>!1!==e.optionsAtMedia(t).active)),t.forEach((t=>t.init(n,e))),r.reduce(((e,t)=>Object.assign(e,{[t.name]:t})),{})},destroy:function(){t=t.filter((e=>e.destroy()))}};return n}(o),a=ti(),l=function(){let e,t={};function n(e){return t[e]||[]}const r={init:function(t){e=t},emit:function(t){return n(t).forEach((n=>n(e,t))),r},off:function(e,i){return t[e]=n(e).filter((e=>e!==i)),r},on:function(e,i){return t[e]=n(e).concat([i]),r},clear:function(){t={}}};return r}(),{mergeOptions:c,optionsAtMedia:d,optionsMediaQueries:u}=o,{on:p,off:h,emit:g}=l,m=E;let f,b,x,y,w=!1,_=c(yi,_i.globalOptions),v=c(_),k=[];function N(t){const n=xi(e,x,y,r,i,t,l);if(t.loop&&!n.slideLooper.canLoop()){return N(Object.assign({},t,{loop:!1}))}return n}function S(t,n){w||(_=c(_,t),v=d(_),k=n||k,function(){const{container:t,slides:n}=v,r=Ur(t)?e.querySelector(t):t;x=r||e.children[0];const i=Ur(n)?x.querySelectorAll(n):n;y=[].slice.call(i||x.children)}(),f=N(v),u([_,...k.map((({options:e})=>e))]).forEach((e=>a.add(e,"change",E))),v.active&&(f.translate.to(f.location.get()),f.animation.init(),f.slidesInView.init(),f.slideFocus.init(I),f.eventHandler.init(I),f.resizeHandler.init(I),f.slidesHandler.init(I),f.options.loop&&f.slideLooper.loop(),x.offsetParent&&y.length&&f.dragHandler.init(I),b=s.init(I,k)))}function E(e,t){const n=T();C(),S(c({startIndex:n},e),t),l.emit("reInit")}function C(){f.dragHandler.destroy(),f.eventStore.clear(),f.translate.clear(),f.slideLooper.clear(),f.resizeHandler.destroy(),f.slidesHandler.destroy(),f.slidesInView.destroy(),f.animation.destroy(),s.destroy(),a.clear()}function R(e,t,n){v.active&&!w&&(f.scrollBody.useBaseFriction().useDuration(!0===t?0:v.duration),f.scrollTo.index(e,n||0))}function T(){return f.index.get()}const I={canScrollNext:function(){return f.index.add(1).get()!==T()},canScrollPrev:function(){return f.index.add(-1).get()!==T()},containerNode:function(){return x},internalEngine:function(){return f},destroy:function(){w||(w=!0,a.clear(),C(),l.emit("destroy"),l.clear())},off:h,on:p,emit:g,plugins:function(){return b},previousScrollSnap:function(){return f.indexPrevious.get()},reInit:m,rootNode:function(){return e},scrollNext:function(e){R(f.index.add(1).get(),e,-1)},scrollPrev:function(e){R(f.index.add(-1).get(),e,1)},scrollProgress:function(){return f.scrollProgress.get(f.location.get())},scrollSnapList:function(){return f.scrollSnapList},scrollTo:R,selectedScrollSnap:T,slideNodes:function(){return y},slidesInView:function(){return f.slidesInView.get()},slidesNotInView:function(){return f.slidesInView.get(!1)}};return S(t,n),setTimeout((()=>l.emit("init")),0),I}_i.globalOptions=void 0;Nn(".embla {\n  width: 100%;\n  margin: auto;\n  --slide-height: 19rem;\n  --slide-spacing: 1rem;\n  --slide-size: 100%;\n  position: relative;\n}\n.embla__viewport {\n  margin-top: -6px;\n  margin-left: -8px;\n}\n.embla__container {\n  display: flex;\n  touch-action: pan-y pinch-zoom;\n  padding-top: 8px;\n  padding-left: 8px;\n  margin-right: 20px;\n}\n.embla__slide {\n  transform: translate3d(0, 0, 0);\n  flex: 0 0 var(--slide-size);\n  min-width: 0;\n  padding-left: var(--slide-spacing);\n}\n.embla__slide__number {\n  box-shadow: inset 0 0 0 0.2rem var(--detail-medium-contrast);\n  border-radius: 1.8rem;\n  font-size: 4rem;\n  font-weight: 600;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: var(--slide-height);\n  user-select: none;\n}\n\n.custom-button {\n  border: none;\n  border-radius: 50%;\n  cursor: pointer;\n  transition: background-color 0.3s ease;\n  height: 32px;\n  width: 32px;\n  z-index: 15;\n  pointer-events: auto;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.custom-button:hover {\n  pointer-events: auto;\n}\n\n.prev-btn {\n  position: absolute;\n  left: -38px;\n  top: 50%;\n}\n\n.next-btn {\n  position: absolute;\n  right: -12px;\n  top: 50%;\n}\n\n.carousel-arrows {\n  height: 12px;\n  width: 16px;\n}\n");const vi=e=>{const{assets:t,theme:n={},children:r,noOfCards:i=0}=e,[o,s]=hn(!1),[a,l]=hn(!1),[c,d]=hn(!1),[u,p]=hn(0),h=mn(null),g=mn(null),m={inactive:{backgroundColor:n.primaryColor,opacity:.5},active:{backgroundColor:n.primaryColor}},f=e=>{e.altKey&&c&&(e.key===Qe?(e.preventDefault(),y()):e.key===Xe&&(e.preventDefault(),b()))};gn((()=>{const e=h.current,t=new IntersectionObserver((([e])=>{d(e.isIntersecting)}),{threshold:.75}),n=new ResizeObserver((()=>{e&&p(e.clientWidth)}));return e&&(n.observe(e),t.observe(e)),()=>{e&&(t.unobserve(e),n.unobserve(e)),t.disconnect(),n.disconnect()}}),[]),gn((()=>(c?document.addEventListener("keyup",f):document.removeEventListener("keyup",f),()=>{document.removeEventListener("keyup",f)})),[c]),gn((()=>{if(h.current){const e=_i(h.current,{loop:!1});g.current=e;const t=()=>{s(e.canScrollNext()),l(e.canScrollPrev())};e.on("select",t),t()}return()=>{g.current?.destroy()}}),[u]),gn((()=>{g.current&&i>2&&(s(g?.current?.canScrollNext()),l(g?.current?.canScrollPrev()))}),[i]);const b=()=>{g.current?.scrollNext()},y=()=>{g.current?.scrollPrev()},w=fn((()=>(o||a)&&P(x,{children:[P("button",{className:"prev-btn custom-button",style:a?m.active:m.inactive,onClick:y,disabled:!a,children:P("img",{src:t?.leftArrow,alt:"Previous",className:"carousel-arrows"})}),P("button",{className:"next-btn custom-button",style:o?m.active:m.inactive,onClick:b,disabled:!o,children:P("img",{src:t?.rightArrow,alt:"Next",className:"carousel-arrows"})})]})),[o,a,t,m]);return P("div",{className:"embla",children:P("div",{className:"embla__viewport",ref:h,children:[P("div",{className:"embla__container",children:r}),w]})})},ki=e=>{const{image:t,alt:n,customClass:r,settings:i}=e,[o,s]=hn(Ut(t)?t:i?.assets?.resortImagePlaceholder);gn((()=>{s(Ut(t)?t:i?.assets?.resortImagePlaceholder)}),[t]);return P("img",{src:o,className:r,alt:n,onError:({currentTarget:e})=>(e.onerror=null,void s(i?.assets?.brokenImagePlaceholder))})};Nn(".event-card-container {\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  height: fit-content;\n  min-width: 274px;\n  border: 1px solid #d2d2d2;\n  border-radius: 12px;\n  box-shadow: 0px 1px 2px 0px #1018280f;\n  padding: 10px;\n}\n\n.event-container {\n  display: flex;\n  align-items: center;\n}\n\n.event-image {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n}\n\n.event-card-image-container {\n  height: 54px;\n  width: 54px;\n  min-height: 54px;\n  min-width: 54px;\n  border-radius: 8px;\n  margin-right: 8px;\n  overflow: hidden;\n  font-size: 10px;\n}\n\n.event-details {\n  line-height: 18px;\n}\n\n.event-name {\n  font-size: 13px;\n  font-weight: 600;\n  padding-bottom: 4px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.event-location {\n  font-size: 12px;\n  font-weight: 400;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.event-details-icon {\n  width: 12px;\n  height: 12px;\n  min-width: 12px;\n  min-height: 12px;\n  margin-right: 4px;\n  margin-top: 3px;\n}\n\n.site-icon {\n  width: 16px;\n  height: 16px;\n  margin-right: 4px;\n}\n\n.event-details-row {\n  display: flex;\n  flex-direction: row;\n  align-items: flex-start;\n}\n\n.event-number-badge {\n  position: absolute;\n  display: flex;\n  top: -7px;\n  left: -7px;\n  justify-content: center;\n  align-items: center;\n  width: 22px;\n  height: 20px;\n  border-radius: 50%;\n  font-size: 12px;\n  font-weight: 500;\n  margin-right: 4px;\n}\n");const Ni=e=>{const{eventCardData:t={},settings:n,cardNumber:r,isStreaming:i,totalEvents:o}=e,{location:s,dateIcon:a}=n?.assets||{},l=n?.theme||Ce,{imageUrl:c,title:d,location:u,startDate:p,endDate:h}=t,g={button:{backgroundColor:l.primaryColor,color:ye},container:{backgroundColor:l.cardColor},badge:{backgroundColor:l.primaryColor,color:ye},eventImage:{backgroundColor:we}},m=fn((()=>r?P("div",{style:g.badge,className:"event-number-badge",children:r}):null),[r]);return P("div",{className:`event-card-container ${i&&o===r&&"card-container-animation"}`,style:g.container,"data-testId":"event-card",children:[m,P("div",{className:"event-container",children:[P("div",{style:g.eventImage,className:"event-card-image-container",children:P(ki,{alt:d,customClass:"event-image",image:c,settings:n})}),P("div",{className:"event-details",children:[Ut(d)&&P("div",{className:"event-name",children:d}),Ut(p)&&P("div",{className:"event-details-row",children:[P("img",{src:a,alt:"date-icon",className:"event-details-icon"}),P("div",{className:"event-location",children:[kt(p,"mmm d, yyyy")," - ",kt(h,"mmm d, yyyy")]})]}),Ut(u)&&P("div",{className:"event-details-row",children:[P("img",{src:s,alt:"location-icon",className:"event-details-icon"}),P("div",{className:"event-location",children:u})]})]})]})]})};Nn(".event-details-card {\n  width: 80%;\n  border: 1px solid #d2d2d2;\n  border-radius: 12px;\n  box-shadow: 0px 1px 2px 0px #1018280f;\n  background-color: #ffffff;\n  overflow: hidden;\n  padding: 8px;\n  line-height: 16px;\n}\n\n.event-image-container {\n  width: 100%;\n  height: 64px;\n  border-radius: 8px;\n  overflow: hidden;\n}\n\n.event-image-container-large {\n  height: 150px !important;\n}\n\n.event-image {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n}\n\n.event-info {\n  flex: 1;\n}\n\n.event-details-title {\n  font-size: 13px;\n  font-weight: 600;\n  margin-bottom: 8px;\n  margin-top: 8px;\n}\n\n.event-details p {\n  margin: 4px 0;\n  font-size: 14px;\n  color: #25314b;\n}\n\n.event-details-item {\n  margin-top: 8px;\n  display: flex;\n  align-items: center;\n  font-size: 12px;\n  font-weight: 400;\n  color: #25314b;\n}\n\n.event-icon {\n  width: 12px;\n  height: 12px;\n  min-width: 12px;\n  min-height: 12px;\n  margin-right: 8px;\n}\n\n.about-event-label {\n  margin-top: 8px;\n  font-size: 12px;\n  font-weight: 600;\n}\n\n.about-event-text {\n  font-size: 12px;\n  margin-top: 4px;\n  font-weight: 400;\n}\n\n.event-schedule {\n  max-height: 0;\n  overflow: hidden;\n  transition:\n    max-height 0.5s ease-out,\n    opacity 0.3s ease-out;\n}\n\n.event-schedule.open {\n  max-height: 2000px;\n  transition:\n    max-height 0.5s ease-in,\n    opacity 0.3s ease-in;\n}\n\n.event-schedule-label {\n  font-size: 12px;\n  font-weight: 600;\n  margin-top: 8px;\n}\n\n.schedule-item {\n  margin-top: 8px;\n  border-radius: 12px;\n  padding: 8px;\n  max-height: 'fit-content';\n}\n\n.schedule-title {\n  font-size: 12px;\n  font-weight: 600;\n  margin: 0px;\n  line-height: 18px;\n}\n\n.schedule-time-price {\n  font-size: 12px;\n  font-weight: 600;\n  line-height: 18px;\n}\n\n.schedule-description {\n  font-size: 12px;\n  font-weight: 400;\n}\n\n.show-more {\n  display: flex;\n  align-items: center;\n  cursor: pointer;\n  color: #3d5a75;\n  font-size: 13px;\n  font-weight: 500;\n  line-height: 16px;\n  margin-bottom: 4px;\n  margin-top: 8px;\n}\n\n.show-more-text {\n  margin-right: 4px;\n}\n\n.bold {\n  font-weight: 600;\n}\n\n.show-more-icon {\n  display: inline-block;\n  width: 6px;\n  height: 6px;\n  border: solid #3d5a75;\n  border-width: 0 2px 2px 0;\n  transform: rotate(45deg);\n  margin-top: -2px;\n  transition: transform 0.3s ease;\n}\n\n.show-less-icon {\n  display: inline-block;\n  width: 6px;\n  height: 6px;\n  border: solid #3d5a75;\n  border-width: 0 2px 2px 0;\n  transform: rotate(-135deg);\n  margin-top: 4px;\n  transition: transform 0.3s ease;\n}\n");const Si=e=>{const{eventDetailsData:t,settings:n,isLarge:r}=e,{imageUrl:i,title:o,location:s,startDate:a,endDate:l,startTime:c,endTime:d,isAllDay:u,eventSchedule:p,aboutEvent:h}=t,[g,m]=hn(!1),f=n?.theme||Ce,{location:b,dateIcon:x,timeIcon:y}=n?.assets||{},w=P("div",{class:"show-more",onClick:()=>m(!0),children:[P("span",{class:"show-more-text",children:ve.showSchedule}),P("span",{class:"show-more-icon"})]}),_={eventSchedule:{backgroundColor:f.chatBubbleColor,color:f.textColor},showMoreButton:{color:f.primaryColor},botAvatarBg:{backgroundColor:f.primaryColor},textColor:{color:f.textColor},eventDetailImage:{backgroundColor:we}},v=P("div",{class:"show-more",onClick:()=>m(!1),children:[P("span",{class:"show-more-text",children:ve.hideSchedule}),P("span",{class:"show-less-icon"})]}),k=fn((()=>!!Ut(c)||!!u),[c,d,u]),N=fn((()=>u?ve.allDay:Ut(d)?`${c} - ${d}`:c),[c,d,u]);return P("div",{className:"event-details-card",style:_.textColor,children:[P("div",{className:`event-image-container ${r&&"event-image-container-large"}`,style:_.eventDetailImage,children:P(ki,{alt:o,customClass:"event-image",image:i,settings:n})}),P("div",{className:"event-info",children:[Ut(o)&&P("div",{className:"event-details-title",children:o}),P("div",{className:"event-details",children:[Ut(a)&&P("div",{className:"event-details-item",children:[P("img",{src:x,alt:"date",className:"event-icon"}),`${kt(a,"mmm d, yyyy")} - ${kt(l,"mmm d, yyyy")}`]}),k&&P("div",{className:"event-details-item",children:[P("img",{src:y,alt:"time",className:"event-icon"}),N]}),Ut(s)&&P("div",{className:"event-details-item",children:[P("img",{src:b,alt:"location-icon",className:"event-icon"}),s]})]}),Ut(h)&&P("div",{className:"about-info",children:[P("div",{className:"about-event-label",children:ve.aboutEvent}),P("div",{className:"about-event-text",children:h})]})]}),P("div",{className:"event-schedule "+(g?"open":""),children:Ht(p)&&P("div",{className:"event-schedule-content",children:[P("div",{className:"event-schedule-label",children:ve.eventSchedule}),p.length>0?p.map(((e,t)=>P("div",{className:"schedule-item",style:_.eventSchedule,children:[P("div",{className:"schedule-title",children:e.title}),P("div",{className:"schedule-time-price",children:[e.time," | ",e.price||ve.free]}),P("div",{className:"schedule-description",children:e.description}),P("div",{className:"schedule-title",children:[ve.location,": ",e.location]})]},t))):P("p",{children:ve.noActivitiesAvailable})]})}),Ht(p)&&(g?v:w)]})};Nn(".feedback-chat-container {\n  border: 1px solid #d2d2d2;\n  border-radius: 12px;\n  padding: 10px;\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n  width: 65%;\n  margin-left: 38px;\n  margin-top: -1px;\n  margin-bottom: 12px;\n  max-width: 300px;\n}\n\n.feedback-chat-row {\n  display: flex;\n  flex-direction: row;\n  gap: 4px;\n}\n\n.feedback-icon-container {\n  min-width: 32px;\n  min-height: 32px;\n  border-radius: 50%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  cursor: pointer;\n}\n\n.feedback-icon {\n  min-width: 16px;\n  min-height: 16px;\n  width: 16px;\n  height: 16px;\n}\n\n.feedback-message {\n  font-weight: 500;\n  font-size: 13px;\n  line-height: 16px;\n}\n\n.feedback-disabled {\n  pointer-events: none;\n  cursor: not-allowed;\n  opacity: 0.9;\n}\n");const Ei=e=>{const{feedbackData:t,settings:n,onFeedbackSubmit:r=async()=>null}=e,{thumbsDownActive:i,thumbsDown:o,thumbsUpActive:s,thumbsUp:a}=n?.assets||{},[l,c]=hn(t?.feedback||null),[d,u]=hn(!1),p={container:{backgroundColor:n?.theme?.chatBubbleColor},active:{backgroundColor:n?.theme?.primaryColor},inactive:{backgroundColor:ye},text:{color:n?.theme?.textColor}};gn((()=>{Ft(t?.feedback)&&c(t?.feedback||null)}),[t?.feedback]);const h=async e=>{if(d)return;u(!0);const t=l,n=e===t?0:e;c(n);const i=await r(n);Ft(i)?c(i):c(t),u(!1)};return P("div",{className:"feedback-chat-container",style:p.container,children:[P("div",{style:p.text,className:"feedback-message",children:ve.rateThisChat}),P("div",{className:"feedback-chat-row",children:[P("div",{style:1===l?p.active:p.inactive,onClick:()=>{h(1===l?0:1)},className:`feedback-chat-thumbsUp feedback-icon-container ${d&&"feedback-disabled"}`,children:P("img",{src:1===l?s:a,alt:"thumbsUp icon",className:"feedback-icon"})}),P("div",{style:-1===l?p.active:p.inactive,onClick:()=>{h(-1===l?0:-1)},className:`feedback-chat-thumbsDown feedback-icon-container ${d&&"feedback-disabled"}`,children:P("img",{src:-1===l?i:o,alt:"thumbsDown icon",className:"feedback-icon"})})]})]})};Nn(".feedback-message-container {\n  display: flex;\n  justify-content: flex-end;\n  align-items: center;\n  flex-direction: row;\n  font-size: 12px;\n}\n\n.feedback-message-thumbsUp {\n  width: 24px;\n  height: 24px;\n  margin-right: 5px;\n  margin-left: 6px;\n  border-radius: 12px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  cursor: pointer;\n  box-shadow: 0px 2px 3px rgba(0, 0, 0, 0.1);\n}\n\n.feedback-message-thumbsDown {\n  width: 24px;\n  height: 24px;\n  border-radius: 12px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  cursor: pointer;\n  box-shadow: 0px 2px 3px rgba(0, 0, 0, 0.1);\n}\n\n.feedback-message-row {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: row;\n}\n\n.feedback-disabled {\n  pointer-events: none;\n  cursor: not-allowed;\n  opacity: 0.9;\n}\n");const Ci=e=>{const{feedbackData:t,settings:n,isDisabled:r,onFeedbackSubmit:i=async()=>null}=e,{thumbsDownActive:o,thumbsDown:s,thumbsUpActive:a,thumbsUp:l}=n?.assets||{},[c,d]=hn(t?.feedback||null),[u,p]=hn(!1),h={active:{backgroundColor:n?.theme?.primaryColor},inactive:{backgroundColor:ye},text:{color:_e}};gn((()=>{Ft(t?.feedback)&&d(t?.feedback||null)}),[t?.feedback]);const g=async e=>{if(u)return;p(!0);const t=c,n=e===t?0:e;d(n);const r=await i(n);Ft(r)?d(r):d(t),p(!1)};return P("div",{className:`feedback-message-container ${r&&"no-click"}`,children:[P("div",{style:h.text,children:ve.wasThisHelpful}),P("div",{className:"feedback-message-row",children:[P("div",{style:1===c?h.active:h.inactive,onClick:()=>g(1),className:`feedback-message-thumbsUp ${u&&"feedback-disabled"}`,children:P("img",{src:1===c?a:l,alt:"thumbsUp icon",width:14,height:14})}),P("div",{style:-1===c?h.active:h.inactive,onClick:()=>g(-1),className:`feedback-message-thumbsDown ${u&&"feedback-disabled"}`,children:P("img",{src:-1===c?o:s,alt:"thumbsDown icon",width:14,height:14})})]})]})};Nn(".itinerary-container {\n  display: flex;\n  flex-direction: column;\n  width: 210px;\n  height: 100%;\n  border: 1px solid #d2d2d2;\n  border-radius: 12px;\n  box-shadow: 0px 1px 2px 0px #1018280f;\n  padding: 10px;\n  line-height: 16px;\n  font-size: 12px;\n}\n\n.itinerary-resort-image-container {\n  height: 90px;\n  border-radius: 8px;\n  overflow: hidden;\n  margin-right: 5px;\n}\n\n.itinerary-resort-image {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n}\n\n.itinerary-resort-details-content {\n  min-height: 100px;\n}\n\n.itinerary-resort-day-range {\n  font-size: 12px;\n  font-weight: 600;\n  padding: 4px 10px;\n  border-radius: 20px;\n  margin-right: 5px;\n  min-width: 56px;\n  text-align: center;\n  white-space: nowrap;\n}\n\n.itinerary-resort-details-data {\n  margin-top: 10px;\n}\n\n.itinerary-resort-title {\n  font-size: 12px;\n  font-weight: 600;\n  padding-top: 3px;\n  display: -webkit-box;\n  -webkit-line-clamp: 3;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.itinerary-resort-details-row {\n  display: flex;\n  align-items: start;\n  flex-direction: row;\n  margin-bottom: 8px;\n}\n\n.itinerary-bold {\n  font-weight: 600;\n}\n\n.itinerary-resort-price-details {\n  margin-bottom: 12px;\n}\n\n.itinerary-itinerary-price-details {\n  margin-bottom: 8px;\n  width: 100%;\n  text-align: right;\n}\n\n.itinerary-activity-container {\n  display: flex;\n  flex-direction: column;\n  padding: 8px;\n  border-radius: 8px;\n  margin-bottom: 8px;\n}\n\n.itinerary-activity-heading {\n  font-size: 12px;\n  font-weight: 600;\n  margin-bottom: 12px;\n  margin-top: 4px;\n}\n\n.itinerary-activity-title {\n  font-size: 12px;\n  font-weight: 700;\n  margin-bottom: 8px;\n}\n\n.itinerary-activity-description {\n  font-size: 12px;\n}\n\n.itinerary-resort-details-rows {\n  display: flex;\n  flex-direction: row;\n  margin-bottom: 8px;\n}\n\n.itinerary-resort-stay {\n  margin-bottom: 8px;\n}\n\n.itinerary-check-in-time {\n  margin-bottom: 8px;\n}\n\n.itinerary-drive-time {\n  margin-bottom: 8px;\n}\n\n.itinerary-amenities-container {\n  display: flex;\n  padding: 8px;\n  border-radius: 8px;\n}\n");const Ri=e=>{const{itineraryData:t,settings:n,isDisabled:r,cardNumber:i,totalCards:o}=e,s=n?.theme||Ce,{imageUrl:a,dayRange:l,title:c,stay:d,checkInTime:u,activities:p=[],onSiteAmenities:h,driveTime:g}=t||{},m={container:{backgroundColor:s.cardColor},dateRange:{backgroundColor:s.chatWindowColor},resortImage:{backgroundColor:we},activityCard:{backgroundColor:s.chatWindowColor}},f=fn((()=>h?.join(", ")),[h]);return P("div",{className:`itinerary-container  ${r&&o===i&&"card-container-animation"}`,style:m.container,"data-testId":"itinerary-card",children:[P("div",{style:m.resortImage,className:"itinerary-resort-image-container",children:P(ki,{alt:c,customClass:"itinerary-resort-image",image:a,settings:n})}),P("div",{className:"itinerary-resort-details-data",children:[P("div",{className:"itinerary-resort-details-content",children:[P("div",{className:"itinerary-resort-details-row",children:[Ut(l)&&P("div",{style:m.dateRange,className:"itinerary-resort-day-range",children:l}),Ut(c)&&P("div",{className:"itinerary-resort-title",children:c})]}),Ut(d)&&P("div",{className:"itinerary-resort-stay",children:[P("span",{className:"itinerary-bold",children:`${ve.stay}: `}),d]}),Ut(g)&&P("div",{className:"itinerary-drive-time",children:[P("span",{className:"itinerary-bold",children:`${ve.driveTime}: `}),g]}),Ut(u)&&P("div",{className:"itinerary-check-in-time",children:[P("span",{className:"itinerary-bold",children:`${ve.checkInTime}: `}),u]})]}),Ht(p)&&P("div",{children:[P("div",{className:"itinerary-activity-heading",children:ve.activities}),p?.map(((e,t)=>((e,t)=>P("div",{style:m.activityCard,className:"itinerary-activity-container",children:[Ut(e.title)&&P("div",{className:"itinerary-activity-title",children:e.title}),P("div",{className:"itinerary-activity-description",children:e.description})]},t))(e,t)))]}),Ht(h)&&P(x,{children:[P("div",{className:"itinerary-activity-heading",children:ve.onSiteAmenities}),P("div",{style:m.activityCard,className:"itinerary-amenities-container",children:P("div",{className:"itinerary-activity-description",children:f})})]})]})]})};Nn(".itinerary-summary-container {\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  width: 75%;\n  height: 100%;\n  border: 1px solid #d2d2d2;\n  border-radius: 12px;\n  box-shadow: 0px 1px 2px 0px #1018280f;\n  padding: 10px;\n  line-height: 18px;\n  font-size: 12px;\n}\n\n.itinerary-summary-date {\n  margin-bottom: 10px;\n}\n\n.itinerary-summary-travelers {\n  margin-bottom: 10px;\n}\n\n.itinerary-summary-stay {\n  margin-bottom: 10px;\n}\n\n.itinerary-summary-container .bold {\n  font-weight: 600;\n}\n");const Ti=e=>{const{itinerarySummary:t,settings:n}=e,{dates:r,travelers:i,stays:o,estimatedCost:s}=t||{},a={backgroundColor:n?.theme?.cardColor},l=fn((()=>o?.join(", ")),[o]);return P("div",{className:"itinerary-summary-container",style:a,"data-testId":"itinerary-summary-card",children:[Ut(r)&&P("div",{className:"itinerary-summary-date",children:[P("span",{className:"bold",children:[ve.dates,": "]}),r]}),Ut(i)&&P("div",{className:"itinerary-summary-travelers",children:[P("span",{className:"bold",children:[ve.travelers,": "]}),i]}),Ht(o)&&P("div",{className:"itinerary-summary-stay",children:[P("span",{className:"bold",children:[ve.stay,": "]}),l]}),Ut(s)&&P("div",{children:[P("span",{className:"bold",children:[`${ve.estimatedCost} (${ve.approximately}): `," "]}),s]})]})};Nn(".multi-day-itinerary-container {\n  display: flex;\n  flex-direction: column;\n  width: 210px;\n  justify-content: space-between;\n  height: fit-content;\n  border: 1px solid #d2d2d2;\n  border-radius: 12px;\n  box-shadow: 0px 1px 2px 0px #1018280f;\n  padding: 10px;\n  font-size: 12px;\n  line-height: 16px;\n}\n\n.activity-container {\n  padding-top: 10px;\n}\n\n.multi-day-itinerary-content {\n  padding-bottom: 0px;\n}\n\n.min-itinerary-content-height {\n  min-height: 270px;\n}\n\n.multi-day-resort-image {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n}\n\n.multi-day-resort-image-container {\n  height: 90px;\n  border-radius: 8px;\n  overflow: hidden;\n}\n\n.multi-day-resort-day-range {\n  font-size: 12px;\n  font-weight: 600;\n  padding: 1px 8px;\n  border-radius: 20px;\n  margin-right: 5px;\n  line-height: 18px;\n  min-width: fit-content;\n  text-align: center;\n}\n\n.multi-day-resort-title {\n  font-size: 12px;\n  font-weight: 600;\n  display: -webkit-box;\n  -webkit-line-clamp: 3;\n  line-clamp: 3;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  line-height: 18px;\n}\n\n.multi-day-resort-stay {\n  font-size: 12px;\n  font-weight: 600;\n  display: -webkit-box;\n  -webkit-line-clamp: 3;\n  line-clamp: 3;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  margin-top: 8px;\n}\n\n.multi-day-location-icon {\n  width: 16px;\n  height: 16px;\n  margin-right: 4px;\n}\n\n.multi-day-site-icon {\n  width: 16px;\n  height: 16px;\n  margin-right: 4px;\n}\n\n.multi-day-bed-icon {\n  width: 16px;\n  height: 16px;\n  margin-right: 4px;\n}\n\n.multi-day-resort-details-row {\n  display: flex;\n  align-items: flex-start;\n  flex-direction: row;\n  margin-top: 8px;\n  line-height: 18px;\n}\n\n.multi-day-resort-description {\n  margin-bottom: 12px;\n}\n\n.multi-day-resort-lodging-features {\n  margin-bottom: 12px;\n  display: -webkit-box;\n  -webkit-line-clamp: 3;\n  line-clamp: 2;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.multi-day-resort-location {\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  line-clamp: 2;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.multi-day-bold {\n  font-weight: 600;\n}\n\n.multi-day-resort-price-details {\n  margin-bottom: 12px;\n}\n\n.multi-day-itinerary-price-details {\n  margin-bottom: 8px;\n  width: 100%;\n  text-align: right;\n}\n\n.multi-day-show-more {\n  display: flex;\n  align-items: center;\n  cursor: pointer;\n  color: #3d5a75;\n  font-size: 13px;\n  font-weight: 500;\n  line-height: 16px;\n  margin-bottom: 4px;\n}\n\n.multi-day-show-more .show-more-text {\n  margin-right: 4px;\n}\n\n.multi-day-show-more .show-more-icon {\n  display: inline-block;\n  width: 6px;\n  height: 6px;\n  border: solid #3d5a75;\n  border-width: 0 2px 2px 0;\n  transform: rotate(45deg);\n  margin-top: -2px;\n  transition: transform 0.3s ease;\n}\n\n.multi-day-show-more .show-less-icon {\n  display: inline-block;\n  width: 6px;\n  height: 6px;\n  border: solid #3d5a75;\n  border-width: 0 2px 2px 0;\n  transform: rotate(-135deg);\n  margin-top: 4px;\n  transition: transform 0.3s ease;\n}\n\n.multi-day-activity-container {\n  display: flex;\n  flex-direction: column;\n}\n\n.multi-day-activity-heading {\n  margin-top: 8px;\n  margin-bottom: 12px;\n  font-size: 12px;\n  font-weight: 600;\n}\n\n.multi-day-activity-title {\n  font-size: 12px;\n  font-weight: 600;\n  margin-bottom: 4px;\n}\n\n.multi-day-activity-description {\n  font-size: 12px;\n  margin-bottom: 8px;\n}\n\n.multi-day-activity-image {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n}\n\n.multi-day-activity-image-container {\n  width: 60px;\n  height: 56px;\n  border-radius: 8px;\n  border: 0px;\n  overflow: hidden;\n  margin-right: 5px;\n}\n\n.multi-day-resort-details-rows {\n  display: flex;\n  flex-direction: row;\n  margin-bottom: 8px;\n}\n\n.multi-day-activity-content {\n  display: flex;\n  flex-direction: column;\n  width: calc(100% - 60px);\n  padding-left: 5px;\n}\n\n.fullHeight {\n  height: 100%;\n}\n");const Ii=e=>{const{multiDayItineraryData:t,settings:n,updateNoOfExpandedCards:r=()=>{},numberOfExpandedCards:i=0,isDisabled:o,cardNumber:s,totalCards:a}=e,[l,c]=hn(!1),d=n?.theme||Ce,{imageUrl:u,title:p,location:h,description:g,stay:m,lodgingFeatures:f,activities:b=[],nightlyPrice:x}=t||{},{location:y,siteIcon:w,bedIcon:_}=n?.assets||{},v={button:{backgroundColor:d.primaryColor,color:ye},container:{backgroundColor:d.cardColor},dateRange:{backgroundColor:d.chatWindowColor},resortImage:{backgroundColor:we},fullHeight:{height:"95%"}},k=e=>{c(e),r(e?1:-1)},N=fn((()=>x?P("div",{className:"multi-day-itinerary-price-details",children:[P("span",{className:"bold",children:` ${x} /`}),ve.night]}):null),[x]),S=fn((()=>f?.join(", ")),[f]),E=P("div",{class:"multi-day-show-more","data-testid":"show-more",onClick:()=>k(!0),children:[P("span",{class:"show-more-text",children:ve.showMoreActivity}),P("span",{class:"show-more-icon"})]}),C=P("div",{class:"multi-day-show-more","data-testid":"show-less",onClick:()=>k(!1),children:[P("span",{class:"show-more-text",children:ve.showLessActivity}),P("span",{class:"show-less-icon"})]});return P("div",{className:`multi-day-itinerary-container ${0===i&&"fullHeight"} ${o&&a===s&&"card-container-animation"}`,style:v.container,"data-testId":"multi-day-itinerary-card",children:[P("div",{children:[P("div",{className:`multi-day-itinerary-content  ${0!=i&&!l&&"min-itinerary-content-height"}`,children:[P("div",{style:v.resortImage,className:"multi-day-resort-image-container",children:P(ki,{alt:p,customClass:"multi-day-resort-image",image:u,settings:n})}),Ut(m)&&P("div",{className:"multi-day-resort-stay",children:[ve.stay,": ",m]}),Ut(h)&&P("div",{className:"multi-day-resort-details-row",children:[P("img",{src:y,className:"multi-day-location-icon",alt:"location-icon"}),P("div",{className:"multi-day-resort-location",children:h})]}),Ut(g)&&P("div",{className:"multi-day-resort-details-row",children:[P("img",{src:_,alt:"site-icon",className:"multi-day-site-icon"}),P("div",{className:"multi-day-resort-features",children:g})]}),Ut(S)&&P("div",{className:"multi-day-resort-details-row",children:[P("img",{src:w,alt:"site-icon",className:"multi-day-site-icon"}),P("div",{className:"multi-day-resort-features",children:S})]}),N]}),l&&P("div",{className:"activity-container",children:[P("div",{className:"multi-day-activity-heading",children:ve.activities}),b?.map(((e,t)=>((e,t)=>P("div",{className:"multi-day-activity-container",children:P("div",{className:"multi-day-resort-details-rows",children:[P("div",{style:v.resortImage,className:"multi-day-activity-image-container",children:P(ki,{alt:e?.title,customClass:"multi-day-activity-image",image:e?.imageUrl,settings:n})}),P("div",{className:"multi-day-activity-content",children:[P("div",{className:"multi-day-activity-title",children:e.title}),P("div",{className:"multi-day-activity-description",children:e.description})]})]})},t))(e,t)))]})]}),P("div",{className:"show-more-container",children:Ht(b)&&(l?C:E)})]})};Nn(".resort-card-container {\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  width: 200px;\n  height: 100%;\n  border: 1px solid #d2d2d2;\n  border-radius: 12px;\n  box-shadow: 0px 1px 2px 0px #1018280f;\n  padding: 10px;\n}\n\n.resort-image {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n}\n\n.resort-card-image-container {\n  height: 90px;\n  border-radius: 8px;\n  overflow: hidden;\n}\n\n.resort-details {\n  padding-top: 10px;\n  line-height: 16px;\n}\n\n.resort-name {\n  font-size: 12px;\n  font-weight: 600;\n  margin: 0 0 8px;\n  display: -webkit-box;\n  -webkit-line-clamp: 3;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.resort-location {\n  font-size: 12px;\n  margin: 0 0 12px;\n  display: -webkit-box;\n  -webkit-line-clamp: 3;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.resort-features {\n  font-size: 12px;\n  margin: 0 0 12px;\n  display: -webkit-box;\n  -webkit-line-clamp: 8;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.resort-price p {\n  font-size: 12px !important;\n  font-weight: 500 !important;\n  text-align: right;\n  line-height: 16px;\n  margin-bottom: 8px;\n}\n\n.resort-button {\n  display: flex;\n  width: 100%;\n  min-height: 32px;\n  text-align: center;\n  justify-content: center;\n  align-items: center;\n  border: 1px solid;\n  border-radius: 2000px;\n  font-size: 13px;\n  font-weight: 500;\n  line-height: 16px;\n  cursor: pointer;\n}\n\n.location-icon {\n  width: 16px;\n  height: 16px;\n  margin-right: 4px;\n}\n\n.site-icon {\n  width: 16px;\n  height: 16px;\n  margin-right: 4px;\n}\n\n.resort-details-row {\n  display: flex;\n  flex-direction: row;\n  align-items: flex-start;\n}\n\n.number-badge {\n  position: absolute;\n  display: flex;\n  top: -7px;\n  left: -7px;\n  justify-content: center;\n  align-items: center;\n  width: 20px;\n  height: 20px;\n  border-radius: 50%;\n  font-size: 12px;\n  font-weight: 500;\n  margin-right: 4px;\n}\n");const Ai=e=>{const{resortCardData:t={},settings:n,isDisabled:r,cardNumber:i,isSiteCard:o=!1,totalCards:s}=e,{location:a,siteIcon:l}=n?.assets||{},c=n?.theme||Ce,d=n?.chatLinkConfig?.openInNewTab,{imageUrl:u,name:p,location:h,features:g,button:m,availableSitesCount:f,priceInformation:b}=t,x={button:{backgroundColor:c.primaryColor,color:ye,borderColor:c.primaryColor,transition:"background-color 0.3s ease"},buttonHover:{borderColor:c.primaryColor,backgroundColor:ye,color:c.primaryColor,transition:"background-color 0.3s ease"},container:{backgroundColor:c.cardColor},badge:{backgroundColor:c.primaryColor,color:ye},resortImage:{backgroundColor:we}},y=fn((()=>o?`${f} ${ve.locationsAvailable}`:h),[f,o,h]),w=fn((()=>!("number"!=typeof f&&"string"!=typeof f||!o)||!(!Ut(h)||o)),[f,o,h]),_=fn((()=>i?P("div",{style:x.badge,className:"number-badge",children:i}):null),[i]);return P("div",{className:`resort-card-container ${r&&s===i&&"card-container-animation"}`,style:x.container,"data-testId":"resort-card",children:[_,P("div",{children:[P("div",{style:x.resortImage,className:"resort-card-image-container",children:P(ki,{alt:p,customClass:"resort-image",image:u?.[0],settings:n})}),P("div",{className:"resort-details",children:[Ut(p)&&P("div",{className:"resort-name",children:p}),w&&P("div",{className:"resort-details-row",children:[P("img",{src:a,alt:"location-icon",className:"location-icon"}),P("div",{className:"resort-location",children:y})]}),Ut(g)&&P("div",{className:"resort-details-row",children:[P("img",{src:l,alt:"site-icon",className:"site-icon"}),P("div",{className:"resort-features",children:g})]})]})]}),P("div",{children:[o&&b&&(v=b,P("div",{id:`site-price-container-${i}`,className:"resort-price",dangerouslySetInnerHTML:{__html:Tr(v)}})),!o&&Ut(m?.label)&&P(Ir,{disabled:r,text:m?.label||"",className:"resort-button","data-testid":"resort-button",handleClick:()=>{const e={...pt,label:p};Gt(e,n?.PushToGTM_global),window.open(m?.url,d?ft:mt)},customStyle:x.button,hoveredStyle:x.buttonHover})]})]});var v};Nn(".resort-details-card-container {\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  width: 73%;\n  height: 100%;\n  border: 1px solid #d2d2d2;\n  border-radius: 12px;\n  box-shadow: 0px 1px 2px 0px #1018280f;\n  padding: 10px;\n}\n\n.resort-details-image {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n}\n\n.resort-details-image-container {\n  width: 100%;\n  height: 90px;\n  border-radius: 8px;\n  overflow: hidden;\n}\n\n.resort-details-image-container-large {\n  height: 150px !important;\n}\n\n.resort-details-data {\n  padding-top: 10px;\n  line-height: 16px;\n}\n\n.more-resort-data {\n  max-height: 0;\n  overflow: hidden;\n  transition:\n    max-height 0.5s ease-out,\n    opacity 0.3s ease-out;\n}\n.more-resort-data.expanded {\n  max-height: 200px;\n  transition:\n    max-height 0.5s ease-in,\n    opacity 0.3s ease-in;\n}\n\n.resort-title {\n  font-size: 14px;\n  font-weight: 600;\n  margin: 0 0 8px;\n  display: -webkit-box;\n  -webkit-line-clamp: 3;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.resort-description {\n  font-size: 12px;\n  margin: 0 0 18px;\n}\n\n.resort-lodging-features {\n  font-size: 12px;\n  margin: 0 0 18px;\n}\n\n.resort-details .bold {\n  font-weight: 600;\n}\n\n.resort-price-details {\n  font-size: 12px;\n  margin: 0 0 12px;\n}\n\n.resort-price-details p {\n  font-weight: 400 !important;\n  font-size: 12px !important;\n  line-height: 16px !important;\n}\n\n.resort-details-prefix {\n  font-size: 14px;\n  font-weight: 700;\n  margin-bottom: 10px;\n  line-height: 18px;\n}\n\n.show-more {\n  display: flex;\n  align-items: center;\n  cursor: pointer;\n  color: #3d5a75;\n  font-size: 13px;\n  font-weight: 500;\n  line-height: 16px;\n  margin-bottom: 4px;\n}\n\n.show-more-text {\n  margin-right: 4px;\n}\n\n.bold {\n  font-weight: 600;\n}\n\n.show-more-icon {\n  display: inline-block;\n  width: 6px;\n  height: 6px;\n  border: solid #3d5a75;\n  border-width: 0 2px 2px 0;\n  transform: rotate(45deg);\n  margin-top: -2px;\n  transition: transform 0.3s ease;\n}\n\n.show-less-icon {\n  display: inline-block;\n  width: 6px;\n  height: 6px;\n  border: solid #3d5a75;\n  border-width: 0 2px 2px 0;\n  transform: rotate(-135deg);\n  margin-top: 4px;\n  transition: transform 0.3s ease;\n}\n");const Oi=e=>{const{resortCardData:t,settings:n,isLarge:r}=e,[i,o]=hn(!1),s=n?.theme||Ce,{imageUrl:a,title:l,description:c,lodgingFeatures:d,size:u,prefixText:p,detailedPriceInformation:h}=t||{},g={button:{backgroundColor:s.primaryColor,color:ye},container:{backgroundColor:s.cardColor},imageContainer:{backgroundColor:we},resortImage:{backgroundColor:we}},m=fn((()=>d?.join(", ")),[d]),f=P("div",{class:"show-more",onClick:()=>o(!0),children:[P("span",{class:"show-more-text",children:ve.showMore}),P("span",{class:"show-more-icon"})]}),b=P("div",{class:"show-more",onClick:()=>o(!1),children:[P("span",{class:"show-more-text",children:ve.showLess}),P("span",{class:"show-less-icon"})]});return P("div",{className:"resort-details-card-container",style:g.container,"data-testId":"resort-card",children:[Ut(p)&&P("div",{className:"resort-details-prefix",children:p}),P("div",{style:g.resortImage,className:`resort-details-image-container ${r&&"resort-details-image-container-large"}`,children:P(ki,{alt:l||ve.resortImage,customClass:"resort-details-image",image:a?.[0],settings:n})}),P("div",{className:"resort-details-data",children:[Ut(l)&&P("div",{className:"resort-title",children:l}),Ut(c)&&P("div",{className:"resort-description",children:c}),Ut(m)&&P("div",{className:"resort-lodging-features",children:[P("span",{className:"bold",children:[ve.lodgingFeatures,": "]}),m]}),P("div",{className:"more-resort-data "+(i?"expanded":""),children:[Ut(u)&&P("div",{className:"resort-lodging-features",children:[P("span",{className:"bold",children:[ve.size,": "]}),u]}),Ut(h)&&(e=>{if(e)return P("div",{className:"resort-price-details",dangerouslySetInnerHTML:{__html:Tr(e)}})})(h)]})]}),(Ut(h)||Ut(u))&&(i?b:f)]})};Nn(".resort-summary-container {\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  width: 75%;\n  height: 100%;\n  border: 1px solid #d2d2d2;\n  border-radius: 12px;\n  box-shadow: 0px 1px 2px 0px #1018280f;\n  padding: 10px;\n  line-height: 18px;\n  font-size: 12px;\n}\n\n.resort-summary-title {\n  font-weight: 700;\n  font-size: 14px;\n  margin-bottom: 8px;\n}\n\n.resort-summary-details {\n  font-weight: 400;\n  font-size: 12px;\n  line-height: 18px;\n}\n\n.resort-summary-details .bold {\n  font-weight: 600;\n}\n");const Mi=e=>{const{resortSummary:t,settings:n}=e,{resort:r,arrival:i,departure:o,guests:s,pets:a}=t||{},l=e=>{if(e){const t=new Date(e).getDate(),n=`${t}${(e=>{if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}})(t)}`;return`${n} ${kt(e,"mmm, yyyy")}`}return""};return P("div",{className:"resort-summary-container",style:{backgroundColor:n?.theme?.cardColor},"data-testId":"resort-summary-card",children:[P("div",{className:"resort-summary-title",children:[ve.summary,": "]}),Ut(r)&&P("div",{className:"resort-summary-details",children:[P("span",{className:"bold",children:[ve.resort,": "]}),r]}),Ut(i)&&P("div",{className:"resort-summary-details",children:[P("span",{className:"bold",children:[ve.arrival,": "]}),l(i)]}),Ut(o)&&P("div",{className:"resort-summary-details",children:[P("span",{className:"bold",children:[ve.departure,": "]}),l(o)]}),"number"==typeof s&&P("div",{className:"resort-summary-details",children:[P("span",{className:"bold",children:[ve.guests,": "]}),s]}),"number"==typeof a&&a>0&&P("div",{className:"resort-summary-details",children:[P("span",{className:"bold",children:[ve.pets,": "]}),a]})]})};Nn(".retry {\n  display: flex;\n  flex-direction: row;\n  font-size: 12px;\n  font-weight: 400;\n  align-items: center;\n}\n\n.retry-label {\n  opacity: 60%;\n}\n\n.retry-error-icon {\n  height: 12px;\n  width: 13.68px;\n  margin-right: 8px;\n}\n\n.retry-cta {\n  cursor: pointer;\n  margin-left: 4px;\n  display: flex;\n  flex-direction: row;\n  gap: 2px;\n  align-items: center;\n}\n\n.retry-icon {\n  width: 12px;\n  height: 12px;\n}\n\n.cta-label {\n  text-decoration: underline;\n  opacity: 1;\n}\n");const Di=e=>{const{settings:t,label:n,ctaIcon:r,ctaLabel:i,ctaFunction:o,customClass:s}=e,a={ctaLabel:{color:t?.theme?.primaryColor}};return P("div",{className:`${s} retry`,"data-testid":"retry-component",children:[P("img",{src:t?.assets?.errorIcon,alt:"error",className:"retry-error-icon"}),P("div",{className:"retry-label",children:n}),P("div",{onClick:()=>{o&&(zt.info(Ge),o())},className:"retry-cta",children:[P("img",{src:r,alt:"retry",className:"retry-icon"}),P("div",{className:"cta-label",style:a.ctaLabel,children:i})]})]})};Nn(".trip-summary-container {\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  width: 75%;\n  height: 100%;\n  border: 1px solid #d2d2d2;\n  border-radius: 12px;\n  box-shadow: 0px 1px 2px 0px #1018280f;\n  padding: 10px;\n  line-height: 18px;\n  font-size: 12px;\n}\n\n.trip-summary-title {\n  font-weight: 700;\n  font-size: 14px;\n}\n\n.trip-summary-details {\n  margin-top: 10px;\n  font-weight: 400;\n  font-size: 12px;\n  line-height: 16px;\n}\n\n.trip-summary-details .bold {\n  font-weight: 600;\n}\n");const Li=e=>{const{tripSummary:t,settings:n}=e,{title:r,fromLocation:i,toLocation:o,distance:s,stays:a,estimatedCost:l}=t||{},c={backgroundColor:n?.theme?.cardColor},d=fn((()=>a?.join(", ")),[a]);return P("div",{className:"trip-summary-container",style:c,"data-testId":"trip-summary-card",children:[P("div",{className:"trip-summary-title",children:r||ve.tripSummary}),Ut(i)&&P("div",{className:"trip-summary-details",children:[P("span",{className:"bold",children:[ve.form,": "]}),i]}),Ut(o)&&P("div",{className:"trip-summary-details",children:[P("span",{className:"bold",children:[ve.to,": "]}),o]}),Ut(s)&&P("div",{className:"trip-summary-details",children:[P("span",{className:"bold",children:[ve.distance,": "]}),s]}),Ht(a)&&P("div",{className:"trip-summary-details",children:[P("span",{className:"bold",children:[ve.stay,": "]}),d]}),Ut(l)&&P("div",{className:"trip-summary-details",children:[P("span",{className:"bold",children:[`${ve.estimatedCost} (${ve.approximately}): `," "]}),l]})]})};Nn("@keyframes blink {\n  0% {\n    opacity: 0.12;\n    transform: scale(1);\n  }\n  21.43% {\n    opacity: 0.38;\n    transform: scale(1.2);\n  }\n  42.86% {\n    opacity: 0.12;\n    transform: scale(1);\n  }\n  100% {\n    opacity: 0.12;\n    transform: scale(1);\n  }\n}\n\n.dot-container {\n  align-items: center;\n  border-radius: 0px 10px 10px 10px;\n  display: flex;\n  gap: 6px;\n  justify-content: center;\n  padding: 16px 12px;\n  width: 50px;\n}\n\n.dot {\n  animation: blink 1.4s infinite;\n  animation-fill-mode: both;\n  border-radius: 50%;\n  height: 6px;\n  width: 6px;\n}\n\n.dot:nth-child(1) {\n  animation-delay: 0.4s;\n}\n\n.dot:nth-child(2) {\n  animation-delay: 0.6s;\n}\n\n.dot:nth-child(3) {\n  animation-delay: 0.8s;\n}\n");const zi=e=>{const{theme:t}=e;return P("div",{className:"dot-container",style:{backgroundColor:t.chatBubbleColor},"data-testId":"typing-bubble",children:Array.from({length:3},((e,n)=>P("span",{className:"dot",style:{backgroundColor:t?.textColor}},n)))})};function $i(e,t){const n=[];for(let r=0;r<e.length;r+=t)n.push(e.slice(r,r+t));return n}Nn(".chat-bot-message-container {\n  width: calc(100% -40px);\n  align-items: flex-start;\n}\n\n.chat-row {\n  display: flex;\n  flex-direction: row;\n  align-items: start;\n}\n\n.message-and-welcome-suggestion {\n  display: flex;\n  flex-direction: column;\n  max-width: 75%;\n  gap: 12px;\n}\n\n.chat-message {\n  padding: 10px;\n  border-radius: 10px;\n  overflow: hidden;\n  position: relative;\n  word-wrap: break-word;\n  overflow-wrap: break-word;\n  width: fit-content;\n}\n\n.bot-message {\n  padding: 12px;\n  position: relative;\n  border-top-left-radius: 0;\n  width: fit-content;\n}\n\n.chat-timestamp {\n  font-size: 11px;\n  margin-top: 5px;\n}\n\n.bot-retry {\n  font-size: 12px;\n  margin-top: 3px;\n  margin-left: 40px;\n  margin-bottom: 12px;\n}\n\n.chat-bot-timestamp {\n  font-size: 12px;\n  margin-top: 3px;\n  margin-left: 40px;\n  opacity: 60%;\n  margin-bottom: 12px;\n}\n\n.bot-avatar {\n  width: 32px;\n  height: 32px;\n  margin-right: 6px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border-radius: 50%;\n  overflow: hidden;\n}\n\n.bot-avatar img {\n  width: 20px;\n  height: 20px;\n  font-size: 6px;\n}\n\n.resorts-carousel-container {\n  display: flex;\n  flex-direction: row;\n  margin-top: 10px;\n  overflow-x: auto;\n  padding-bottom: 20px;\n}\n\n.resort-listing-card-container {\n  margin-right: 10px;\n}\n\n.event-listing-card-container {\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n  margin-right: 8px;\n}\n\n.json-message-container {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n  width: calc(100% - 50px);\n}\n\n.no-gap {\n  gap: 0px !important;\n}\n\n@media only screen and (max-width: 600px) {\n  .message-and-welcome-suggestion {\n    max-width: 75%;\n  }\n}\n\n/* Add the following styles for overwrite markdown styles from chatbot */\n.bot-message h1 {\n  font-size: 18px;\n  line-height: 23px;\n  font-weight: 700;\n  padding: 0px;\n  margin: 0px;\n}\n\n.bot-message h2 {\n  font-size: 17px;\n  line-height: 22px;\n  font-weight: 600;\n  padding: 0px;\n  margin: 0px;\n}\n\n.bot-message h3 {\n  font-size: 16px;\n  line-height: 21px;\n  font-weight: 600;\n  padding: 0px;\n  margin: 0px;\n}\n\n.bot-message img {\n  max-width: 80%;\n  resize: contain;\n}\n\n.bot-message p {\n  font-size: 15px;\n  line-height: 21px;\n  font-weight: 400;\n  padding: 0px;\n  margin: 0;\n}\n\n.bot-message table {\n  border-collapse: collapse;\n  border: 1px solid black;\n  margin: 6px;\n}\n\n.bot-message table td,\nth {\n  border: 1px solid black;\n  padding: 8px;\n}\n\n.bot-message ol {\n  font-size: 15px;\n  line-height: 21px;\n  font-weight: 400;\n  padding: 0px;\n  padding-left: 16px;\n  padding-bottom: 3px;\n  margin: 0px;\n}\n.bot-message ul {\n  font-size: 15px;\n  line-height: 21px;\n  font-weight: 400;\n  padding: 0px;\n  padding-left: 16px;\n  padding-bottom: 3px;\n  margin: 0px;\n}\n\n.bot-message li {\n  font-size: 15px;\n  line-height: 21px;\n  font-weight: 400;\n  padding: 0px;\n  padding-left: 4px;\n  padding-bottom: 3px;\n  margin: 0px;\n}\n\n.bot-message a {\n  color: #0076ce;\n  font-weight: 600;\n  text-decoration: none;\n  border-bottom: none;\n}\n\n.bot-message a:hover {\n  color: #0076ce;\n}\n\n.message-feedback-container {\n  width: 80%;\n}\n\n.bot-typing-bubble {\n  margin-top: -6px;\n}\n");const Pi=e=>{const{message:t,index:n,theme:r,assets:i,settings:o,jsonMessageData:s,onClickActionChip:a,isStreaming:l,setSuggestions:c,showSuggestions:d=!1,backendBaseUrl:u,isExpanded:p,updateMessages:h,handleRetry:g}=e,{errorCode:m,prefixText:f,summary:b,itinerarySummary:x,resortSummary:y,resorts:w,sites:_,events:v,resortCard:k,itineraryData:N,trip:S,eventDetailsCard:E,isMultiple:C=!1,bookingMessage:R,bookings:T,postfixText:I,message:A}=s,O={bubble:{backgroundColor:r.chatBubbleColor,color:r.textColor,maxHeight:"fit-content"},showMoreButton:{color:r.primaryColor},botAvatarBg:{backgroundColor:r.primaryColor}},[M,D]=hn(0),[L,z]=hn(Mt({key:Nt.LATEST_RATED_MESSAGE})||"");gn((()=>(window.addEventListener("storage",B),()=>{window.removeEventListener("storage",B)})),[]),gn((()=>{s?.suggestions&&c&&c(s?.suggestions)}),[s]);const $=fn((()=>!Bt(s)||!gt?.some((e=>Object.prototype.hasOwnProperty.call(s,e)))),[s,gt]);if(!t)return null;const B=e=>{e.key===Nt.LATEST_RATED_MESSAGE&&z(Mt({key:Nt.LATEST_RATED_MESSAGE})||"")},H=async e=>{try{const n=await Zt(`${Ut(u)?u:"https://keyvalue-core-svc.milestonedev.info"}/${nt}/feedback`,ke.POST,{feedback:e,runId:t?.messageId}),r={messageId:t?.messageId||"",feedback:n?.feedback};return Ft(n?.feedback)&&(e=>{const t=Mt({key:Nt.MESSAGES}),n=JSON.parse(t||"[]").map((t=>t?.aiMessage?.messageId!==e.messageId?t:(Dt({key:Nt.LATEST_RATED_MESSAGE,value:JSON.stringify({messageId:t?.aiMessage?.messageId,feedback:e.feedback})}),{...t,aiMessage:{...t.aiMessage,feedback:e.feedback}})));Dt({key:Nt.MESSAGES,value:JSON.stringify(n)})})(r),h&&h(r),n?.feedback}catch(e){return zt.error(JSON.stringify({...Se[Ee.GENERIC_API_ERROR],error:e})),null}},U=e=>{D(M+e)},j=e=>(!0===o?.chatLinkConfig?.openInNewTab&&(e=Tr(e).replace(/<a /g,'<a target="_blank" ')),P("div",{className:`${t?.failed&&"failed-message"} message-and-welcome-suggestion ${l&&"no-click"}`,children:[P("div",{className:"chat-message bot-message",style:O.bubble,children:P("div",{id:`marked-text-container-${n}`,dangerouslySetInnerHTML:{__html:Tr(e)}})}),t?.type===We&&a&&d&&P(En,{settings:o,onClickActionChip:a,chipsItemsList:o?.actionPromptsList}),t?.messageStructure===St.MARKDOWN&&F&&P(Ci,{settings:o,feedbackData:{feedback:t?.feedback},onFeedbackSubmit:H,isDisabled:l})]})),F=fn((()=>!(!t?.shouldShowFeedback||!Bt(s))&&Object.keys(s).every((e=>!lt.includes(e)))),[t?.shouldShowFeedback,s]),G=fn((()=>{try{if(Bt(s)){const e=JSON.parse(L||"{}");let n=t?.feedback;return e?.messageId===t?.messageId&&(n=e?.feedback),Object.keys(s).map((e=>lt.includes(e)?P(Ei,{feedbackData:{feedback:n},settings:o,onFeedbackSubmit:H}):null))}}catch{return null}}),[L,s,t?.feedback,t?.shouldShowFeedback]);return P("div",{className:"chat-bot-message-container","data-testId":"chat-bot-message-bubble",children:[P("div",{className:"chat-row",children:[P("div",{style:O.botAvatarBg,className:"bot-avatar",children:P("img",{src:i?.logo,alt:"bot icon"})}),t?.messageStructure===St.MARKDOWN?j(t.text):(()=>{try{return P("div",{className:`${t?.failed&&"failed-message"} json-message-container ${(m||$)&&"no-gap"}`,children:[f&&j(f),b&&P(Li,{settings:o,tripSummary:b}),x&&P(Ti,{settings:o,itinerarySummary:x}),y&&P(Mi,{settings:o,resortSummary:y}),w&&P(vi,{theme:r,assets:i,settings:o,noOfCards:w?.length,children:w?.map(((e,t)=>P("div",{className:"resort-listing-card-container embla_slide",children:P(Ai,{settings:o,isDisabled:l,resortCardData:e,totalCards:w?.length,cardNumber:t+1})})))}),_&&P(vi,{theme:r,assets:i,settings:o,noOfCards:_?.length,children:_?.map(((e,t)=>P("div",{className:"resort-listing-card-container embla_slide",children:P(Ai,{settings:o,isDisabled:l,resortCardData:e,cardNumber:t+1,isSiteCard:!0,totalCards:_?.length})})))}),v&&P(vi,{theme:r,assets:i,settings:o,noOfCards:v?.length,children:$i(v,5).map(((e,t)=>P("div",{className:"event-listing-card-container embla_slide",children:e.map(((e,n)=>P(Ni,{settings:o,eventCardData:e,isStreaming:l,totalEvents:v.length,cardNumber:5*t+(n+1)})))})))}),k&&P(Oi,{settings:o,resortCardData:k,isDisabled:l,isLarge:p}),N&&P(vi,{theme:r,assets:i,settings:o,noOfCards:N?.length,children:N?.map(((e,t)=>P("div",{className:"resort-listing-card-container",children:P(Ri,{settings:o,itineraryData:e,isDisabled:l,cardNumber:t+1,totalCards:N?.length})})))}),S&&P(vi,{theme:r,assets:i,settings:o,noOfCards:S?.length,children:S?.map(((e,t)=>P("div",{className:"resort-listing-card-container",children:P(Ii,{settings:o,isDisabled:l,cardNumber:t+1,totalCards:S?.length,multiDayItineraryData:e,numberOfExpandedCards:M,updateNoOfExpandedCards:U})})))}),E&&P(Si,{eventDetailsData:E,settings:o,isLarge:p}),Ht(T)&&!C&&P(Ar,{bookNowData:{label:R,buttonLabel:T[0]?.button?.label,link:T[0]?.button?.bookingUrl,resortName:T[0]?.resortName},settings:o,isDisabled:l}),Ht(T)&&C&&P(Br,{settings:o,bookResortsData:{bookingMessage:R,bookings:T},isStreaming:l}),P("div",{className:"message-feedback-container",children:F&&P(Ci,{settings:o,feedbackData:{feedback:t?.feedback},onFeedbackSubmit:H,isDisabled:l})}),I&&j(I),m&&j(A),$&&(l?P("div",{className:"bot-typing-bubble",children:P(zi,{theme:o?.theme||Ce})}):j(Se[Ee.ERROR_IN_PARSING]?.message))]})}catch{return zt.error(JSON.stringify({...Se[Ee.ERROR_IN_PARSING],info:{fileName:"botMessage.tsx",functionName:"renderJsonMessage"}})),j(Se[Ee.ERROR_IN_PARSING]?.message)}})()]}),t?.failed?P(Di,{settings:o,label:ve.errorGeneratingResponse,ctaFunction:g,ctaLabel:ve.regenerate,customClass:"bot-retry",ctaIcon:o?.assets?.regenerateIcon}):P("div",{className:"chat-bot-timestamp",children:kt(t?.timestamp,"h:MM TT")}),!l&&t?.shouldShowFeedback&&G]},n)};Nn(".chat-user-message-container {\n  width: calc(100% - 40px);\n  align-items: flex-end;\n  margin-left: 40px;\n}\n\n.user-chat-row {\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-end;\n}\n\n.chat-user-message {\n  padding: 10px;\n  border-radius: 10px;\n  border-top-right-radius: 0;\n  max-width: 70%;\n  overflow: hidden;\n  position: relative;\n  word-wrap: break-word;\n  overflow-wrap: break-word;\n}\n\n.user-message {\n  border-top-right-radius: 0;\n}\n\n.chat-user-timestamp {\n  font-size: 12px;\n  margin-top: 3px;\n  opacity: 60%;\n  margin-bottom: 12px;\n  margin-right: 42px;\n  text-align: end;\n}\n\n.failed-message {\n  opacity: 0.5;\n}\n\n.user-retry {\n  font-size: 12px;\n  margin-top: 3px;\n  margin-bottom: 12px;\n  margin-right: 42px;\n  justify-content: end;\n}\n\n.user-avatar {\n  width: 32px;\n  height: 32px;\n  margin-left: 5px;\n  border-radius: 50%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  overflow: hidden;\n}\n\n.user-avatar img {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n  font-size: 6px;\n}\n.chat-date {\n  width: 100%;\n  text-align: center;\n  font-size: 12px;\n  opacity: 60%;\n  margin-bottom: 15px;\n}\n");const Bi=e=>{const{message:t,index:n,theme:r,assets:i,settings:o,onClickActionChip:s,isExpanded:a,isStreaming:l,setSuggestions:c,showSuggestions:d,updateMessages:u,handleRetry:p}=e,[h,g]=hn({}),m=t?.userMessage,f=t?.aiMessage,b=t?.dateMessage,y={bubble:{backgroundColor:r.primaryColor,color:ye,maxHeight:"fit-content"},bubbleBot:{backgroundColor:r.chatBubbleColor,color:r.textColor,maxHeight:"fit-content"},showMoreButton:{color:r.primaryColor},botAvatarBg:{backgroundColor:r.primaryColor},avatarImage:{backgroundColor:r.primaryColor},botIcon:{backgroundColor:o?.theme?.primaryColor}};gn((()=>{try{if(f?.messageStructure===St.JSON_TOKEN){const e=$r.parse(f?.text,$r.STR|$r.OBJ|$r.ARR|$r.NUM|$r.BOOL);g(e)}else if(f?.messageStructure===St.JSON)if(Ut(f?.text)){const e=$r.parse(f?.text,$r.STR|$r.OBJ|$r.ARR|$r.NUM|$r.BOOL);g(e)}else g(f?.text)}catch{zt.warn(Se[Ee.ERROR_IN_PARSING]?.message)}}),[t]);const w=()=>{p&&t&&p(t)};return P(x,{children:[b&&P("div",{className:"chat-date","data-testId":"message-date",children:b?.text},n),m&&P("div",{className:"chat-user-message-container","data-testId":"chat-user-message-bubble",children:[P("div",{className:`${m?.failed&&"failed-message"} user-chat-row`,children:[P("div",{className:"chat-user-message",style:y.bubble,children:m?.text}),P("div",{style:y.avatarImage,className:"user-avatar",children:P("img",{src:i?.avatar,alt:"user avatar"})})]}),m?.failed?P(Di,{settings:o,label:t?.userMessage?.isMessageSendClientError?ve.failedToSend:ve.somethingWentWrong,ctaFunction:w,ctaLabel:ve.retry,customClass:"user-retry",ctaIcon:o?.assets?.retryIcon}):P("div",{className:"chat-user-timestamp",children:kt(m?.timestamp,"h:MM TT")})]},n),f&&fn((()=>f?P(Pi,{isExpanded:a,message:f,index:n,theme:r,assets:i,settings:o,jsonMessageData:h,isStreaming:l,onClickActionChip:s,setSuggestions:c,showSuggestions:d,updateMessages:u,handleRetry:w}):null),[f,h,d,a]),!f?.text&&l?P("div",{className:"typing-row",children:[P("div",{style:y.botIcon,className:"bot-avatar",children:P("img",{src:o?.assets?.logo,alt:"bot icon",width:30,height:30})}),P(zi,{theme:o?.theme||Ce})]}):null]})};Nn(".popup-container {\n  position: fixed;\n  bottom: 20px;\n  right: 20px;\n  padding: 8px 12px;\n}\n\n.popup {\n  position: absolute;\n  bottom: 80px;\n  right: 10px;\n  width: 150px;\n  background-color: #fff;\n  color: #000;\n  border-radius: 8px;\n  padding: 10px 15px;\n  max-width: 200px;\n  font-size: 14px;\n  z-index: 10;\n}\n\n.popup::after {\n  content: '';\n  position: absolute;\n  bottom: -10px;\n  right: 20px;\n  width: 0;\n  height: 0;\n  border-left: 10px solid transparent;\n  border-right: 10px solid transparent;\n  border-top: 10px solid #fff;\n}\n\n.tooltip-close-button {\n  position: absolute;\n  top: -10px;\n  right: -10px;\n  width: 24px;\n  height: 24px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  border: none;\n  z-index: 1000;\n}\n\n.tooltip-close-icon {\n  cursor: pointer;\n}\n");const Hi=e=>{const{streaming:t,chatContainerRef:n,settings:r,handleChatContainerScroll:i,handleSendMessage:o,isApiMessagesLoading:s,messages:a=[],previousMessages:l=[],currentMessageData:c,currentEvent:d,isExpanded:u,setSuggestions:p,updateMessages:h,handleRetry:g}=e,m={display:{backgroundColor:r?.theme?.chatWindowColor}},f=e=>{o(e.messagePrompt)},b=fn((()=>{if(0===a?.length&&!c?.aiMessage?.text&&!t)return P("div",{className:"start-conversation",children:ve.empty_screen_message});const e=$t([...l,...a]);return e?.map(((n,i)=>P(Bi,{isExpanded:u,message:n,index:i,theme:r?.theme||Ce,event:d,assets:r?.assets,settings:r,isShowMoreVisible:i!==e.length-1,onClickActionChip:f,updateMessages:h,...i===e.length-1&&{setSuggestions:p},showSuggestions:!(1!==i||i!==e.length-1||t||n.userMessage),handleRetry:g})))}),[a,c,t,l,u]),y=fn((()=>P(x,{children:P(Bi,{message:c,index:-1,theme:r?.theme||Ce,assets:r?.assets,settings:r,isStreaming:t,setSuggestions:p,isExpanded:u,updateMessages:h,handleRetry:g})})),[t,c,u]);return P("div",{className:"chat-display",ref:n,style:m.display,onScroll:i,children:[s&&P("div",{className:"loading-older-messages",children:ve.loadingOlderMessages}),b,y]})};Nn(".popup-container {\n  position: fixed;\n  bottom: 40px;\n  right: 20px;\n  padding: 8px 12px;\n  z-index: 1000;\n}\n\n.popup {\n  position: absolute;\n  bottom: 80px;\n  right: 10px;\n  width: 172px;\n  background-color: #fff;\n  color: #000;\n  border-radius: 8px;\n  padding: 10px 15px;\n  max-width: 200px;\n  font-size: 14px;\n  z-index: 10;\n}\n\n.popup::after {\n  content: '';\n  position: absolute;\n  bottom: -10px;\n  right: 20px;\n  width: 0;\n  height: 0;\n  border-left: 10px solid transparent;\n  border-right: 10px solid transparent;\n  border-top: 10px solid #fff;\n}\n\n.tooltip-close-button {\n  position: absolute;\n  top: -10px;\n  right: -10px;\n  width: 24px;\n  height: 24px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  border: none;\n  z-index: 1000;\n}\n\n.tooltip-close-icon {\n  cursor: pointer;\n  height: 20px;\n  width: 20px;\n}\n");const Ui=e=>{const{settings:t,toggleChatWindow:n}=e,r=t?.assets?.botIcon||"",i=t?.assets?.botIconHover||"",[o,s]=hn(!0),[a,l]=hn(r),c={button:{bottom:t?.position?.bottom,right:t?.position?.right,backgroundColor:Ut(a)?"transparent":t?.theme?.primaryColor}};return P(x,{children:[o&&P("div",{className:"popup-container",children:P("div",{className:"popup",children:[ve.chatbot_tooltip_message,P("div",{className:"tooltip-close-button",onClick:()=>s(!1),children:P("img",{src:t?.assets?.closeIconTooltip,alt:"Close",className:"tooltip-close-icon"})})]})}),P("div",{className:"chatbot-button","data-testid":"chatbot-icon",style:c.button,onClick:n,children:P("img",{onMouseEnter:()=>l(i),onMouseLeave:()=>l(r),src:a,alt:"Chat",className:"chat-circle-icon"})})]})};Nn(".reset-popup-container {\n  border: none;\n  border-radius: 12px;\n  padding: 16px;\n  background-color: white;\n  width: 300px;\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n}\n\n.reset-header {\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n}\n\n.reset-title {\n  font-weight: 500;\n  font-size: 16px;\n}\n\n.reset-close {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  cursor: pointer;\n}\n\n.reset-close-icon {\n  height: 12px;\n  width: 12px;\n}\n\n.reset-confirmation {\n  font-weight: 400;\n  font-size: 12px;\n  line-height: 18px;\n}\n\n.reset-options {\n  display: flex;\n  flex-direction: row;\n  padding-top: 12px;\n  gap: 12px;\n}\n\n.reset-option-buttons {\n  height: 32px;\n  border: 1px;\n  cursor: pointer;\n  width: 100%;\n}\n");const ji=e=>{const{theme:t,handleReset:n,handleCancel:r,closeIcon:i=""}=e,o={filled:{backgroundColor:t.primaryColor,color:ye,borderRadius:"2000px",padding:"4px 16px",transition:"background-color 0.3s ease"},unfilled:{border:"solid 1px",backgroundColor:ye,color:t.primaryColor,borderRadius:"2000px",padding:"4px 16px",transition:"background-color 0.3s ease"}},s=fn((()=>i?.length?P("img",{src:i,alt:"close",className:"reset-close-icon"}):"X"),[i]);return P("div",{className:"reset-popup-container",children:[P("div",{className:"reset-header",children:[P("div",{className:"reset-title",children:ve.resetChat}),P("div",{onClick:r,className:"reset-close",children:s})]}),P("div",{className:"reset-confirmation",children:ve.resetChatConfirmation}),P("div",{className:"reset-options",children:[P("div",{className:"reset-option-buttons",children:P(Ir,{customStyle:o.filled,hoveredStyle:o.unfilled,text:ve.reset,handleClick:n})}),P("div",{className:"reset-option-buttons",children:P(Ir,{customStyle:o.unfilled,hoveredStyle:o.filled,text:ve.cancel,handleClick:r})})]})]})};Nn(".chat-header {\n  padding: 15px;\n  font-size: 18px;\n  font-weight: 600;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  border-top-left-radius: 15px;\n  border-top-right-radius: 15px;\n}\n\n.header-row {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n}\n\n.title {\n  font-size: 16px;\n  font-weight: 600;\n}\n\n.close-icon {\n  cursor: pointer;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 16px;\n  height: 16px;\n}\n\n.resize-icon {\n  cursor: pointer;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 16px;\n  height: 16px;\n  margin-right: 14px;\n}\n\n.reset-icon-container {\n  cursor: pointer;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 16px;\n  height: 16px;\n  margin-right: 13px;\n}\n\n.reset-icon {\n  cursor: pointer;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 16px;\n  height: 16px;\n}\n\n.header-image {\n  margin-right: 8px;\n}\n\n.chat-header .tooltip-container {\n  position: relative;\n  display: inline-block;\n  cursor: pointer;\n}\n\n.chat-header .tooltip-container::after {\n  content: attr(data-tooltip);\n  position: absolute;\n  top: 150%;\n  left: 30%;\n  transform: translateX(-50%);\n  background-color: #333;\n  color: #fff;\n  padding: 5px 8px;\n  border-radius: 4px;\n  font-size: 12px;\n  white-space: nowrap;\n  opacity: 0;\n  visibility: hidden;\n  transition:\n    opacity 0.2s ease-in-out,\n    visibility 0.2s ease-in-out;\n  z-index: 1000;\n}\n\n.chat-header .tooltip-container:hover::after {\n  opacity: 1;\n  visibility: visible;\n}\n\n.disabled-reset {\n  opacity: 0.6;\n  cursor: not-allowed !important;\n}\n\n.overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.5);\n  z-index: 1001;\n}\n\n.reset-modal {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 1001;\n  width: 100%;\n  height: 100%;\n}\n\n.linear-loader {\n  height: 4px;\n  background: linear-gradient(\n    90deg,\n    rgba(253, 187, 33, 0.1) 0%,\n    rgba(253, 187, 33, 1) 25%,\n    rgba(253, 187, 33, 0.5) 50%,\n    rgba(253, 187, 33, 0.5) 75%,\n    rgba(253, 187, 33, 0.1) 100%\n  );\n  background-size: 200% 100%;\n  animation: loading-animation 2s linear infinite;\n}\n\n@keyframes loading-animation {\n  100% {\n    background-position: 0% 0%;\n  }\n  0% {\n    background-position: 200% 0%;\n  }\n}\n");const Fi=e=>{const{toggleChatWindow:t,toggleSize:n,resetChat:r,settings:i,isExpanded:o,isStreaming:s,isMobile:a=!1}=e,{chatTitle:l,assets:c={},theme:d=Ce}=i||{},{closeIcon:u="",maximizeIcon:p="",minimizeIcon:h="",logo:g="",resetIcon:m="",resetModalCloseIcon:f=""}=c,b={header:{backgroundColor:d.primaryColor,color:ye}},[y,w]=hn(!1),_=()=>{s||w((e=>!e))},v=()=>{s||(w(!1),r())},k=fn((()=>P("div",{style:{display:y?"block":"none"},children:P("div",{className:"overlay",id:"overlay",children:P("div",{className:"reset-modal",children:P(ji,{theme:d,handleReset:v,handleCancel:_,closeIcon:f})})})})),[y]),N=fn((()=>m?.length?P("img",{src:m,alt:"reset",className:` reset-icon ${s&&"disabled-reset"} `}):"Reset"),[m,s]),S=fn((()=>u?.length?P("img",{src:u,alt:"close",className:"close-icon"}):"X"),[u]),E=fn((()=>p?.length?P("img",{src:o?h:p,alt:o?"minimize":"maximize",className:"resize-icon"}):"o"),[p,o]);return P(x,{children:[k,P("div",{className:"chat-header",style:b.header,"data-testId":"chat-header",children:[P("div",{className:"header-row",children:[P("img",{src:g,alt:"bot icon",className:"header-image",width:24,height:24}),P("span",{className:"title",children:l})]}),P("div",{className:"header-row",children:[P("div",{className:`reset-icon-container ${s&&"disabled-reset"} ${!a&&!s&&"tooltip-container"}`,onClick:_,"aria-label":"Click to start a new chat","data-testId":"chat-reset-icon",...!a&&!s&&{"data-tooltip":st},children:N}),!a&&P("div",{className:"resize-icon tooltip-container",onClick:n,"aria-label":"Click to maximize or minimize the chat","data-testId":"resize-icon","data-tooltip":o?rt:it,children:E}),P("div",{className:`close-icon ${!a&&"tooltip-container"}`,onClick:t,"aria-label":"Click to close the chat","data-testId":"chat-close-icon",...!a&&{"data-tooltip":ot},children:S})]})]}),s&&P("div",{className:"linear-loader"})]})};Nn(".chat-input-container {\n  display: flex;\n  margin: 10px 15px;\n  height: 38px;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.chat-input-box {\n  border: 1px solid #beb9b5;\n  padding-right: 10px;\n  padding-left: 10px;\n  border-radius: 25px;\n  width: 100%;\n}\n\n.input-field {\n  border: 1px solid transparent;\n  background-color: transparent;\n  border-radius: 25px;\n  width: 95%;\n}\n\n.chat-input-box input {\n  flex: 1;\n  padding: 10px;\n  border: 0px solid transparent;\n  font-size: 15px;\n  outline: none;\n  background-color: transparent;\n}\n\n.send-button {\n  cursor: pointer;\n  width: 38px;\n  height: 38px;\n  border-radius: 50%;\n  margin-left: 4px;\n  padding-top: 4px;\n  border: none;\n}\n\n.send-button:hover {\n  background-color: #283049 !important;\n}\n\n.disabled-send-button {\n  opacity: 0.6;\n}\n\n.send-icon {\n  width: 20px;\n  height: 20px;\n  margin: auto;\n}\n\n.chat-input-container .tooltip-container {\n  position: relative;\n  cursor: pointer;\n}\n\n.chat-input-container .tooltip-container::after {\n  content: attr(data-tooltip);\n  position: absolute;\n  bottom: 120%;\n  left: 0%;\n  transform: translateX(-50%);\n  background-color: #333;\n  color: #fff;\n  padding: 5px 8px;\n  border-radius: 4px;\n  font-size: 12px;\n  font-weight: 500;\n  white-space: nowrap;\n  opacity: 0;\n  visibility: hidden;\n  transition:\n    opacity 0.2s ease-in-out,\n    visibility 0.2s ease-in-out;\n  z-index: 1000;\n}\n\n.chat-input-container .tooltip-container:hover::after {\n  opacity: 1;\n  visibility: visible;\n}\n\n.button-container {\n  min-width: 38px;\n}\n\n.bot-suggestions-group {\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  gap: 8px;\n  margin: 10px 15px;\n  margin-bottom: 0;\n}\n\n.bot-suggestion {\n  height: 22px;\n  border: solid 1px;\n  border-radius: 6px;\n  padding: 2px 8px;\n  text-align: center;\n  align-content: center;\n  font-weight: 500;\n  font-size: 12px;\n  cursor: pointer;\n}\n");const Gi=e=>{const{handleSendMessage:t,input:n,setInput:r,isDisabled:i=!1,sendIcon:o,theme:s=Ce,placeholder:a,isOpen:l,isExpanded:c,suggestions:d=[]}=e,u={input:{color:me},button:{backgroundColor:s?.primaryColor},botSuggestionChips:{borderColor:s.primaryColor,backgroundColor:s.chatWindowColor,color:s.textColor,transition:"background-color 0.3s ease"},botSuggestionChipsHover:{borderColor:s.primaryColor,backgroundColor:s.primaryColor,color:s.chatWindowColor,transition:"background-color 0.3s ease"}},p=jt(),h=mn(null);gn((()=>{h?.current&&l&&h?.current?.focus()}),[l,c]);const g=fn((()=>P("div",{className:"bot-suggestions-group",children:d?.map((e=>P(Ir,{handleClick:()=>(e=>{t(e.messagePrompt)})(e),text:e.label,customStyle:u.botSuggestionChips,hoveredStyle:u.botSuggestionChipsHover,className:"bot-suggestion"})))})),[d]);return P(x,{children:[Ht(d)&&g,P("div",{className:"chat-input-container",children:[P("div",{className:"chat-input-box",children:P("input",{type:"text",value:n,onInput:e=>{const t=e?.target;r(t?.value||"")},onKeyUp:e=>{"Enter"===e.key&&t()},className:"input-field",style:u.input,placeholder:a,"aria-label":"Type your message to send here","aria-disabled":i,"data-testid":"chat-input-field",ref:h,name:"chat-input-field"})}),P("div",{className:"button-container",children:P("div",{className:`${!p&&"tooltip-visible tooltip-container"}`,...!p&&{"data-tooltip":at},children:P("button",{className:`send-button ${i&&"disabled-send-button"}`,onClick:()=>t(),"aria-label":"Click to send your message",disabled:i,style:u.button,"data-testid":"chat-send-button",children:P("img",{src:o,alt:"Send",className:"send-icon"})})})})]})]})};Nn(".chatbot-button {\n  position: fixed;\n  bottom: 40px;\n  right: 20px;\n  width: 64px;\n  height: 64px;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  z-index: 1000;\n  transition: transform 0.3s ease;\n}\n\n.hidden-div {\n  visibility: hidden;\n}\n\n.chat-circle-icon {\n  width: 64px;\n  height: 64px;\n  border-radius: 50%;\n  margin: auto;\n  overflow: hidden;\n  padding: 1px;\n}\n\n.chat-display {\n  position: relative;\n  flex: 1;\n  padding: 12px;\n  overflow-y: auto;\n  overflow-x: hidden;\n  font-size: 15px;\n  scroll-behavior: smooth;\n  scrollbar-width: 3px;\n}\n\n.start-conversation {\n  height: 100%;\n  width: 100%;\n  color: #888888;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.chat-window {\n  max-width: 90%;\n  max-height: 90%;\n  height: 70%;\n  position: fixed;\n  bottom: 40px;\n  right: 20px;\n  border-radius: 15px;\n  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n  z-index: 1000;\n  transform-origin: bottom;\n  text-align: left;\n  transition:\n    opacity 0.3s ease-in-out,\n    transform 0.6s ease-out,\n    width 0.4s ease-out,\n    height 0.4s ease-out;\n  transform: translateY(150%);\n}\n\n.chat-window.open {\n  height: 70%;\n  max-width: 90%;\n  max-height: 90%;\n  transform: translateY(0);\n}\n\n.chat-window.closing {\n  transform: translateY(150%);\n}\n\n@keyframes bounce-in {\n  0% {\n    transform: translateY(150%);\n  }\n  60% {\n    transform: translateY(-60px);\n  }\n  80% {\n    transform: translateY(20px);\n  }\n  100% {\n    transform: translateY(0);\n  }\n}\n\n.chat-window.open.small {\n  width: 400px;\n}\n\n.chat-window.open.large {\n  width: 800px;\n  height: 75%;\n}\n\n.typing-row {\n  display: flex;\n  flex-direction: row;\n  align-items: start;\n}\n\n.down-arrow {\n  position: absolute;\n  cursor: pointer;\n  z-index: 100;\n  bottom: 104px;\n  right: 15px;\n  width: 30px;\n  height: 30px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border-radius: 50%;\n  overflow: hidden;\n  background: rgba(56, 94, 120, 0.2);\n  backdrop-filter: blur(10px);\n  -webkit-backdrop-filter: blur(10px);\n  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n}\n\n.down-arrow img {\n  padding-top: 2px;\n}\n\n.powered-by {\n  display: flex;\n  justify-content: center;\n  margin-bottom: 15px;\n  font-size: 13px;\n}\n\n.milestone-bold {\n  font-weight: bold;\n  margin-left: 4px;\n}\n\n.chat-display p {\n  font-size: 15px;\n  line-height: 21px;\n  font-weight: 400;\n  padding: 0px;\n  margin: 0px;\n}\n\n.loading-older-messages {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 100%;\n  margin: auto;\n  font-size: 12px;\n  padding-bottom: 8px;\n}\n\n@media only screen and (max-width: 600px) {\n  .chat-window {\n    height: 75% !important;\n  }\n}\n\n.no-click {\n  pointer-events: none;\n}\n\n.card-container-animation {\n  animation: loadingOpacity 2s infinite;\n}\n\n@keyframes loadingOpacity {\n  0% {\n    opacity: 0.2;\n  }\n  50% {\n    opacity: 1;\n  }\n  100% {\n    opacity: 0.2;\n  }\n}\n\n* {\n  box-sizing: border-box;\n  -webkit-box-sizing: border-box;\n  -ms-box-sizing: border-box;\n  -moz-box-sizing: border-box;\n}\n");const Ji=e=>{const{settings:t,backendChatUrl:n,backendBaseUrl:r}=e,i=t?.theme||{},o=t?.assets||{},s=t?.preloadAssets||[],a={...Ce,...i},l=(a.primaryColor,a.chatWindowColor,{backgroundColor:a.chatWindowColor,bottom:t?.position?.bottom});a.primaryColor;let c;const d=o?.downIcon||"",u=jt(),[p,h]=hn("true"===Mt({key:Nt.IS_CHAT_BOT_OPEN})),[g,m]=hn(!0),[f,b]=hn(!1),[x,y]=hn(!1),[w,_]=hn([]),v=mn(null),{messages:k,streaming:N,input:S,isApiMessagesLoading:E,previousMessages:C,currentMessageData:R,currentEvent:T,updateMessages:I,resetChat:A,setInput:O,handleChatContainerScroll:M,handleStorageChange:D,handleSendMessage:L,setMessages:z}=(({backendBaseUrl:e,backendChatUrl:t,isOpen:n,settings:r,setIsOpen:i,setSuggestionList:o=()=>{},chatContainerRef:s})=>{const[a,l]=hn([]),[c,d]=hn([]),[u,p]=hn(),[h,g]=hn(""),[m,f]=hn(""),[b,x]=hn(!1),[y,w]=hn(!1),[_,v]=hn("");let k="",N=null,S=!1,E={};gn((()=>{const e=()=>{document.hidden||I()},t=()=>{I()};return document.addEventListener("visibilitychange",e),window.addEventListener("focus",t),()=>{document.removeEventListener("visibilitychange",e),window.removeEventListener("focus",t)}}),[]),gn((()=>{const e=e=>{x(!1),Dt({key:Nt.IS_STREAMING,value:"false"}),zt.error(JSON.stringify({...Se[Ee.UNHANDLED_ERROR],error:e}))};return window.addEventListener("error",e),window.addEventListener("unhandledrejection",e),()=>{window.removeEventListener("error",e),window.removeEventListener("unhandledrejection",e)}}),[]),gn((()=>{const e=Vt(),t=Wt(),r=qt(),i=r&&new Date(r)<new Date;e||b||!n?n&&e&&!a.length?C(e,t):n&&e&&a.length>0&&i&&I():A()}),[n]);const C=async(t,n)=>{x(!0);try{const r=Ut(e)?e:"https://keyvalue-core-svc.milestonedev.info",i=await Zt(`${r}/${tt}/thread-id/${t}?timestamp=${Date.now()}`,ke.GET),o=i?.data?.thread?.isExpired;if(o)return L(),!0;n>1?R():await T(t,r),Dt({key:Nt.THREAD,value:JSON.stringify(i.data.thread)})}catch{zt.warn(Se[Ee.ERROR_IN_PARSING]?.message)}finally{x(!1)}return!1},R=()=>{const e=Mt({key:Nt.MESSAGES}),t=JSON.parse(e||"[]");5===t.length&&v(new Date(t[0]?.userMessage?.timestamp).toISOString()),l(t)},T=async(e,t)=>{const n=await Zt(`${t}/${nt}?threadId=${e}&limit=5&timestamp=${Date.now()}`,ke.GET);if(!n)return;const r=Jt(n.messages);l(r),Dt({key:Nt.MESSAGES,value:JSON.stringify(r)}),v(n?.pagination?.nextCursor||"")},I=()=>{const e=Vt(),t=qt(),n="true"===Mt({key:Nt.IS_CHAT_BOT_OPEN}),r=Wt();e&&t&&new Date(t)<new Date&&n&&C(e,r)},A=async()=>{try{x(!0);const n=await Zt(`${Ut(e)?e:"https://keyvalue-core-svc.milestonedev.info"}/${tt}?timestamp=${Date.now()}`,ke.POST);if(n?.data?.thread?.threadId){const e=n.data.thread.threadId;Dt({key:Nt.THREAD,value:JSON.stringify(n.data.thread)}),zt.info(Oe),Dt({key:Nt.IS_STREAMING,value:"true"});const i={"x-site-id":r?.miSessionInfo?.siteId,"x-site-url":r?.miSessionInfo?.siteURL},o={chatId:e,userMessage:"",timeout:r?.streamTimeout,apiUrl:`${Ut(t)?t:"https://keyvalue-ai-svc.milestonedev.info"}/stream`,headers:i,onStreamMessage:M,onStreamMessageError:D};v(""),await Kt(o)}}catch{zt.warn(Se[Ee.ERROR_IN_PARSING]?.message)}finally{x(!1)}},O=(e,t)=>{const n={text:e,type:We,timestamp:(new Date).getTime(),messageStructure:t};return{userMessage:N||void 0,aiMessage:n}},M=e=>{const t=e?.data||"",n=e?.event||"",r="end"===n,i="init"===n,o="delta"===n,s="final"===n,a="error"===n,c="feedback"===n,d={messageId:E?.run_id,threadId:E?.threadId,text:k,type:We,timestamp:(new Date).getTime(),shouldShowFeedback:E?.shouldShowFeedback,messageStructure:S?St.JSON:St.MARKDOWN};if(n.length>0&&g(n),r){zt.info(`${De} ${d?.text}`);const e={userMessage:N||void 0,aiMessage:d};l((t=>[...t,e])),Yt(e,xt),k="",N=null,S=!1,p(void 0),x(!1),Dt({key:Nt.IS_STREAMING,value:"false"})}else if(t?.length>0)try{if(i)k=t,p(O(k,St.MARKDOWN));else if(o)try{const e=JSON.parse(t);k+=e?.content,e?.type===St.JSON_TOKEN?(S=!0,p(O(k,St.JSON_TOKEN))):p(O(k,St.MARKDOWN))}catch{zt.warn(Se[Ee.ERROR_IN_PARSING]?.message)}else if(s)try{const e=JSON.parse(t);if(e?.type===St.JSON){S=!0,k=e?.content;const t=JSON.stringify(e?.content);p(O(t,St.JSON))}else k=e?.content,S=!1,p(O(e?.content,St.MARKDOWN))}catch{zt.warn(Se[Ee.ERROR_IN_PARSING]?.message)}else if(a)try{const e=JSON.parse(t);if(e?.type===St.ERROR){zt.info(`${De} ${e?.content?.message}`);const t=e?.content?.shouldRetry&&Ut(k)?k:e?.content?.message,n=t===k?St.JSON:St.MARKDOWN,r={messageId:`error-${(new Date).getTime()}`,threadId:Vt(),type:qe,text:t,timestamp:(new Date).getTime(),shouldShowFeedback:!1,messageStructure:n,failed:e?.content?.shouldRetry},i={userMessage:N||void 0,aiMessage:r};l((e=>[...e,i])),p(void 0),x(!1),Yt(i,xt),Dt({key:Nt.IS_STREAMING,value:"false"}),k="",N=null,S=!1}else D(Se[Ee.ERROR_IN_PARSING]?.message)}catch{D(Se[Ee.ERROR_IN_PARSING]?.message)}else c&&(E=JSON.parse(t))}catch{zt.warn(Se[Ee.ERROR_IN_PARSING]?.message)}},D=e=>{const t={messageId:`error-${(new Date).getTime()}`,threadId:Vt(),text:k,type:We,timestamp:(new Date).getTime(),shouldShowFeedback:!1,messageStructure:S?St.JSON:St.MARKDOWN,failed:!0},n=!Ut(k),r=N?{...N,failed:n,isMessageSendClientError:!navigator.onLine}:void 0,i={};Ut(k)&&(i.aiMessage=t),r&&(i.userMessage=r),l((e=>[...e,i])),p(void 0),Yt(i,xt),x(!1),Dt({key:Nt.IS_STREAMING,value:"false"}),k="",N=null,S=!1,zt.error(JSON.stringify({...Se[Ee.NETWORK_ERROR],error:e}))},L=()=>{Lt({key:Nt.MESSAGES}),Lt({key:Nt.THREAD}),l([]),d([]),f(""),o([]),A()};return{streaming:b,messages:a,input:m,isApiMessagesLoading:y,previousMessages:c,currentMessageData:u,currentEvent:h,setMessages:l,updateMessages:({feedback:e,messageId:t})=>{if(!Mt({key:Nt.IS_STREAMING})){const n=a.map((n=>{if(n?.aiMessage?.messageId!==t)return n;const r=n.aiMessage;return r.feedback=e,{...n,aiMessage:r}}));l(n)}},resetChat:L,setInput:f,handleSendMessage:async e=>{let n=m;if(o([]),"string"==typeof e&&(n=e),n?.trim()?.length>0&&!b){const e={text:n,type:Ve,timestamp:(new Date).getTime()};N=e,zt.info(`${Le} ${n}`),p({userMessage:e}),Yt({userMessage:e}),f(""),x(!0),Dt({key:Nt.IS_STREAMING,value:"true"});const i=Vt();try{const e={"x-site-id":r?.miSessionInfo?.siteId,"x-site-url":r?.miSessionInfo?.siteURL},o={chatId:i,userMessage:n,timeout:r?.streamTimeout,apiUrl:`${Ut(t)?t:"https://keyvalue-ai-svc.milestonedev.info"}/stream`,headers:e,onStreamMessage:M,onStreamMessageError:D,onTimeout:D};await Kt(o)}catch(e){zt.error(JSON.stringify({message:Pe,error:e}))}finally{x(!1),Dt({key:Nt.IS_STREAMING,value:"false"})}}},handleStorageChange:e=>{try{if(e.key===Nt.MESSAGES){const t=JSON.parse(e.newValue||"[]");5===t.length&&v(new Date(t[0].userMessage?.timestamp).toISOString()),l(t),d([])}else if(e.key===Nt.IS_STREAMING){const t="true"===e.newValue;x(t)}e.key===Nt.IS_CHAT_BOT_OPEN&&i("true"===Mt({key:Nt.IS_CHAT_BOT_OPEN})),e.key===Nt.THREAD&&d([])}catch{zt.warn(Se[Ee.ERROR_IN_PARSING]?.message)}},handleChatContainerScroll:async()=>{if(!s.current)return;const{scrollTop:t}=s.current;if(0!==t||a.length<5||!_)return;const n=Vt();w(!0);try{const t=Ut(e)?e:"https://keyvalue-core-svc.milestonedev.info",r=await Zt(`${t}/${nt}?threadId=${n}&limit=5&cursor=${_}&timestamp=${Date.now()}`,ke.GET);if(!r)return;const i=Jt(r.messages);d((e=>[...i,...e])),v(r?.pagination?.nextCursor||"")}catch(e){zt.error(JSON.stringify({message:Fe,error:e}))}finally{w(!1)}}}})({backendBaseUrl:r,backendChatUrl:n,isOpen:p,chatContainerRef:v,settings:t,setIsOpen:h,setSuggestionList:_});gn((()=>(Dt({key:Nt.IS_CHAT_BOT_OPEN,value:`${p}`}),document.addEventListener("keyup",B),()=>{document.removeEventListener("keyup",B)})),[p,f]),gn((()=>{const e=v.current;c=`tab-${Date.now()}`,e&&e.addEventListener("scroll",H);try{const e=JSON.parse(Mt({key:Nt.ACTIVE_TABS})||"{}");e[c]=!0,Dt({key:Nt.ACTIVE_TABS,value:JSON.stringify(e)})}catch{zt.warn(Se[Ee.ERROR_IN_PARSING]?.message)}return window.addEventListener("storage",D),window.addEventListener("beforeunload",$),()=>{$(),e&&e.removeEventListener("scroll",H),window.removeEventListener("storage",D),window.removeEventListener("beforeunload",$)}}),[]),gn((()=>{U()}),[k?.length]),gn((()=>{N||setTimeout((()=>{U()}),1e3)}),[N]);const $=()=>{try{const e=JSON.parse(Mt({key:Nt.ACTIVE_TABS})||"{}");delete e[c],Dt({key:Nt.ACTIVE_TABS,value:JSON.stringify(e)})}catch{zt.warn(Se[Ee.ERROR_IN_PARSING]?.message)}},B=e=>{e.key===Ze&&p?(e.preventDefault(),j()):e.altKey&&e.key.toLowerCase()===Ye&&!p?(e.preventDefault(),h(!0)):u||(e.altKey&&e.key.toLowerCase()===Ke&&!f?(zt.info(`${$e}`),e.preventDefault(),b(!0)):e.altKey&&e.key.toLowerCase()===Ke&&f&&(zt.info(`${ze}`),e.preventDefault(),b(!1)))},H=()=>{if(v.current){const{scrollTop:e,scrollHeight:t,clientHeight:n}=v.current;m(e+n>=t-5)}},U=()=>{v.current&&(v.current.scrollTop=v.current.scrollHeight)},j=()=>{if(zt.info(`${Me}  ${p?"closed":"open"}`),p){const e=window?.location?.href,n={...ut,label:e};Gt(n,t?.PushToGTM_global),y(!0),setTimeout((()=>{h(!1),y(!1)}),400)}else h(!0)},F=()=>{u||b((e=>!e))},G=function(e,t){let n=!1;return function(...r){n||(e.apply(this,r),n=!0,setTimeout((()=>{n=!1}),t))}}((()=>{const e=window?.location?.href,n={...ct,label:e};Gt(n,t?.PushToGTM_global),h(!0)}),2e3),J=e=>{_(e||[])},W=e=>{L(e),setTimeout((()=>{U()}),100)},q=e=>{e&&(z((t=>t?.filter((t=>t?.userMessage?.timestamp!==e?.userMessage?.timestamp)))),Yt(e,yt),W(e?.userMessage?.text))},V=fn((()=>P(Ui,{toggleChatWindow:G,settings:t})),[p]),Y=fn((()=>g||N?null:P("div",{className:"down-arrow",onClick:U,children:P("img",{src:d,alt:"Down",width:14,height:14})})),[g]),Z=fn((()=>P(Gi,{handleSendMessage:W,input:S,setInput:O,isDisabled:N,placeholder:t?.chatPlaceholder,sendIcon:o?.sendIcon,theme:a,isOpen:p,isExpanded:f,suggestions:w})),[S,N,t,o,a,p,f]),K=fn((()=>P(Hi,{streaming:N,chatContainerRef:v,settings:t,handleChatContainerScroll:M,handleSendMessage:W,isApiMessagesLoading:E,messages:k,previousMessages:C,currentMessageData:R,currentEvent:T,isExpanded:f,setSuggestions:J,updateMessages:I,handleRetry:q})),[N,k,C,R,T,v,t,f,E]),Q=fn((()=>P(Fi,{toggleChatWindow:j,toggleSize:F,resetChat:A,settings:t,isStreaming:N,isExpanded:f,isMobile:u})),[f,u,N,t]),X=fn((()=>Ht(s)&&P("div",{className:"hidden-div",children:s?.map((e=>P("img",{src:e})))})),[t?.preloadAssets]);return P("div",{children:[X,V,P("div",{className:`chat-window ${p&&"open "+(f?"large":"small")} ${x&&"closing"}`,style:{...l},"data-testid":"chat-window",children:[Q,K,Y,Z]})]})};class Wi{settingsConfig;miSessionInfo;backendBaseUrl;backendChatUrl;constructor(e){const{miSessionInfo:t,settings:n={},backendBaseUrl:r="",backendChatUrl:i=""}=e;this.settingsConfig={...n,miSessionInfo:t},this.backendBaseUrl=r,this.miSessionInfo=t,this.backendChatUrl=i,this.setLoggerFlag(n?.logEnabled),this.initUI()}setLoggerFlag(e){e?Dt({key:Nt.LOGGER_ENABLED,value:"true"}):Lt({key:Nt.LOGGER_ENABLED})}async initUI(){try{zt.info(Be);const e=await Zt(`${Ut(this.backendBaseUrl)?this.backendBaseUrl:"https://keyvalue-core-svc.milestonedev.info"}/${et}`,ke.POST,{siteId:this.miSessionInfo.siteId,siteUrl:this.miSessionInfo.siteURL});if(!e)throw new Error(Se[Ee.CONFIGURATION_ERROR]?.message);const t=await(e?.data);if(t?.site){zt.info(Ae);const e=document.createElement("div");document.body.appendChild(e);const n=Pt(Re,t?.site?.settings||{},this.settingsConfig);z(P(Ji,{settings:n,backendChatUrl:this.backendChatUrl,backendBaseUrl:this.backendBaseUrl}),e)}}catch(e){zt.error(JSON.stringify({message:He,error:e}))}}}window&&(window.MilestoneChat=Wi),e.MilestoneChat=Wi,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=milestone-chat.js.map
